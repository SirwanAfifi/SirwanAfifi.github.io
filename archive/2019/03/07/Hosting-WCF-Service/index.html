<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.5a8731571a83754ad30b.css">#disqus_thread{width:95%;margin:auto}code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}*{box-sizing:border-box}body,html{margin:0;padding:0}body{font-family:Open Sans,Helvetica,Arial,sans-serif;font-size:16px;line-height:1.5;color:#454441;background-color:#fff}@media (min-width:990px){body{font-size:18px}}h1,h2,h3,h4,h5,h6{margin:0 0 10px;font-weight:600;line-height:1.25;text-rendering:optimizeLegibility}h1{font-size:40px}h2{margin-top:20px;font-size:32px}h3{margin-top:24px;font-size:24px}h4,h5,h6{margin-top:16px;font-size:16px}p{margin:0 0 15px}ol,ul{margin-bottom:15px}hr{position:relative;margin:40px 0;border:0;border-top:1px solid #eee;border-bottom:1px solid #fff}strong{color:#222}abbr{background-color:#eee;display:inline-block;padding:3px;font-size:13px;font-weight:700;color:#555;text-shadow:0 1px 1px hsla(0,0%,100%,.5);text-transform:uppercase;border-radius:3px}code,pre{font-family:Menlo,Monaco,Courier New,monospace}code{padding:.25em .5em;font-size:85%;color:#bf616a;border-radius:3px}pre{display:block;margin:0 0 14px;padding:15px 20px;font-size:16px;line-height:1.4;white-space:pre;white-space:pre-wrap;word-break:break-all;word-wrap:break-word}pre code{padding:0;font-size:100%;color:inherit;background-color:transparent}.highlight{margin-bottom:15px;border-radius:4px;margin-left:0;margin-right:0}.highlight pre{margin-bottom:0}blockquote{padding:5px 30px 5px 25px;margin:15px 0;border-left:5px solid #eee}blockquote p{margin-bottom:0;color:#7a7a7a;text-indent:-.4em}blockquote p:before{content:"\201C"}blockquote p:after{content:"\201D"}img{display:block;margin:0 0 15px;border-radius:5px}.lead{font-size:20px;font-weight:300}@media (min-width:990px){.lead{font-size:24px}}a{font-weight:600;color:#222;text-decoration:none}a:focus,a:hover{text-decoration:underline}.masthead{color:#fff;background-color:#2a2a2a}.masthead-inner{padding:20px}.masthead h1{margin-top:0;font-family:Abril Fatface}.masthead .lead{margin-bottom:0}.masthead a{color:#fff}.colophon{margin-top:20px;color:hsla(0,0%,100%,.5)}.colophon-links{padding-left:0;list-style:none}.colophon-links li{color:inherit}@media (min-width:768px){.masthead-inner{padding:40px}}@media (min-width:990px){.masthead{position:fixed;top:0;left:0;bottom:0;width:25%;margin-bottom:0}.masthead-inner{position:absolute;right:0;left:0}.masthead h1{font-size:64px}.colophon{margin-top:40px}}.content{padding:40px 20px}@media (min-width:990px){.content{padding:60px 0}.container{margin-left:30%;margin-right:10%}}.post{margin-bottom:40px}@media (min-width:990px){.post{margin-bottom:60px}}.post-date{display:block;margin:-10px 0 10px;color:#9a9a9a}.related{padding-top:20px;padding-bottom:40px;border-top:1px solid #eee}.related-posts{padding-left:0;list-style:none}.related-posts h3{margin-top:0}.related-posts li small{font-size:75%;color:#999}.related-posts li a:hover{color:#000;text-decoration:none}.related-posts li a:hover small{color:inherit}.pagination{overflow:hidden;margin-top:40px;font-weight:700;color:#ccc;text-align:center;border-top:1px solid #eee}@media (min-width:990px){.pagination{margin-bottom:60px;border:1px solid #eee}}.pagination a,.pagination span{float:left;width:50%;padding:20px}.pagination a:first-child,.pagination span:first-child{border-right:1px solid #eee}.pagination a:hover{text-decoration:none;background-color:#f5f5f5}@media (min-width:990px){.layout-reverse .masthead{left:auto;right:0}.layout-reverse .container{margin-left:10%;margin-right:35%}}.theme-base-08 .masthead{background-color:#ac4142}.theme-base-08 .container a,.theme-base-08 .related-posts li a:hover{color:#ac4142}.theme-base-09 .masthead{background-color:#d28445}.theme-base-09 .container a,.theme-base-09 .related-posts li a:hover{color:#d28445}.theme-base-0a .masthead{background-color:#f4bf75}.theme-base-0a .container a,.theme-base-0a .related-posts li a:hover{color:#f4bf75}.theme-base-0b .masthead{background-color:#90a959}.theme-base-0b .container a,.theme-base-0b .related-posts li a:hover{color:#90a959}.theme-base-0c .masthead{background-color:#75b5aa}.theme-base-0c .container a,.theme-base-0c .related-posts li a:hover{color:#75b5aa}.theme-base-0d .masthead{background-image:linear-gradient(0deg,#03a9f4,rgba(18,78,212,.75))}.theme-base-0d .container a,.theme-base-0d .related-posts li a:hover{color:#6a9fb5}.theme-base-0d .container a:hover{background:linear-gradient(0deg,#03a9f4,rgba(18,78,212,.75));-webkit-background-clip:text;-webkit-text-fill-color:transparent}.theme-base-0e .masthead{background-color:#aa759f}.theme-base-0e .container a,.theme-base-0e .related-posts li a:hover{color:#aa759f}.theme-base-0f .masthead{background-color:#8f5536}.theme-base-0f .container a,.theme-base-0f .related-posts li a:hover{color:#8f5536}.profilepic img{border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%;margin:0 auto;border:3px solid #fff}.home h1 a:hover{text-decoration:none}.home .title{font-family:Open Sans;font-weight:800;padding-bottom:15px}.home article .post-meta{margin-bottom:15px}.center-image{margin:0 auto}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.highlight .hll{background-color:#49483e}.highlight{background:#272822;color:#f8f8f2}.highlight .c{color:#75715e}.highlight .err{color:#960050;background-color:#1e0010}.highlight .k{color:#66d9ef}.highlight .l{color:#ae81ff}.highlight .n{color:#f8f8f2}.highlight .o{color:#f92672}.highlight .p{color:#f8f8f2}.highlight .c1,.highlight .ch,.highlight .cm,.highlight .cp,.highlight .cpf,.highlight .cs{color:#75715e}.highlight .gd{color:#f92672}.highlight .ge{font-style:italic}.highlight .gi{color:#a6e22e}.highlight .gs{font-weight:700}.highlight .gu{color:#75715e}.highlight .kc,.highlight .kd{color:#66d9ef}.highlight .kn{color:#f92672}.highlight .kp,.highlight .kr,.highlight .kt{color:#66d9ef}.highlight .ld{color:#e6db74}.highlight .m{color:#ae81ff}.highlight .s{color:#e6db74}.highlight .na{color:#a6e22e}.highlight .nb{color:#f8f8f2}.highlight .nc{color:#a6e22e}.highlight .no{color:#66d9ef}.highlight .nd{color:#a6e22e}.highlight .ni{color:#f8f8f2}.highlight .ne,.highlight .nf{color:#a6e22e}.highlight .nl,.highlight .nn{color:#f8f8f2}.highlight .nx{color:#a6e22e}.highlight .py{color:#f8f8f2}.highlight .nt{color:#f92672}.highlight .nv{color:#f8f8f2}.highlight .ow{color:#f92672}.highlight .w{color:#f8f8f2}.highlight .mb,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:#ae81ff}.highlight .dl,.highlight .s2,.highlight .sa,.highlight .sb,.highlight .sc,.highlight .sd{color:#e6db74}.highlight .se{color:#ae81ff}.highlight .s1,.highlight .sh,.highlight .si,.highlight .sr,.highlight .ss,.highlight .sx{color:#e6db74}.highlight .bp{color:#f8f8f2}.highlight .fm{color:#a6e22e}.highlight .vc,.highlight .vg,.highlight .vi,.highlight .vm{color:#f8f8f2}.highlight .il{color:#ae81ff}</style><meta name="generator" content="Gatsby 2.13.18"/><link as="script" rel="preload" href="/component---src-templates-post-js-d9efa3ef25aadd88f03b.js"/><link as="script" rel="preload" href="/1-819ee68fb5c8bae174f7.js"/><link as="script" rel="preload" href="/app-dec95bf3df4a1ab71968.js"/><link as="script" rel="preload" href="/styles-debc7e6665f8b758e787.js"/><link as="script" rel="preload" href="/webpack-runtime-c9afbc68a85eb8f29059.js"/><link as="fetch" rel="preload" href="/page-data/archive/2019/03/07/Hosting-WCF-Service/page-data.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div><header class="masthead"><div class="masthead-inner"><div class="profilepic"><a href="/"><img src="/avatar.png" alt="Profile Picture"/></a></div><h2>Sirwan Afifi</h2><p class="lead">Stories from a web developer.</p><div class="colophon"><ul class="colophon-links"><li><a href="/about">about</a></li><li><a href="/archive">archives</a></li><li><a href="/#">contact</a></li></ul><p>© 2019. <!-- -->Sirwan Afifi<!-- --> All rights reserved.</p></div></div></header><div class="content container"><div class="post"><h1>Hosting a WCF Service as a Windows Service Using Topshelf</h1><span class="post-date">March 7th, 2019<!-- --> | <span class="disqus-comment-count" data-disqus-identifier="Hosting-WCF-Service/" data-disqus-url="https://sirwan.info/archive/2019/03/07/Hosting-WCF-Service/">...</span></span><div><p>You might be wondering why I am blogging about WCF. Is it still relevant? This is part of a legacy WCF project, and I am responsible for adding some functionalities to it, I like it though. By the way, it's been a long time since it went out of fashion, but many large enterprise applications still use it.</p>
<p>As you know, WCF services need to run in a host process so when clients want to consume the services we need to make sure the services are alive. The host process needs to provide a host, and this host is responsible for setting up the services and listening for incoming messages then creating instances of the service and respond to the client by dispatching a call to the service class. As I mentioned in a legacy application we wanted to host our services as a Windows Service, this app had been using a Console application, but the problem with Console applications is that you need to make sure the app is open all the time. For example, if the server gets restarted you should manually open the app, you could say we should add this app as a startup process so whenever the system boots up this app is opened but we can achieve a better result by writing a Windows service instead. Windows services are a great way to run code in the background; this means that we don’t need a Console Application to run the application. Once you installed the service it keeps running, we can control how to start the service for example when can set it to automatically started when the system boots or be configured when a user logs in. Both of these approaches are considered as two hosting options because they are self-hosted applications; it means that both are running inside a .NET process.</p>
<h2>Installing Topshelf</h2>
<p>Topshelf is an open source .NET Windows Service library, it makes the process of creating Windows services much easier for us so that we can only focus on the service functionality as opposed to setting up the boilerplate service code. To install TopShelf all we need to do is installing its NuGet package:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Install-Package Topshelf</code></pre></div>
<p>The next step is wrapping your service functionality inside a class with two methods <code class="language-text">Start</code> and <code class="language-text">Stop</code> these methods are going to be used by TopShelf to start and stop the service:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyService</span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">ServiceHost</span> usersHost<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">bool</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>

        <span class="token keyword">try</span>
        <span class="token punctuation">{</span>
            usersHost <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServiceHost</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span>UsersService<span class="token punctuation">.</span>UsersService<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            usersHost<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Service Running..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Press a key to quit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>

            <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">finally</span>
        <span class="token punctuation">{</span>
            usersHost<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">bool</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        usersHost<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The next step is adding this class to TopShelf for creating our Windows Service:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Program</span>
<span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        HostFactory<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span>serviceConfig <span class="token operator">=></span>
        <span class="token punctuation">{</span>
            serviceConfig<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Service</span><span class="token punctuation">&lt;</span><span class="token class-name">MyService</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>serviceInstance <span class="token operator">=></span>
            <span class="token punctuation">{</span>
                serviceInstance<span class="token punctuation">.</span><span class="token function">ConstructUsing</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">MyService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                serviceInstance<span class="token punctuation">.</span><span class="token function">WhenStarted</span><span class="token punctuation">(</span>execute <span class="token operator">=></span> execute<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                serviceInstance<span class="token punctuation">.</span><span class="token function">WhenStopped</span><span class="token punctuation">(</span>execute <span class="token operator">=></span> execute<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            serviceConfig<span class="token punctuation">.</span><span class="token function">SetServiceName</span><span class="token punctuation">(</span><span class="token string">"My Service"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            serviceConfig<span class="token punctuation">.</span><span class="token function">SetDisplayName</span><span class="token punctuation">(</span><span class="token string">"My Service"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            serviceConfig<span class="token punctuation">.</span><span class="token function">SetDescription</span><span class="token punctuation">(</span><span class="token string">"Hosting WCF services"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            serviceConfig<span class="token punctuation">.</span><span class="token function">StartAutomatically</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Installing our service into Windows</h2>
<ul>
<li>Run Command Prompt as Admin</li>
<li>cd into to bin\Debug folder</li>
<li>{AssebmlyName}.exe install</li>
</ul>
<h2>Adding NLog</h2>
<p>We can add logging functionality to the mix using NLog, for doing so we first need to add the following package:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Install-Package Topshelf.NLog</code></pre></div>
<p>The next step is to add the following configuration to <code class="language-text">app.config</code> file:</p>
<div class="gatsby-highlight" data-language="xml"><pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configSections</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nlog<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>NLog.Config.ConfigSectionHandler, NLog<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configSections</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nlog</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>targets</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>consoleTarget<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Console<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>targets</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rules</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>*<span class="token punctuation">"</span></span> <span class="token attr-name">minlevel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Debug<span class="token punctuation">"</span></span> <span class="token attr-name">writeTo</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>consoleTarget<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rules</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nlog</span><span class="token punctuation">></span></span></code></pre></div>
<p>Then we need to register NLog service in the <code class="language-text">Program.cs</code> file:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Program</span>
<span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        HostFactory<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span>serviceConfig <span class="token operator">=></span>
        <span class="token punctuation">{</span>
            serviceConfig<span class="token punctuation">.</span><span class="token function">UseNLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// as before</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Now we can use the logger in our service:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyService</span>
<span class="token punctuation">{</span>
    <span class="token comment">// our service declarations</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">LogWriter</span> _log <span class="token operator">=</span> HostLogger<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token punctuation">&lt;</span><span class="token class-name">MyService</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token keyword">public</span> <span class="token keyword">bool</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">try</span>
            <span class="token punctuation">{</span>
               _log<span class="token punctuation">.</span><span class="token function">Info</span><span class="token punctuation">(</span><span class="token string">"Starting services"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div></div><div id="disqus_thread"></div></div><footer id="footer" class="inner"><div class="container"><div class="row"><div class="col-md-12"><p>Copyright © 2019 - <!-- -->Sirwan Afifi<!-- --> | Powered by Gatsby |  Site design based on the <a href="http://hyde.getpoole.com/">Hyde theme</a></p></div></div></div></footer></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/archive/2019/03/07/Hosting-WCF-Service/";window.webpackCompilationHash="4eab46151b0985394974";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-dec95bf3df4a1ab71968.js"],"component---src-templates-blog-list-template-js":["/component---src-templates-blog-list-template-js-f93163079e42973226b4.js"],"component---src-templates-post-js":["/component---src-templates-post-js-d9efa3ef25aadd88f03b.js"],"component---src-pages-about-js":["/component---src-pages-about-js-d0f1ebc30aa3f61605ae.js"],"component---src-pages-archive-js":["/component---src-pages-archive-js-69c1fe2b4732dd9300e3.js"],"component---src-pages-index-js":["/component---src-pages-index-js-4fc4e080c494470a495a.js"]};/*]]>*/</script><script src="/webpack-runtime-c9afbc68a85eb8f29059.js" async=""></script><script src="/styles-debc7e6665f8b758e787.js" async=""></script><script src="/app-dec95bf3df4a1ab71968.js" async=""></script><script src="/1-819ee68fb5c8bae174f7.js" async=""></script><script src="/component---src-templates-post-js-d9efa3ef25aadd88f03b.js" async=""></script></body></html>