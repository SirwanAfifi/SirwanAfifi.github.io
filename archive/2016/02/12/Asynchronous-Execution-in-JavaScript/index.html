<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.279e054ce5eb85f99e2f.css">#disqus_thread{width:95%;margin:auto}@keyframes typing{0%{width:0}to{width:100%}}@keyframes blinking-cursor{0%,to{border-color:transparent}50%{border-color:rgba(48,91,170,.5)}}@keyframes moveInLeft{0%{opacity:0;transform:translateX(-10rem)}to{opacity:1;transform:translate(0)}}@keyframes moveInBottom{0%{opacity:0;transform:translateY(10rem)}to{opacity:1;transform:translate(0)}}*,:after,:before{margin:0;padding:0;box-sizing:inherit}html{font-size:62.5%}body{font-family:Cairo,sans-serif;font-weight:400;line-height:1.7rem;color:#777;-webkit-clip-path:polygon(0 0,100% 0,100% 75vh,0 100);clip-path:polygon(0 0,100% 0,100% 75vh,0 100);box-sizing:border-box}.row{max-width:114rem;background-color:#eee;margin:0 auto}.row:not(:last-child){margin-bottom:8rem}.row:after{content:"";display:table;clear:both}.row [class^=col-]{background-color:#ff4500;float:left}.row [class^=col-]:not(:last-child){margin-right:8rem}.row .col-1-of-2{width:calc((100% - 8rem)/2)}.row .col-1-of-3{width:calc((100% - 16rem)/3)}.row .col-2-of-3{width:calc(2*(100% - 16rem)/3 + 8rem)}.row .col-1-of-4{width:calc((100% - 24rem)/4)}.row .col-2-of-4{width:calc(2*(100% - 24rem)/4 + 8rem)}.row .col-3-of-4{width:calc(3*(100% - 24rem)/4 + 16rem)}.header{position:relative;height:100vh;background-image:linear-gradient(to right top,rgba(0,123,223,.8) 0,rgba(0,236,189,.8)),url(/img/bg.jpg);background-size:cover;background-position:top}.text-box{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);text-align:center}.logo{animation-name:moveInBottom;animation-duration:3.5s}.heading-primary{color:#fff;text-transform:uppercase}.heading-primary-main{display:block;overflow:hidden;border-right:.1em solid rgba(48,91,171,.1);white-space:nowrap;font-size:6rem;font-weight:400;letter-spacing:3.5rem;animation:typing 3.5s steps(40),blinking-cursor .5s step-end infinite}.heading-primary-sub{display:block;font-size:2rem;font-weight:400;letter-spacing:1.74rem;animation-name:moveInLeft;animation-duration:3.5s}.socials,.socials a{color:#e6e6e6;margin:1rem}code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}*{box-sizing:border-box}body,html{margin:0;padding:0}body{font-family:Open Sans,Helvetica,Arial,sans-serif;font-size:16px;line-height:1.5;color:#454441;background-color:#fff}@media (min-width:990px){body{font-size:18px}}h1,h2,h3,h4,h5,h6{margin:0 0 10px;font-weight:600;line-height:1.25;text-rendering:optimizeLegibility}h1{font-size:40px}h2{margin-top:20px;font-size:32px}h3{margin-top:24px;font-size:24px}h4,h5,h6{margin-top:16px;font-size:16px}p{margin:0 0 15px}ol,ul{margin-bottom:15px}hr{position:relative;margin:40px 0;border:0;border-top:1px solid #eee;border-bottom:1px solid #fff}strong{color:#222}abbr{background-color:#eee;display:inline-block;padding:3px;font-size:13px;font-weight:700;color:#555;text-shadow:0 1px 1px hsla(0,0%,100%,.5);text-transform:uppercase;border-radius:3px}code,pre{font-family:Menlo,Monaco,Courier New,monospace}code{padding:.25em .5em;font-size:85%;color:#bf616a;border-radius:3px}pre{display:block;margin:0 0 14px;padding:15px 20px;font-size:16px;line-height:1.4;white-space:pre;white-space:pre-wrap;word-break:break-all;word-wrap:break-word}pre code{padding:0;font-size:100%;color:inherit;background-color:transparent}.highlight{margin-bottom:15px;border-radius:4px;margin-left:0;margin-right:0}.highlight pre{margin-bottom:0}blockquote{padding:5px 30px 5px 25px;margin:15px 0;border-left:5px solid #eee}blockquote p{margin-bottom:0;color:#7a7a7a;text-indent:-.4em}blockquote p:before{content:"\201C"}blockquote p:after{content:"\201D"}img{display:block;margin:0 0 15px;border-radius:5px}.lead{font-size:20px;font-weight:300}@media (min-width:990px){.lead{font-size:24px}}a{font-weight:600;color:#222;text-decoration:none}a:focus,a:hover{text-decoration:underline}.masthead{color:#fff;background-color:#2a2a2a}.masthead-inner{padding:20px}.masthead h1{margin-top:0;font-family:Abril Fatface}.masthead .lead{margin-bottom:0}.masthead a{color:#fff}.colophon{margin-top:20px;color:hsla(0,0%,100%,.5)}.colophon-links{padding-left:0;list-style:none}.colophon-links li{color:inherit}@media (min-width:768px){.masthead-inner{padding:40px}}@media (min-width:990px){.masthead{position:fixed;top:0;left:0;bottom:0;width:25%;margin-bottom:0}.masthead-inner{position:absolute;right:0;left:0}.masthead h1{font-size:64px}.colophon{margin-top:40px}}.content{padding:40px 20px}@media (min-width:990px){.content{padding:60px 0}.container{margin-left:30%;margin-right:10%}}.post{margin-bottom:40px}@media (min-width:990px){.post{margin-bottom:60px}}.post-date{display:block;margin:-10px 0 10px;color:#9a9a9a}.related{padding-top:20px;padding-bottom:40px;border-top:1px solid #eee}.related-posts{padding-left:0;list-style:none}.related-posts h3{margin-top:0}.related-posts li small{font-size:75%;color:#999}.related-posts li a:hover{color:#000;text-decoration:none}.related-posts li a:hover small{color:inherit}.pagination{overflow:hidden;margin-top:40px;font-weight:700;color:#ccc;text-align:center;border-top:1px solid #eee}@media (min-width:990px){.pagination{margin-bottom:60px;border:1px solid #eee}}.pagination a,.pagination span{float:left;width:50%;padding:20px}.pagination a:first-child,.pagination span:first-child{border-right:1px solid #eee}.pagination a:hover{text-decoration:none;background-color:#f5f5f5}@media (min-width:990px){.layout-reverse .masthead{left:auto;right:0}.layout-reverse .container{margin-left:10%;margin-right:35%}}.theme-base-08 .masthead{background-color:#ac4142}.theme-base-08 .container a,.theme-base-08 .related-posts li a:hover{color:#ac4142}.theme-base-09 .masthead{background-color:#d28445}.theme-base-09 .container a,.theme-base-09 .related-posts li a:hover{color:#d28445}.theme-base-0a .masthead{background-color:#f4bf75}.theme-base-0a .container a,.theme-base-0a .related-posts li a:hover{color:#f4bf75}.theme-base-0b .masthead{background-color:#90a959}.theme-base-0b .container a,.theme-base-0b .related-posts li a:hover{color:#90a959}.theme-base-0c .masthead{background-color:#75b5aa}.theme-base-0c .container a,.theme-base-0c .related-posts li a:hover{color:#75b5aa}.theme-base-0d .masthead{background-image:linear-gradient(0deg,#03a9f4,rgba(18,78,212,.75))}.theme-base-0d .container a,.theme-base-0d .related-posts li a:hover{color:#6a9fb5}.theme-base-0d .container a:hover{background:linear-gradient(0deg,#03a9f4,rgba(18,78,212,.75));-webkit-background-clip:text;-webkit-text-fill-color:transparent}.theme-base-0e .masthead{background-color:#aa759f}.theme-base-0e .container a,.theme-base-0e .related-posts li a:hover{color:#aa759f}.theme-base-0f .masthead{background-color:#8f5536}.theme-base-0f .container a,.theme-base-0f .related-posts li a:hover{color:#8f5536}.profilepic img{border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%;margin:0 auto;border:3px solid #fff}.home h1 a:hover{text-decoration:none}.home .title{font-family:Open Sans;font-weight:800;padding-bottom:15px}.home article .post-meta{margin-bottom:15px}.center-image{margin:0 auto}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.highlight .hll{background-color:#49483e}.highlight{background:#272822;color:#f8f8f2}.highlight .c{color:#75715e}.highlight .err{color:#960050;background-color:#1e0010}.highlight .k{color:#66d9ef}.highlight .l{color:#ae81ff}.highlight .n{color:#f8f8f2}.highlight .o{color:#f92672}.highlight .p{color:#f8f8f2}.highlight .c1,.highlight .ch,.highlight .cm,.highlight .cp,.highlight .cpf,.highlight .cs{color:#75715e}.highlight .gd{color:#f92672}.highlight .ge{font-style:italic}.highlight .gi{color:#a6e22e}.highlight .gs{font-weight:700}.highlight .gu{color:#75715e}.highlight .kc,.highlight .kd{color:#66d9ef}.highlight .kn{color:#f92672}.highlight .kp,.highlight .kr,.highlight .kt{color:#66d9ef}.highlight .ld{color:#e6db74}.highlight .m{color:#ae81ff}.highlight .s{color:#e6db74}.highlight .na{color:#a6e22e}.highlight .nb{color:#f8f8f2}.highlight .nc{color:#a6e22e}.highlight .no{color:#66d9ef}.highlight .nd{color:#a6e22e}.highlight .ni{color:#f8f8f2}.highlight .ne,.highlight .nf{color:#a6e22e}.highlight .nl,.highlight .nn{color:#f8f8f2}.highlight .nx{color:#a6e22e}.highlight .py{color:#f8f8f2}.highlight .nt{color:#f92672}.highlight .nv{color:#f8f8f2}.highlight .ow{color:#f92672}.highlight .w{color:#f8f8f2}.highlight .mb,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:#ae81ff}.highlight .dl,.highlight .s2,.highlight .sa,.highlight .sb,.highlight .sc,.highlight .sd{color:#e6db74}.highlight .se{color:#ae81ff}.highlight .s1,.highlight .sh,.highlight .si,.highlight .sr,.highlight .ss,.highlight .sx{color:#e6db74}.highlight .bp{color:#f8f8f2}.highlight .fm{color:#a6e22e}.highlight .vc,.highlight .vg,.highlight .vi,.highlight .vm{color:#f8f8f2}.highlight .il{color:#ae81ff}</style><meta name="generator" content="Gatsby 2.13.18"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link as="script" rel="preload" href="/component---src-templates-post-js-53d13b38bd2756ac553c.js"/><link as="script" rel="preload" href="/1-153260d093dffb686a3e.js"/><link as="script" rel="preload" href="/app-ba946795c19e2131e2d6.js"/><link as="script" rel="preload" href="/styles-e50fa81bbbacb62aa43b.js"/><link as="script" rel="preload" href="/webpack-runtime-e43033462ba12fe796a2.js"/><link as="fetch" rel="preload" href="/page-data/archive/2016/02/12/Asynchronous-Execution-in-JavaScript/page-data.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div><header class="masthead"><div class="masthead-inner"><div class="profilepic"><a href="/"><img src="/avatar.png" alt="Profile Picture"/></a></div><h2>Sirwan Afifi</h2><p class="lead">Stories from a web developer.</p><div class="colophon"><ul class="colophon-links"><li><a href="/about">about</a></li><li><a href="/archive">archives</a></li><li><a href="/#">contact</a></li></ul><p>© 2019. <!-- -->Sirwan Afifi<!-- --> All rights reserved.</p></div></div></header><div class="content container"><div class="post"><h1>Asynchronous Execution in JavaScript</h1><span class="post-date">February 12th, 2016<!-- --> | <span class="disqus-comment-count" data-disqus-identifier="Asynchronous-Execution-in-JavaScript/" data-disqus-url="https://sirwan.info/archive/2016/02/12/Asynchronous-Execution-in-JavaScript/">...</span></span><div><p>As you know browsers are typically single threaded, It means that the browser can only be doing either update the UI or executing JavaScript at any given time. It actually incapable of doing theme simultaneously.</p>
<p>As I mentioned when JavaScript is executing code, the UI is unable to respond to the user. So, our goal as a developer is to build a highly responsive UI. For doing that you could create smaller unit of work and use JavaScript timers to return execution to the next event in the queue:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">buffer</span><span class="token punctuation">(</span><span class="token parameter">items<span class="token punctuation">,</span> iterFn<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    len <span class="token operator">=</span> items<span class="token punctuation">.</span>length
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> result

    <span class="token keyword">for</span> <span class="token punctuation">(</span>
      <span class="token keyword">var</span> start <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      i <span class="token operator">&lt;</span> len <span class="token operator">&amp;&amp;</span> result <span class="token operator">!==</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start <span class="token operator">&lt;</span> <span class="token number">50</span><span class="token punctuation">;</span>
      i<span class="token operator">++</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result <span class="token operator">=</span> <span class="token function">iterFn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> len <span class="token operator">&amp;&amp;</span> result <span class="token operator">!==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>callee<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">callback</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Assume that we want to pull down some data from the server, Then the data is going to be processed through an array loop, And we are going to build some DOM elements:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">@<span class="token punctuation">{</span>
    ViewBag<span class="token punctuation">.</span>Title <span class="token operator">=</span> <span class="token string">"Home Page"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span>ul<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
@section scripts
<span class="token punctuation">{</span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'@Url.Action("Date")'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> html <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>

                <span class="token function">buffer</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    html <span class="token operator">+=</span> <span class="token string">'&lt;li>'</span> <span class="token operator">+</span> item <span class="token operator">+</span> <span class="token string">'&lt;/li>'</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token punctuation">}</span></code></pre></div>
<p>Also the action method is like this:</p>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token class-name">JsonResult</span> <span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> Enumerable<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">50000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token function">Json</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> JsonRequestBehavior<span class="token punctuation">.</span>AllowGet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The <code class="language-text">buffer</code> method works like a charm but using <code class="language-text">setTimeout</code> is considered to be a bad practice. So that's where the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers">Web Workers</a> come into play.</p>
<h3>Web Workers</h3>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers">MDN</a>:</p>
<blockquote>
<p>Web Workers provide a simple means for web content to run scripts in background threads. The worker thread can perform tasks without interfering with the user interface. In addition, they can perform I/O using XMLHttpRequest (although the responseXML and channel attributes are always null). Once created, a worker can send messages to the JavaScript code that created it by posting messages to an event handler specified by that code (and vice versa.) This article provides a detailed introduction to using web workers.</p>
</blockquote>
<p>Well, Web Wrokers bring background threading to browsers. It is a best option if you have intense processing that needs to happen in your browser. Since Workers run in another global context so there's a few restrictions that you have to keep in mind, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Functions_and_classes_available_to_workers">Here</a> you can see the list of functions and classes available to Web Workers. So your favorite JavaScript library may not work with workers.</p>
<p>So let's rewrite our example with Web Workers:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>ul id<span class="token operator">=</span><span class="token string">"result"</span><span class="token operator">></span>Hello<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
@section scripts
<span class="token punctuation">{</span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> _worker<span class="token punctuation">;</span>

            _worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">'@Url.Content("~/Scripts/getData.js")'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            _worker<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> messageHander<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            _worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">"fetch"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">function</span> <span class="token function">messageHander</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#result"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token punctuation">}</span></code></pre></div>
<p>As you can see I instantiated a worker, Then I setup an event listener for message, So when data comes in from the AJAX call, we will inject the result into html of a container called <code class="language-text">result</code>.<br>
Here you see the worker:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">messageHandler</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>data <span class="token operator">===</span> <span class="token string">"fetch"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> xmlhttp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  xmlhttp<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlhttp<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xmlhttp<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> html <span class="token operator">=</span> <span class="token string">""</span>
      <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xmlhttp<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> res<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        html <span class="token operator">+=</span> <span class="token string">"&lt;li>"</span> <span class="token operator">+</span> res<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"&lt;/li>"</span>
      <span class="token punctuation">}</span>
      <span class="token function">postMessage</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  xmlhttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span> <span class="token string">"/Home/Date"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  xmlhttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> messageHandler<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></code></pre></div>
<p>Inside the fetch content we used typical AJAX call because in Web Workers you can not use a third-party library it means that there's no access to non-thread safe components, So you have to use a native <code class="language-text">XMLHttpRequest</code> in your worker. Now if you run the code you will see that now that's pretty fast even quite a bit faster than before.</p>
<p>You can see the sample code <a href="https://github.com/SirwanAfifi/asynchronous-execution-in-js">in the GitHub repository</a></p></div></div><div id="disqus_thread"></div></div><footer id="footer" class="inner"><div class="container"><div><div class="col-md-12"><p>Copyright © 2019 - <!-- -->Sirwan Afifi<!-- --> | Powered by Gatsby |  Site design based on the <a href="http://hyde.getpoole.com/">Hyde theme</a></p></div></div></div></footer></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/archive/2016/02/12/Asynchronous-Execution-in-JavaScript/";window.webpackCompilationHash="448e2541165e16347b2f";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-ba946795c19e2131e2d6.js"],"component---src-templates-blog-list-template-js":["/component---src-templates-blog-list-template-js-c26f704bab023be34180.js"],"component---src-templates-post-js":["/component---src-templates-post-js-53d13b38bd2756ac553c.js"],"component---src-pages-about-js":["/component---src-pages-about-js-7eb08e9897a0f32f34bd.js"],"component---src-pages-archive-js":["/component---src-pages-archive-js-70d39327a92b6408cb7f.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-81fa11d32a66e82d2d93.js"],"component---src-pages-index-js":["/component---src-pages-index-js-4a7d028e6bcbb732c1b5.js"]};/*]]>*/</script><script src="/webpack-runtime-e43033462ba12fe796a2.js" async=""></script><script src="/styles-e50fa81bbbacb62aa43b.js" async=""></script><script src="/app-ba946795c19e2131e2d6.js" async=""></script><script src="/1-153260d093dffb686a3e.js" async=""></script><script src="/component---src-templates-post-js-53d13b38bd2756ac553c.js" async=""></script></body></html>