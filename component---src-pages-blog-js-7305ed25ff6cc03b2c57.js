(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{184:function(n,s,a){"use strict";a.r(s);a(120),a(15);var t=a(206),p=a(0),o=a.n(p),e=a(193),c=a(188),l=a(190),u=a.n(l);s.default=function(){var n=t.data;return o.a.createElement(e.a,null,o.a.createElement("div",{className:"posts"},n.allMarkdownRemark.edges.map(function(n,s){var a=n.node.fields.slug.match(/\d{4}\-(0?[1-9]|1[012])\-(0?[1-9]|[12][0-9]|3[01])-/gm).join().replace(/\-/g,"/").slice(0,-1);return o.a.createElement("div",{className:"post",key:s},o.a.createElement("h1",{className:"post-title"},o.a.createElement(c.a,{to:"archive/"+a+"/"+n.node.frontmatter.slug},n.node.frontmatter.title)),o.a.createElement("span",{className:"post-date"},n.node.frontmatter.date),n.node.excerpt)})),o.a.createElement(u.a,null,o.a.createElement("title",null,"Home | Sirwan Afifi")),o.a.createElement("div",{className:"pagination"},o.a.createElement(c.a,{to:"/page/2"}),o.a.createElement(c.a,{to:"/page/2"},"More")))}},187:function(n,s,a){var t;n.exports=(t=a(189))&&t.default||t},188:function(n,s,a){"use strict";var t=a(0),p=a.n(t),o=a(11),e=a.n(o),c=a(59),l=a.n(c);a.d(s,"a",function(){return l.a});a(187),p.a.createContext({});e.a.object,e.a.string.isRequired,e.a.func,e.a.func},189:function(n,s,a){"use strict";a.r(s);a(24);var t=a(0),p=a.n(t),o=a(11),e=a.n(o),c=a(84),l=function(n){var s=n.location,a=n.pageResources;return a?p.a.createElement(c.a,Object.assign({location:s,pageResources:a},a.json)):null};l.propTypes={location:e.a.shape({pathname:e.a.string.isRequired}).isRequired},s.default=l},191:function(n){n.exports={data:{site:{siteMetadata:{author:"Sirwan Afifi",description:"Stories from a web developer.",email:"sir1afifi@gmail.com",title:"Sirwan Afifi",twitter_username:"SirwanAfifi",url:"http://sirwan.info"}}}}},192:function(n){n.exports={data:{site:{siteMetadata:{author:"Sirwan Afifi"}}}}},193:function(n,s,a){"use strict";var t=a(0),p=a.n(t),o=a(190),e=a.n(o),c=(a(176),a(177),a(178),a(191)),l=a(188),u=function(){var n=c.data;return p.a.createElement("header",{className:"masthead"},p.a.createElement("div",{className:"masthead-inner"},p.a.createElement("div",{className:"profilepic"},p.a.createElement(l.a,{to:"/blog"},p.a.createElement("img",{src:"/avatar.png",alt:"Profile Picture"}))),p.a.createElement("h2",null,n.site.siteMetadata.author),p.a.createElement("p",{className:"lead"},n.site.siteMetadata.description),p.a.createElement("div",{className:"colophon"},p.a.createElement("ul",{className:"colophon-links"},p.a.createElement("li",null,p.a.createElement(l.a,{to:"/about"},"about")),p.a.createElement("li",null,p.a.createElement(l.a,{to:"/archive"},"archives")),p.a.createElement("li",null,p.a.createElement(l.a,{to:"#"},"contact"))),p.a.createElement("p",null,"© ",(new Date).getFullYear(),". ",n.site.siteMetadata.author," All rights reserved."))))},i=a(192),k=function(){var n=i.data;return p.a.createElement("footer",{id:"footer",className:"inner"},p.a.createElement("div",{className:"container"},p.a.createElement("div",null,p.a.createElement("div",{className:"col-md-12"},p.a.createElement("p",null,"Copyright © ",(new Date).getFullYear()," -"," ",n.site.siteMetadata.author," | Powered by Gatsby | Site design based on the ",p.a.createElement("a",{href:"http://hyde.getpoole.com/"},"Hyde theme"))))))};s.a=function(n){return p.a.createElement("div",null,p.a.createElement(u,null),p.a.createElement("div",{className:"content container"},n.children),p.a.createElement(k,null),p.a.createElement(e.a,null,p.a.createElement("body",{className:"theme-base-0d"})))}},206:function(n){n.exports={data:{allMarkdownRemark:{edges:[{node:{frontmatter:{title:"MySQL - Transforming JSON data into relational tables",date:"October 24th, 2020",slug:"Transforming-JSON-data-into-relational-tables/"},html:'<p>Given that you have a table called <code class="language-text">Products</code> in your database, one of its columns is of type <code class="language-text">JSON</code> which has product\'s metadata:</p>\n<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">[</span>\n  <span class="token punctuation">{</span>\n    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span>\n    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Lorem ipsum jacket"</span><span class="token punctuation">,</span>\n    <span class="token property">"price"</span><span class="token operator">:</span> <span class="token number">12.45</span><span class="token punctuation">,</span>\n    <span class="token property">"discount"</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>\n    <span class="token property">"offerEnd"</span><span class="token operator">:</span> <span class="token string">"October 5, 2020 12:11:00"</span><span class="token punctuation">,</span>\n    <span class="token property">"rating"</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>\n    <span class="token property">"saleCount"</span><span class="token operator">:</span> <span class="token number">54</span><span class="token punctuation">,</span>\n    <span class="token property">"tag"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"fashion"</span><span class="token punctuation">,</span> <span class="token string">"men"</span><span class="token punctuation">,</span> <span class="token string">"jacket"</span><span class="token punctuation">,</span> <span class="token string">"full sleeve"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token property">"variation"</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        <span class="token property">"color"</span><span class="token operator">:</span> <span class="token string">"white"</span><span class="token punctuation">,</span>\n        <span class="token property">"image"</span><span class="token operator">:</span> <span class="token string">"/assets/img/product/fashion/1.jpg"</span><span class="token punctuation">,</span>\n        <span class="token property">"size"</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n          <span class="token punctuation">{</span>\n            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"x"</span><span class="token punctuation">,</span>\n            <span class="token property">"stock"</span><span class="token operator">:</span> <span class="token number">3</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">{</span>\n            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"m"</span><span class="token punctuation">,</span>\n            <span class="token property">"stock"</span><span class="token operator">:</span> <span class="token number">2</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">{</span>\n            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"xl"</span><span class="token punctuation">,</span>\n            <span class="token property">"stock"</span><span class="token operator">:</span> <span class="token number">5</span>\n          <span class="token punctuation">}</span>\n        <span class="token punctuation">]</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        <span class="token property">"color"</span><span class="token operator">:</span> <span class="token string">"black"</span><span class="token punctuation">,</span>\n        <span class="token property">"image"</span><span class="token operator">:</span> <span class="token string">"/assets/img/product/fashion/8.jpg"</span><span class="token punctuation">,</span>\n        <span class="token property">"size"</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n          <span class="token punctuation">{</span>\n            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"x"</span><span class="token punctuation">,</span>\n            <span class="token property">"stock"</span><span class="token operator">:</span> <span class="token number">4</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">{</span>\n            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"m"</span><span class="token punctuation">,</span>\n            <span class="token property">"stock"</span><span class="token operator">:</span> <span class="token number">7</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">{</span>\n            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"xl"</span><span class="token punctuation">,</span>\n            <span class="token property">"stock"</span><span class="token operator">:</span> <span class="token number">9</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">{</span>\n            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"xxl"</span><span class="token punctuation">,</span>\n            <span class="token property">"stock"</span><span class="token operator">:</span> <span class="token number">1</span>\n          <span class="token punctuation">}</span>\n        <span class="token punctuation">]</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token property">"image"</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token string">"/assets/img/product/fashion/1.jpg"</span><span class="token punctuation">,</span>\n      <span class="token string">"/assets/img/product/fashion/3.jpg"</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token property">"shortDescription"</span><span class="token operator">:</span> <span class="token string">"Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur."</span><span class="token punctuation">,</span>\n    <span class="token property">"fullDescription"</span><span class="token operator">:</span> <span class="token string">"Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur? Nor again is there anyone who loves or pursues or desires to obtain pain of itself, because it is pain, but because occasionally circumstances occur in which toil and pain can procure him some great pleasure. To take a trivial example, which of us ever undertakes laborious physical exercise, except to obtain some advantage from it? But who has any right to find fault with a man who chooses to enjoy a pleasure that has no annoying consequences, or one who avoids a pain that produces no resultant pleasure?"</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre></div>\n<p>MySQL provides some built-in functions to work with JSON data. One of which is <code class="language-text">JSON_TABLE</code> which maps JSON data into a temporary relational table:</p>\n<div class="gatsby-highlight" data-language="sql"><pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>\n      ANY_VALUE<span class="token punctuation">(</span>jData<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token keyword">AS</span> id<span class="token punctuation">,</span>\n\t    jData<span class="token punctuation">.</span>name<span class="token punctuation">,</span>\n\t    GROUP_CONCAT<span class="token punctuation">(</span>IFNULL<span class="token punctuation">(</span>color<span class="token punctuation">,</span> <span class="token string">"---"</span><span class="token punctuation">)</span> SEPARATOR <span class="token string">"-"</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> colors<span class="token punctuation">,</span>\n\t    <span class="token function">COUNT</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span> <span class="token keyword">AS</span> numberOfColors<span class="token punctuation">,</span>\n      ANY_VALUE<span class="token punctuation">(</span>jData<span class="token punctuation">.</span>price<span class="token punctuation">)</span> <span class="token keyword">AS</span> price<span class="token punctuation">,</span>\n      ANY_VALUE<span class="token punctuation">(</span>IFNULL<span class="token punctuation">(</span>STR_TO_DATE<span class="token punctuation">(</span>jData<span class="token punctuation">.</span>offerEnd<span class="token punctuation">,</span> <span class="token string">"%M %d, %Y %H:%i:%s"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"---"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> offerEnd<span class="token punctuation">,</span>\n      ANY_VALUE<span class="token punctuation">(</span>jData<span class="token punctuation">.</span>rating<span class="token punctuation">)</span> <span class="token keyword">AS</span> rating<span class="token punctuation">,</span>\n      ANY_VALUE<span class="token punctuation">(</span>jData<span class="token punctuation">.</span>saleCount<span class="token punctuation">)</span> <span class="token keyword">AS</span> saleCount\n<span class="token keyword">FROM</span> Products<span class="token punctuation">,</span>\n\tJSON_TABLE<span class="token punctuation">(</span>\n\t\t<span class="token keyword">data</span><span class="token punctuation">,</span>\n\t\t<span class="token string">"$[*]"</span>\n\t\t<span class="token keyword">COLUMNS</span> <span class="token punctuation">(</span>\n\t\t\tid <span class="token keyword">INT</span> PATH <span class="token string">"$.id"</span><span class="token punctuation">,</span>\n\t\t\tname NVARCHAR<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> PATH <span class="token string">"$.name"</span><span class="token punctuation">,</span>\n            price <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> PATH <span class="token string">"$.price"</span><span class="token punctuation">,</span>\n            tags <span class="token keyword">TEXT</span> PATH <span class="token string">"$.tag[*]"</span><span class="token punctuation">,</span>\n            NESTED PATH <span class="token string">"$.variation[*]"</span> <span class="token keyword">COLUMNS</span> <span class="token punctuation">(</span>\n\t\t\t\tcolor <span class="token keyword">TEXT</span> PATH <span class="token string">"$.color"</span>\n            <span class="token punctuation">)</span><span class="token punctuation">,</span>\n            rating <span class="token keyword">INT</span> PATH <span class="token string">"$.rating"</span><span class="token punctuation">,</span>\n            discount <span class="token keyword">FLOAT</span> PATH <span class="token string">"$.discount"</span><span class="token punctuation">,</span>\n            offerEnd <span class="token keyword">TEXT</span> PATH <span class="token string">"$.offerEnd"</span><span class="token punctuation">,</span>\n\t\t\tsaleCount <span class="token keyword">INT</span> PATH <span class="token string">"$.saleCount"</span>\n\t\t<span class="token punctuation">)</span>\n\t<span class="token punctuation">)</span> <span class="token keyword">AS</span> jData\n<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> jData<span class="token punctuation">.</span>name\n<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> id</code></pre></div>\n<p>Which returns the following result:</p>\n<img class="img-res" src="/img/json_table.png" alt="json_table" />\n<h3></h3>\n<p>You can find more info on MySQL documentation:\n<a href="https://dev.mysql.com/doc/refman/8.0/en/json.html">https://dev.mysql.com/doc/refman/8.0/en/json.html</a></p>',excerpt:"Given that you have a table called  in your database, one of its columns is of type  which has product's metadata: MySQL provides some built…",fields:{slug:"2020-10-12-transforming-JSON-data-into-relational-table"}}},{node:{frontmatter:{title:"Getting Started With Sequelize",date:"October 12th, 2020",slug:"getting-started-with-sequelize/"},html:'<p>Sequelize is an Object Relational Mapper (ORM) which enables us to query and manipulate data stored in a relational database. There are several ORM for Node.js out there. Sequelize is one of them and it\'s pretty popular. In this short tutorial we will have a quick look at Sequelize then we will write a simple Node.js application to connect to a MySQL database.</p>\n<h2>Setting up the project</h2>\n<p>To start off, head over to command line and type the following commands to initialise the project:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">take sequelize_todo\nyarn init <span class="token operator">-</span>y\nyarn add sequelize mysql2 dotenv ts<span class="token operator">-</span>node typescript <span class="token operator">-</span><span class="token constant">D</span></code></pre></div>\n<p>Next, create a file called <code class="language-text">dbConnection.ts</code> in the root of the project:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> Sequelize <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"sequelize"</span>\n\n<span class="token keyword">const</span> sequelize <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sequelize</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  dialect<span class="token punctuation">:</span> <span class="token string">"mysql"</span><span class="token punctuation">,</span>\n  username<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DATABASE_USERNAME</span><span class="token punctuation">,</span>\n  password<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DATABASE_PASSWORD</span><span class="token punctuation">,</span>\n  database<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DATABASE_NAME</span><span class="token punctuation">,</span>\n  port<span class="token punctuation">:</span> <span class="token operator">+</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DATABASE_PORT</span> <span class="token operator">||</span> <span class="token number">3306</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n<span class="token keyword">export</span> <span class="token keyword">const</span> database <span class="token operator">=</span> <span class="token punctuation">{</span>\n  sequelize<span class="token punctuation">,</span>\n<span class="token punctuation">}</span></code></pre></div>\n<p>As you can see we have constructed an object using <code class="language-text">Sequelize</code> constructor. This class needs some options which are required to connect to our MySQL database (that\'s why we have set <code class="language-text">dialect</code> to "mysql". You can changes that to connect to other relational databases like SQL server, ...). Then we exported the newly created object.</p>\n<p>Next, create an <code class="language-text">index.ts</code> file in the root of the project:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> dotenv <span class="token keyword">from</span> <span class="token string">"dotenv"</span>\ndotenv<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> database <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./dbConnection"</span>\n\n<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">await</span> database<span class="token punctuation">.</span>sequelize<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>\n<p>The first couple of lines are used to load <code class="language-text">.env</code> file into <code class="language-text">process.env</code>. This means that we will need to create another file in the root of the project to define our secret values:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token constant">DATABASE_HOST</span> <span class="token operator">=</span> localhost\n<span class="token constant">DATABASE_USERNAME</span> <span class="token operator">=</span> root\n<span class="token constant">DATABASE_PASSWORD</span> <span class="token operator">=</span> <span class="token constant">PASSWORD</span>\n<span class="token constant">DATABASE_NAME</span> <span class="token operator">=</span> <span class="token constant">DBNAME</span>\n<span class="token constant">DATABASE_PORT</span> <span class="token operator">=</span> <span class="token number">3306</span></code></pre></div>\n<p><strong>NOTE</strong>: Make sure you gitignore the <code class="language-text">.env</code> file before pushing the code into remote repository.</p>\n<h2>Creating your first entity</h2>\n<p>Now we need to define our entity which is an abstraction that represents a table in your database. An entity is just a class that extends <code class="language-text">Model</code>. So let\'s create a directory called <code class="language-text">models</code> then create a file called <code class="language-text">User.ts</code> inside that directory:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> Sequelize <span class="token keyword">from</span> <span class="token string">"sequelize"</span>\n\n<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Sequelize<span class="token punctuation">.</span>Model</span> <span class="token punctuation">{</span>\n  username<span class="token punctuation">:</span> string\n  createdAt<span class="token punctuation">:</span> Date\n<span class="token punctuation">}</span>\n<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">InitUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">sequelize<span class="token punctuation">:</span> Sequelize<span class="token punctuation">.</span>Sequelize</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  User<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>\n    <span class="token punctuation">{</span>\n      username<span class="token punctuation">:</span> Sequelize<span class="token punctuation">.</span>DataTypes<span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">,</span>\n      createdAt<span class="token punctuation">:</span> Sequelize<span class="token punctuation">.</span>DataTypes<span class="token punctuation">.</span><span class="token constant">DATE</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span>\n      sequelize<span class="token punctuation">,</span>\n      tableName<span class="token punctuation">:</span> <span class="token string">"Users"</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code></pre></div>\n<p>To define our entity and its properties (Columns) we need to have access to the <code class="language-text">sequelize</code> object which we exported previously. So let\'s head over to the <code class="language-text">dbConnection.ts</code> file and update the file by passing <code class="language-text">sequelize</code> object to the <code class="language-text">InitUser</code> (which we have just exported):</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">const</span> database <span class="token operator">=</span> <span class="token punctuation">{</span>\n  sequelize<span class="token punctuation">,</span>\n  User<span class="token punctuation">:</span> <span class="token function">InitUser</span><span class="token punctuation">(</span>sequelize<span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span></code></pre></div>\n<p>Now if you run the project <code class="language-text">ts-node index.ts</code> you will get this error:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token punctuation">(</span>node<span class="token punctuation">:</span><span class="token number">11377</span><span class="token punctuation">)</span> UnhandledPromiseRejectionWarning<span class="token punctuation">:</span> SequelizeConnectionError<span class="token punctuation">:</span> Unknown database <span class="token string">\'sequelize_sample\'</span></code></pre></div>\n<p>It\'s because Sequelize doesn\'t know how to created the database so it needs a database to start with. So let\'s create the schema in MySQL:</p>\n<div class="gatsby-highlight" data-language="sql"><pre class="language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">SCHEMA</span> <span class="token punctuation">`</span>sequelize_sample<span class="token punctuation">`</span> <span class="token punctuation">;</span></code></pre></div>\n<p>Now if you run the project one more time, Sequelize is able to create the table for you:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">Executing</span> <span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token constant">IF</span> <span class="token constant">NOT</span> <span class="token constant">EXISTS</span> <span class="token template-string"><span class="token string">`Users`</span></span> <span class="token punctuation">(</span><span class="token template-string"><span class="token string">`id`</span></span> <span class="token constant">INTEGER</span> <span class="token constant">NOT</span> <span class="token constant">NULL</span> auto_increment <span class="token punctuation">,</span> <span class="token template-string"><span class="token string">`username`</span></span> <span class="token constant">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token string">`createdAt`</span></span> <span class="token constant">DATETIME</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token string">`updatedAt`</span></span> <span class="token constant">DATETIME</span> <span class="token constant">NOT</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token constant">PRIMARY</span> <span class="token constant">KEY</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token string">`id`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token constant">ENGINE</span><span class="token operator">=</span>InnoDB<span class="token punctuation">;</span>\n<span class="token function">Executing</span> <span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">SHOW</span> <span class="token constant">FULL</span> <span class="token constant">COLUMNS</span> <span class="token constant">FROM</span> <span class="token template-string"><span class="token string">`Users`</span></span><span class="token punctuation">;</span>\n<span class="token function">Executing</span> <span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">SELECT</span> <span class="token constant">CONSTRAINT_NAME</span> <span class="token keyword">as</span> constraint_name<span class="token punctuation">,</span><span class="token constant">CONSTRAINT_NAME</span> <span class="token keyword">as</span> constraintName<span class="token punctuation">,</span><span class="token constant">CONSTRAINT_SCHEMA</span> <span class="token keyword">as</span> constraintSchema<span class="token punctuation">,</span><span class="token constant">CONSTRAINT_SCHEMA</span> <span class="token keyword">as</span> constraintCatalog<span class="token punctuation">,</span><span class="token constant">TABLE_NAME</span> <span class="token keyword">as</span> tableName<span class="token punctuation">,</span><span class="token constant">TABLE_SCHEMA</span> <span class="token keyword">as</span> tableSchema<span class="token punctuation">,</span><span class="token constant">TABLE_SCHEMA</span> <span class="token keyword">as</span> tableCatalog<span class="token punctuation">,</span><span class="token constant">COLUMN_NAME</span> <span class="token keyword">as</span> columnName<span class="token punctuation">,</span><span class="token constant">REFERENCED_TABLE_SCHEMA</span> <span class="token keyword">as</span> referencedTableSchema<span class="token punctuation">,</span><span class="token constant">REFERENCED_TABLE_SCHEMA</span> <span class="token keyword">as</span> referencedTableCatalog<span class="token punctuation">,</span><span class="token constant">REFERENCED_TABLE_NAME</span> <span class="token keyword">as</span> referencedTableName<span class="token punctuation">,</span><span class="token constant">REFERENCED_COLUMN_NAME</span> <span class="token keyword">as</span> referencedColumnName <span class="token constant">FROM</span> <span class="token constant">INFORMATION_SCHEMA</span><span class="token punctuation">.</span><span class="token constant">KEY_COLUMN_USAGE</span> where <span class="token constant">TABLE_NAME</span> <span class="token operator">=</span> <span class="token string">\'Users\'</span> <span class="token constant">AND</span> <span class="token constant">CONSTRAINT_NAME</span><span class="token operator">!=</span><span class="token string">\'PRIMARY\'</span> <span class="token constant">AND</span> <span class="token constant">CONSTRAINT_SCHEMA</span><span class="token operator">=</span><span class="token string">\'sequelize_sample\'</span> <span class="token constant">AND</span> <span class="token constant">REFERENCED_TABLE_NAME</span> <span class="token constant">IS</span> <span class="token constant">NOT</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>\n<span class="token function">Executing</span> <span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">ALTER</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token string">`Users`</span></span> <span class="token constant">CHANGE</span> <span class="token template-string"><span class="token string">`username`</span></span> <span class="token template-string"><span class="token string">`username`</span></span> <span class="token constant">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">Executing</span> <span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">ALTER</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token string">`Users`</span></span> <span class="token constant">CHANGE</span> <span class="token template-string"><span class="token string">`createdAt`</span></span> <span class="token template-string"><span class="token string">`createdAt`</span></span> <span class="token constant">DATETIME</span><span class="token punctuation">;</span>\n<span class="token function">Executing</span> <span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">ALTER</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token string">`Users`</span></span> <span class="token constant">CHANGE</span> <span class="token template-string"><span class="token string">`updatedAt`</span></span> <span class="token template-string"><span class="token string">`updatedAt`</span></span> <span class="token constant">DATETIME</span> <span class="token constant">NOT</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>\n<span class="token function">Executing</span> <span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">SHOW</span> <span class="token constant">INDEX</span> <span class="token constant">FROM</span> <span class="token template-string"><span class="token string">`Users`</span></span> <span class="token constant">FROM</span> <span class="token template-string"><span class="token string">`sequelize_sample`</span></span></code></pre></div>\n<p>In the next blog post I will explain how to query and manipulate data. You can find the code here on GitHub. (<a href="https://github.com/SirwanAfifi/sequelize_sample">https://github.com/SirwanAfifi/sequelize_sample</a>)</p>',excerpt:"Sequelize is an Object Relational Mapper (ORM) which enables us to query and manipulate data stored in a relational database. There are…",fields:{slug:"2020-10-12-getting-started-with-sequelize"}}},{node:{frontmatter:{title:"WebSocket and React",date:"March 8th, 2020",slug:"WebSocket-and-React/"},html:'<p>WebSocket is a communication protocol. It\'s bidirectional in nature which means that either client or server can send data at any time. With WebSocket, we can build applications such as multiplayer games, chat apps, collaboration software that work on the open web. In this blog, I going to show you how to create a WebSocket server both in .NET Core and Node.js. I\'ll start with the Node.js version as it\'s a bit easier (boilerplate code for it is just 13 lines of code).</p>\n<h2>WebSocket Server (Node.js)</h2>\n<p>To create a WebSocket server in Node.js we need to install a third-party package called <code class="language-text">socket.io</code> which is pretty popular. So follow these steps to create the server:</p>\n<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">mkdir -p websocket/node &amp;&amp; cd &quot;$_&quot;\nyarn init -y\nyarn add express socket.io\ntouch index.js</code></pre></div>\n<p>Now open <code class="language-text">index.js</code> and add the following code:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"express"</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"http"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span>\n<span class="token keyword">const</span> io <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"socket.io"</span><span class="token punctuation">)</span><span class="token punctuation">(</span>http<span class="token punctuation">)</span>\n\nio<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"connection"</span><span class="token punctuation">,</span> <span class="token parameter">socket</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token parameter">message</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    socket<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\nhttp<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"listening on *:8080"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>\n<p>As you can see we have initialized a new instance of <code class="language-text">socket.io</code> using <code class="language-text">http</code>. Then we added an event listener for the <code class="language-text">connection</code> event. This keeps listening to any incoming WebSocket connection so whenever a new WebSocket connection is established from the client, the callback is invoked. Inside the callback again we keep listening to the incoming request from the newly created connection, If the client emits an event called <code class="language-text">message</code> we broadcast the data to other subscribers. That\'s it, the backend part is done. Now let\'s create a frontend for it.</p>\n<h2>WebSocket Client</h2>\n<p>I don\'t want to explain the process of creating a React app as it\'s pretty easy to scaffold a React application using <code class="language-text">create-react-app</code>. So let\'s assume that we have an existing application and want to add chat functionality to it. First, make sure you have installed <code class="language-text">socket.io-client</code> package. I should also mention that I\'m going to use Bootstrap for stylying the components. What we are going to build is this widget:</p>\n<img class="img-res" src="/img/chat.png" alt="Chat" />\n<p>To create such component I\'ll break it down into two separate components, one for each single message and the other for the chat widget. So let\'s go ahead and create them:</p>\n<h3>Message component</h3>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>\n<span class="token keyword">import</span> user <span class="token keyword">from</span> <span class="token string">"../Assets/user.png"</span>\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> userName<span class="token punctuation">,</span> message <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span><span class="token operator">></span>\n      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"media"</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>img\n          className<span class="token operator">=</span><span class="token string">"rounded-circle align-self-start mr-3"</span>\n          src<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span>\n          alt<span class="token operator">=</span><span class="token string">"Avatar"</span>\n        <span class="token operator">/</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"media-body"</span><span class="token operator">></span>\n          <span class="token operator">&lt;</span>h5 className<span class="token operator">=</span><span class="token string">"mt-0"</span><span class="token operator">></span><span class="token punctuation">{</span>userName<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h5<span class="token operator">></span>\n          <span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token punctuation">{</span>message<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"dropdown-divider"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span>\n  <span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code></pre></div>\n<h3>Chat component</h3>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span>\n<span class="token keyword">import</span> <span class="token string">"./Chat.css"</span>\n<span class="token keyword">import</span> Message <span class="token keyword">from</span> <span class="token string">"./Message"</span>\n<span class="token keyword">import</span> socketIOClient <span class="token keyword">from</span> <span class="token string">"socket.io-client"</span>\n<span class="token keyword">const</span> socket <span class="token operator">=</span> <span class="token function">socketIOClient</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080"</span><span class="token punctuation">)</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>userName<span class="token punctuation">,</span> setUserName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>message<span class="token punctuation">,</span> setMessage<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>messages<span class="token punctuation">,</span> setMessages<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n\n  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> uName <span class="token operator">=</span> <span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">"Name?"</span><span class="token punctuation">)</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>uName<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token function">setUserName</span><span class="token punctuation">(</span>uName<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n\n  socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token parameter">message</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token function">setMessages</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>messages<span class="token punctuation">,</span> message<span class="token punctuation">]</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"wrapper"</span><span class="token operator">></span>\n      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"card border-primary"</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>h5 className<span class="token operator">=</span><span class="token string">"card-header bg-primary text-white"</span><span class="token operator">></span>\n          <span class="token operator">&lt;</span>i className<span class="token operator">=</span><span class="token string">"fas fa-comment"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span> Chat\n        <span class="token operator">&lt;</span><span class="token operator">/</span>h5<span class="token operator">></span>\n        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"card-body overflow-auto"</span><span class="token operator">></span>\n          <span class="token punctuation">{</span>messages<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>\n            <span class="token operator">&lt;</span>Message\n              key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span>\n              userName<span class="token operator">=</span><span class="token punctuation">{</span>msg<span class="token punctuation">.</span>userName<span class="token punctuation">}</span>\n              message<span class="token operator">=</span><span class="token punctuation">{</span>msg<span class="token punctuation">.</span>message<span class="token punctuation">}</span>\n            <span class="token operator">/</span><span class="token operator">></span>\n          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"card-footer border-primary p-0"</span><span class="token operator">></span>\n          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"input-group"</span><span class="token operator">></span>\n            <span class="token operator">&lt;</span>input\n              value<span class="token operator">=</span><span class="token punctuation">{</span>message<span class="token punctuation">}</span>\n              onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n                <span class="token function">setMessage</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>\n              <span class="token punctuation">}</span><span class="token punctuation">}</span>\n              type<span class="token operator">=</span><span class="token string">"text"</span>\n              className<span class="token operator">=</span><span class="token string">"form-control input-sm"</span>\n              placeholder<span class="token operator">=</span><span class="token string">"Type your message here..."</span>\n            <span class="token operator">/</span><span class="token operator">></span>\n            <span class="token operator">&lt;</span>button\n              className<span class="token operator">=</span><span class="token string">"btn btn-primary btn-sm"</span>\n              onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">_</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n                <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token punctuation">{</span>\n                  id<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">,</span>\n                  message<span class="token punctuation">,</span>\n                  userName<span class="token punctuation">:</span> userName<span class="token punctuation">,</span>\n                <span class="token punctuation">}</span>\n                <span class="token function">setMessages</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>messages<span class="token punctuation">,</span> msg<span class="token punctuation">]</span><span class="token punctuation">)</span>\n                <span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>\n\n                socket<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span>\n              <span class="token punctuation">}</span><span class="token punctuation">}</span>\n            <span class="token operator">></span>\n              Send\n            <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>\n          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n  <span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code></pre></div>\n<p>As you can see we first imported <code class="language-text">socket.io</code>. Then there are three parts to make it work. The first part is to connect to our WebSocket server:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> socketIOClient <span class="token keyword">from</span> <span class="token string">"socket.io-client"</span>\n<span class="token keyword">const</span> socket <span class="token operator">=</span> <span class="token function">socketIOClient</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080"</span><span class="token punctuation">)</span></code></pre></div>\n<p>The second part is to listen to incoming messages from the backend. As soon as there is a new message we save it into our local state:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token parameter">message</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token function">setMessages</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>messages<span class="token punctuation">,</span> message<span class="token punctuation">]</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>\n<p>The third part is when we click on <code class="language-text">Send</code> button which is simply emitting a new message to the WebSocket server:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">socket<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span></code></pre></div>\n<p>That\'s it. We just built a simple chat application in just a few minutes. Now let\'s create the same functionality using .NET Core.</p>\n<h2>WebSocket Server (.NET Core)</h2>\n<p>To create a WebSocket server in .NET Core we should use SignalR as it\'s incredibly simple yet powerful library to create real-time web applications. So let\'s type in the following commands to create a project:</p>\n<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">mkdir -p websocket/dotnet &amp;&amp; cd &quot;$_&quot;\ndotnet new web</code></pre></div>\n<p>Next we need something called <code class="language-text">Hub</code> which is a class for listening and emitting data to subscribers. So let\'s create a Hub called <code class="language-text">ChatHub</code>:</p>\n<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ChatHub</span> <span class="token punctuation">:</span> <span class="token class-name">Hub</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token class-name">Task</span> <span class="token function">Message</span><span class="token punctuation">(</span><span class="token class-name">MessageModel</span> message<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">await</span> Clients<span class="token punctuation">.</span>Others<span class="token punctuation">.</span><span class="token function">SendAsync</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageModel</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">string</span> UserName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">string</span> Message <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre></div>\n<p>Then we will need to configure the server to respond to WebSocket requests. So let\'s change <code class="language-text">Startup.cs</code> as the following:</p>\n<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Startup</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        services<span class="token punctuation">.</span><span class="token function">AddCors</span><span class="token punctuation">(</span>o <span class="token operator">=></span> o<span class="token punctuation">.</span><span class="token function">AddPolicy</span><span class="token punctuation">(</span><span class="token string">"CorsPolicy"</span><span class="token punctuation">,</span> builder <span class="token operator">=></span>\n        <span class="token punctuation">{</span>\n            builder\n            <span class="token punctuation">.</span><span class="token function">AllowAnyMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n            <span class="token punctuation">.</span><span class="token function">AllowAnyHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n            <span class="token punctuation">.</span><span class="token function">WithOrigins</span><span class="token punctuation">(</span><span class="token string">"http://localhost:3000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        services<span class="token punctuation">.</span><span class="token function">AddSignalR</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">,</span> <span class="token class-name">IWebHostEnvironment</span> env<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        app<span class="token punctuation">.</span><span class="token function">UseCors</span><span class="token punctuation">(</span><span class="token string">"CorsPolicy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n\n        app<span class="token punctuation">.</span><span class="token function">UseRouting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        app<span class="token punctuation">.</span><span class="token function">UseEndpoints</span><span class="token punctuation">(</span>endpoints <span class="token operator">=></span>\n        <span class="token punctuation">{</span>\n            endpoints<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">MapHub</span><span class="token punctuation">&lt;</span><span class="token class-name">ChatHub</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token string">"/chatHub"</span><span class="token punctuation">,</span> options <span class="token operator">=></span>\n            <span class="token punctuation">{</span>\n                options<span class="token punctuation">.</span>Transports <span class="token operator">=</span> HttpTransportType<span class="token punctuation">.</span>WebSockets<span class="token punctuation">;</span>\n            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre></div>\n<p>It worth mentioning that SignalR includes some built-in transports to keep the underlying connection open. It means that it automatically chooses the most efficient transport type during an initial stage called negotiation. In the code, we have purposely set <code class="language-text">WebSockets</code> transport by passing in a second argument to <code class="language-text">MapHub</code> method. This is because the main focus of this blog post. But you can set other supported transports if you want to, If you don\'t explicitly set the transports, SignalR will use the most efficient type for you as mentioned. That\'s it. The server is now ready to communicate with the client. Unfortunately, the client part needs a couple of changes as the <code class="language-text">socket.io-client</code> package doesn\'t support SignalR for its server as they are different in implementation. It means that we need to change the client code and the way it communicates with the server. First, we need to install an official Microsoft package:</p>\n<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">yarn add @microsoft/signalr</code></pre></div>\n<p>Since the component structure is almost the same with one we had in <code class="language-text">socket.io-client</code> so I\'ll just add the differences. First we need to import the SignalR package:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>\n  HubConnectionBuilder<span class="token punctuation">,</span>\n  LogLevel<span class="token punctuation">,</span>\n  HttpTransportType<span class="token punctuation">,</span>\n<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@microsoft/signalr"</span></code></pre></div>\n<p>Then we need to have a way to initialize and open the connection. We could do that by defining a <code class="language-text">useEffect</code> hook:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">[</span>connection<span class="token punctuation">,</span> setConnection<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token function">useEffect</span><span class="token punctuation">(</span>\n  <span class="token function">configSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// as before</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">configSocket</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> socketConnection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HubConnectionBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">configureLogging</span><span class="token punctuation">(</span>LogLevel<span class="token punctuation">.</span>Debug<span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">withUrl</span><span class="token punctuation">(</span><span class="token string">"http://localhost:5000/chatHub"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n      skipNegotiation<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n      transport<span class="token punctuation">:</span> HttpTransportType<span class="token punctuation">.</span>WebSockets<span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">await</span> socketConnection<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">setConnection</span><span class="token punctuation">(</span>socketConnection<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre></div>\n<p>We only want to initialize <code class="language-text">connection</code> when the component mounts that\'s why we provided an empty array as a second argument for the effect hook. Next we need to listen to any incoming message:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">connection <span class="token operator">&amp;&amp;</span>\n  connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token parameter">message</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token function">setMessages</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>messages<span class="token punctuation">,</span> message<span class="token punctuation">]</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>\n<p>As the final step we need a way to emit the messages when a user clicks on <code class="language-text">Send</code> button:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>button\n  className<span class="token operator">=</span><span class="token string">"btn btn-primary btn-sm"</span>\n  onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">_</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token comment">// as before</span>\n\n    connection <span class="token operator">&amp;&amp;</span> connection<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">}</span>\n<span class="token operator">></span>\n  Send\n<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></code></pre></div>\n<p>That\'s all we need to do to configure SignalR into our React application. Now you can run the project and see the result:</p>\n<img class="img-res" src="/img/chat-demo.gif" alt="Chat" />\n<br/>\n<p><strong>Note</strong>: If you want to host the SignalR server on IIS you will have to enable WebSocket on IIS because it\'s not enabled by default. You can follow <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/websockets?view=aspnetcore-3.1#iisiis-express-support">this process</a> to enable it:</p>\n<img class="img-res" src="/img/IIS_WebSocket.png" alt="Enabling WebSockets on IIS" />\n<br/>\n<p>Source code (<a href="https://github.com/SirwanAfifi/realtime">https://github.com/SirwanAfifi/realtime</a>)</p>',excerpt:"WebSocket is a communication protocol. It's bidirectional in nature which means that either client or server can send data at any time. With…",fields:{slug:"2020-03-08-WebSocket-and-React"}}},{node:{frontmatter:{title:"Displaying Secured Images",date:"January 25th, 2020",slug:"Displaying-Secured-Images/"},html:'<p>Ran into an interesting problem this week with displaying secured images on the page. The problem is that <code class="language-text">img</code> tag doesn\'t show the image if the resource is secured with a token or a username/password. When the browser encounters an image tag with a secured URL, it\'s unable to show the image, so it immediately responds with 401 Unauthorized error because the request is heading towards a protected resource. To show the problem, consider the following endpoint which requires the caller to pass in a token:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// server.js</span>\napp<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/downloadSecuredImage"</span><span class="token punctuation">,</span> authentication<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>__dirname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/images/Me.jpg`</span></span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>\n<p>As you can see, the Express framework provides a <code class="language-text">sendFile()</code> method available on the response object which can be used to send static files to the client. It automatically sets appropriate headers to the response. I should also mention the token validation takes place using a custom Express middleware:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> jwt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"jsonwebtoken"</span><span class="token punctuation">)</span>\n<span class="token keyword">const</span> database <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"../db/users"</span><span class="token punctuation">)</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">authentication</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">try</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> token <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">"Authorization"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"Bearer "</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>\n    <span class="token keyword">const</span> decoded <span class="token operator">=</span> <span class="token keyword">await</span> jwt<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> <span class="token string">"SUPER_SECRET_PRIVATE_KEY"</span><span class="token punctuation">)</span>\n    <span class="token keyword">const</span> user <span class="token operator">=</span> database<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">u</span> <span class="token operator">=></span> u<span class="token punctuation">.</span>email <span class="token operator">===</span> decoded<span class="token punctuation">.</span>user<span class="token punctuation">)</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Invalid credentials"</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n    req<span class="token punctuation">.</span>user <span class="token operator">=</span> decoded<span class="token punctuation">.</span>user\n    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>exception<span class="token punctuation">)</span>\n    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">401</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>exception<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> authentication</code></pre></div>\n<p>Now if we want an <code class="language-text">img</code> tag to point to that endpoint, we get <code class="language-text">401 Unauthorized</code> error, and the result would be the following image:</p>\n<img class="img-res" src="/img/secured-image-401.png" alt="secured-image" />\n<p>One solution to tackle this issue is by embedding the image using a particular format. This format is called Data URL, and we can use it inside the image\'s <code class="language-text">src</code> attribute, So the browser does not have to make another request to get it. Here is an example of how such Data URL looks like:</p>\n<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">data:image/png;base64,R0lGODlhEAAQAM...</code></pre></div>\n<p>So we\'ll need to issue a request of type blob (<code class="language-text">responseType: &quot;blob&quot;</code>) to the protected endpoint with the JWT token provided directly from the code. This way, we don\'t need to hard-code the URL inside <code class="language-text">src</code> attribute anymore. Once the request is completed, we then assign the response data to a variable and make use of <code class="language-text">FileReader</code>\'s <code class="language-text">readAsDataUrl</code> method to convert the blob result to Base64-encoded string. Here is a React component doing the process:</p>\n<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span>\n<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">"axios"</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>token<span class="token punctuation">,</span> setToken<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>image<span class="token punctuation">,</span> setImage<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> ArrayBuffer <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>\n\n  <span class="token keyword">const</span> <span class="token function-variable function">downloadImage</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`http://localhost:4000/downloadSecuredImage`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n      responseType<span class="token punctuation">:</span> <span class="token string">"blob"</span><span class="token punctuation">,</span>\n      headers<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n        Authorization<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>token<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n    <span class="token keyword">const</span> blob <span class="token operator">=</span> img<span class="token punctuation">.</span>data\n    <span class="token keyword">let</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span>\n    reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reader<span class="token punctuation">.</span>result<span class="token punctuation">)</span>\n      <span class="token function">setImage</span><span class="token punctuation">(</span>reader<span class="token punctuation">.</span>result<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>\n              <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-info<span class="token punctuation">"</span></span>\n              <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">_</span> <span class="token operator">=></span> <span class="token function">downloadImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n              <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token operator">!</span>token<span class="token punctuation">}</span></span>\n            <span class="token punctuation">></span></span><span class="token plain-text">\n              Download Image\n            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\n          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>\n            <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://localhost:4000/downloadSecuredImage<span class="token punctuation">"</span></span>\n            <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>This is a secured image....<span class="token punctuation">"</span></span>\n          <span class="token punctuation">/></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n          </span><span class="token punctuation">{</span>image <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>image <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Image<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code></pre></div>\n<p>Now when the button is clicked we get the file from the server and save the converted result into a state, When the browser encounters the data URL (the value of <code class="language-text">image</code>), It decodes the data and constructs the original file. This way, we have embedded the image data directly into the document.</p>\n<img class="img-res" src="/img/SecureImageDemo.gif" alt="SecureImageDemo" />',excerpt:"Ran into an interesting problem this week with displaying secured images on the page. The problem is that  tag doesn't show the image if the…",fields:{slug:"2020-01-25-Displaying-Secured-Images"}}},{node:{frontmatter:{title:"MobX with React and TypeScript",date:"January 5th, 2020",slug:"MobX-with-React-and-TypeScript/"},html:'<p>MobX is one of the popular state management libraries. One of the great things about MobX is that we can store state in a simple data structure and allow the library to take care of keeping everything up to date. The MobX API is pretty simple; in fact, it has these four simple building blocks at its core:</p>\n<ul>\n<li>Observable</li>\n<li>Actions</li>\n<li>Computed</li>\n<li>Reactions</li>\n</ul>\n<h2>Observable</h2>\n<p>The idea is that when the data changes, the observable object notifies the observers. To define a property as observable, all we need to do is to use <code class="language-text">@observable</code> decorator:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">TodoStore</span> <span class="token punctuation">{</span>\n  @observable todos<span class="token punctuation">:</span> Todo<span class="token punctuation">[</span><span class="token punctuation">]</span>\n<span class="token punctuation">}</span></code></pre></div>\n<p>Now When a new value is assigned to <code class="language-text">todos</code> array, the notifications will fire, and all the associated observers will be notified.</p>\n<h2>Actions</h2>\n<p>Action is a way to change an observable (update the state). To define an action, we decorate methods inside the store with <code class="language-text">@action</code>:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">@action <span class="token function-variable function">toggleTodo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>todos <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">todo</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>todo<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token punctuation">{</span>\n          <span class="token operator">...</span>todo<span class="token punctuation">,</span>\n          completed<span class="token punctuation">:</span> <span class="token operator">!</span>todo<span class="token punctuation">.</span>completed\n        <span class="token punctuation">}</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n      <span class="token keyword">return</span> todo<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>\n<h2>Computed</h2>\n<p>Computed can be used to derive values from the existing state or other computed values:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">@computed <span class="token keyword">get</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">{</span>\n      total<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>todos<span class="token punctuation">.</span>length<span class="token punctuation">,</span>\n      completed<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">todo</span> <span class="token operator">=></span> todo<span class="token punctuation">.</span>completed<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span>\n      notCompleted<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">todo</span> <span class="token operator">=></span> <span class="token operator">!</span>todo<span class="token punctuation">.</span>completed<span class="token punctuation">)</span><span class="token punctuation">.</span>length\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre></div>\n<h2>Reactions</h2>\n<p>Reactions track observables from inside the store itself. In the example below if the action to set <code class="language-text">todos</code> is called, then it runs the second argument.</p>\n<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">class TodoStore {\n  constructor() {\n    reaction(\n      () =&gt; this.todos,\n      _ =&gt; console.log(this.todos.length)\n    );\n  }</code></pre></div>\n<h1>Creating a Simple Todo App with MobX and React</h1>\n<p>Now that we have talked about the main concepts, let\'s create a simple todo app using React, MobX and TypeScript:</p>\n<img class="img-res" src="/img/mobx-project.png" alt="MobX project" />\n<p>So go to the terminal, create a directory then CD into it then type in this command to scaffold a new React project:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">npx create<span class="token operator">-</span>react<span class="token operator">-</span>app <span class="token punctuation">.</span> <span class="token operator">--</span>typescript</code></pre></div>\n<p>For this project, I am using Bootstrap so let\'s add it as a dependency to the newly created project:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">yarn add bootstrap <span class="token operator">--</span>save</code></pre></div>\n<p>Now go to <code class="language-text">index.tsx</code> and import <code class="language-text">bootstrap.css</code>:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token string">"bootstrap/dist/css/bootstrap.css"</span></code></pre></div>\n<p>Now we\'ll install the needed dependencies:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">yarn add mobx mobx<span class="token operator">-</span>react<span class="token operator">-</span>lite uuid @types<span class="token operator">/</span>uuid <span class="token operator">--</span>save</code></pre></div>\n<p>The next thing we have to do is to set <code class="language-text">experimentalDecorators</code> flag to true in <code class="language-text">tsconfig.json</code> in order for the MobX decorators to compile properly:</p>\n<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>\n  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token comment">// other stuff...</span>\n\n    <span class="token property">"experimentalDecorators"</span><span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre></div>\n<p>After all the above stuff is done, we have MobX ready to go. Now let\'s create a store inside the project <code class="language-text">src/stores/TodoStore.ts</code>. Add the following code to it:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> observable<span class="token punctuation">,</span> action<span class="token punctuation">,</span> computed<span class="token punctuation">,</span> reaction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"mobx"</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> createContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span>\n<span class="token keyword">import</span> uuidv4 <span class="token keyword">from</span> <span class="token string">"uuid/v4"</span>\n\n<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Todo</span> <span class="token punctuation">{</span>\n  id<span class="token operator">?</span><span class="token punctuation">:</span> string<span class="token punctuation">;</span>\n  title<span class="token punctuation">:</span> string<span class="token punctuation">;</span>\n  completed<span class="token punctuation">:</span> boolean<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">TodoStore</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">reaction</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span>todos<span class="token punctuation">,</span> <span class="token parameter">_</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>todos<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n\n  @observable todos<span class="token punctuation">:</span> Todo<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>\n    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">"Item #1"</span><span class="token punctuation">,</span> completed<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">"Item #2"</span><span class="token punctuation">,</span> completed<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">"Item #3"</span><span class="token punctuation">,</span> completed<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">"Item #4"</span><span class="token punctuation">,</span> completed<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">"Item #5"</span><span class="token punctuation">,</span> completed<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">"Item #6"</span><span class="token punctuation">,</span> completed<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span>\n\n  @action <span class="token function-variable function">addTodo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">todo<span class="token punctuation">:</span> Todo</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>todo<span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n\n  @action <span class="token function-variable function">toggleTodo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>todos <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">todo</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>todo<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token punctuation">{</span>\n          <span class="token operator">...</span>todo<span class="token punctuation">,</span>\n          completed<span class="token punctuation">:</span> <span class="token operator">!</span>todo<span class="token punctuation">.</span>completed<span class="token punctuation">,</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n      <span class="token keyword">return</span> todo\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n\n  @action <span class="token function-variable function">removeTodo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>todos <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">todo</span> <span class="token operator">=></span> todo<span class="token punctuation">.</span>id <span class="token operator">!==</span> id<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n\n  @computed <span class="token keyword">get</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">{</span>\n      total<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>todos<span class="token punctuation">.</span>length<span class="token punctuation">,</span>\n      completed<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">todo</span> <span class="token operator">=></span> todo<span class="token punctuation">.</span>completed<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span>\n      notCompleted<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">todo</span> <span class="token operator">=></span> <span class="token operator">!</span>todo<span class="token punctuation">.</span>completed<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TodoStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>\n<p>Now create a new folder called components in the <code class="language-text">src</code> directory and add <code class="language-text">TodoAdd.tsx</code> and <code class="language-text">TodoList.tsx</code>.</p>\n<h3>TodoAdd</h3>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useContext<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span>\n<span class="token keyword">import</span> TodoStore <span class="token keyword">from</span> <span class="token string">"../stores/TodoStore"</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> observer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"mobx-react-lite"</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">AddTodo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>title<span class="token punctuation">,</span> setTitle<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>\n  <span class="token keyword">const</span> todoStore <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>TodoStore<span class="token punctuation">)</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> addTodo<span class="token punctuation">,</span> info <span class="token punctuation">}</span> <span class="token operator">=</span> todoStore\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span><span class="token operator">></span>\n      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"alert alert-primary"</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"d-inline col-4"</span><span class="token operator">></span>\n          Total items<span class="token punctuation">:</span> <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>\n          <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">"badge badge-info"</span><span class="token operator">></span><span class="token punctuation">{</span>info<span class="token punctuation">.</span>total<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"d-inline col-4"</span><span class="token operator">></span>\n          Finished items<span class="token punctuation">:</span> <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>\n          <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">"badge badge-info"</span><span class="token operator">></span><span class="token punctuation">{</span>info<span class="token punctuation">.</span>completed<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"d-inline col-4"</span><span class="token operator">></span>\n          Unfinished items<span class="token punctuation">:</span> <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>\n          <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">"badge badge-info"</span><span class="token operator">></span><span class="token punctuation">{</span>info<span class="token punctuation">.</span>notCompleted<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"form-group"</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>input\n          className<span class="token operator">=</span><span class="token string">"form-control"</span>\n          type<span class="token operator">=</span><span class="token string">"text"</span>\n          value<span class="token operator">=</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span>\n          placeholder<span class="token operator">=</span><span class="token string">"Todo title..."</span>\n          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=></span> <span class="token function">setTitle</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span>\n        <span class="token operator">/</span><span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"form-group"</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>button\n          className<span class="token operator">=</span><span class="token string">"btn btn-primary"</span>\n          onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">_</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token function">addTodo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n              title<span class="token punctuation">:</span> title<span class="token punctuation">,</span>\n              completed<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">)</span>\n            <span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>\n          <span class="token punctuation">}</span><span class="token punctuation">}</span>\n        <span class="token operator">></span>\n          Add Todo\n        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span>\n  <span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">observer</span><span class="token punctuation">(</span>AddTodo<span class="token punctuation">)</span></code></pre></div>\n<h3>TodoList</h3>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> TodoStore <span class="token keyword">from</span> <span class="token string">"../stores/TodoStore"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> observer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"mobx-react-lite"</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">TodoList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> todoStore <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>TodoStore<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> todos<span class="token punctuation">,</span> toggleTodo<span class="token punctuation">,</span> removeTodo <span class="token punctuation">}</span> <span class="token operator">=</span> todoStore<span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span><span class="token operator">></span>\n      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"row"</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>table className<span class="token operator">=</span><span class="token string">"table table-hover"</span><span class="token operator">></span>\n          <span class="token operator">&lt;</span>thead className<span class="token operator">=</span><span class="token string">"thead-light"</span><span class="token operator">></span>\n            <span class="token operator">&lt;</span>tr<span class="token operator">></span>\n              <span class="token operator">&lt;</span>th<span class="token operator">></span>Title<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span>\n              <span class="token operator">&lt;</span>th<span class="token operator">></span>Completed<span class="token operator">?</span><span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span>\n              <span class="token operator">&lt;</span>th<span class="token operator">></span>Actions<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span>\n            <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>\n          <span class="token operator">&lt;</span><span class="token operator">/</span>thead<span class="token operator">></span>\n          <span class="token operator">&lt;</span>tbody<span class="token operator">></span>\n            <span class="token punctuation">{</span>todos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">todo</span> <span class="token operator">=></span> <span class="token punctuation">(</span>\n              <span class="token operator">&lt;</span>tr key<span class="token operator">=</span><span class="token punctuation">{</span>todo<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">></span>\n                <span class="token operator">&lt;</span>td<span class="token operator">></span><span class="token punctuation">{</span>todo<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>\n                <span class="token operator">&lt;</span>td<span class="token operator">></span><span class="token punctuation">{</span>todo<span class="token punctuation">.</span>completed <span class="token operator">?</span> <span class="token string">"✅"</span> <span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>\n                <span class="token operator">&lt;</span>td<span class="token operator">></span>\n                  <span class="token operator">&lt;</span>button\n                    className<span class="token operator">=</span><span class="token string">"btn btn-sm btn-info"</span>\n                    onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">_</span> <span class="token operator">=></span> <span class="token function">toggleTodo</span><span class="token punctuation">(</span>todo<span class="token punctuation">.</span>id<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n                  <span class="token operator">></span>\n                    Toggle\n                  <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>\n                  <span class="token operator">&lt;</span>button\n                    className<span class="token operator">=</span><span class="token string">"btn btn-sm btn-danger"</span>\n                    onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">_</span> <span class="token operator">=></span> <span class="token function">removeTodo</span><span class="token punctuation">(</span>todo<span class="token punctuation">.</span>id<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n                  <span class="token operator">></span>\n                    Remove\n                  <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>\n                <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>\n              <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>\n            <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n          <span class="token operator">&lt;</span><span class="token operator">/</span>tbody<span class="token operator">></span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">observer</span><span class="token punctuation">(</span>TodoList<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>\n<p>Both components use <code class="language-text">observer</code> which is an <a href="https://sirwan.info/archive/2019/09/22/Higher-Order-Components/">HOC</a> to make the components observers of our store. So any changes to any of the observable will cause the React components to re-render.</p>\n<p>That’s it 🚀 You’re now up and going with MobX in your React application.</p>\n<p><a href="https://github.com/SirwanAfifi/mobxwithts">Here</a>\'s the source for the project.</p>',excerpt:"MobX is one of the popular state management libraries. One of the great things about MobX is that we can store state in a simple data…",fields:{slug:"2020-01-05-MobX-with-React"}}},{node:{frontmatter:{title:"Server-Sent Events and React",date:"December 15th, 2019",slug:" Server-Sent-Events-and-React/"},html:'<p>Server Sents Events are realtime events sent from the server to the client. It\'s a way to subscribe to a data stream sent by a server. Basically, it is a long-running HTTP connection with a particular mime type. Contrary to WebSocket, Server-Sent Events are unidirectional which clients subscribe to a channel and get data from the server. Updates for the data are pushed to the client in realtime as they occur, so the client doesn\'t need to initiate any requests. When using SSE, we should consider these:</p>\n<ul>\n<li>Requests can be redirected HTTP 301(permanent) &#x26;\n307(temporary)</li>\n<li>Only UTF-8 decoding is supported, no binary data</li>\n<li>Protocol supports multiple type of events, default is message</li>\n<li>Clients always reconnect (no need to handle)</li>\n<li>Server sends HTTP 204 No Content to stop reconnection</li>\n<li>Limited amount of global connections per site</li>\n</ul>\n<h2>Server Implementation:</h2>\n<p>Implementing it on the server is pretty easy. All we need to do is running an endless loop. Inside the loop, we should set the somespecial HTTP headers and push the data to the response every 2 seconds:</p>\n<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">,</span> <span class="token class-name">IWebHostEnvironment</span> env<span class="token punctuation">,</span>\n        ILogger<span class="token operator">&lt;</span>Startup<span class="token operator">></span> loggerDebug<span class="token punctuation">,</span> <span class="token class-name">Datasource</span> datasource<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    app<span class="token punctuation">.</span><span class="token function">UseCors</span><span class="token punctuation">(</span><span class="token string">"MyPolicy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    app<span class="token punctuation">.</span><span class="token function">UseRouting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    app<span class="token punctuation">.</span><span class="token function">UseEndpoints</span><span class="token punctuation">(</span>endpoints <span class="token operator">=></span>\n    <span class="token punctuation">{</span>\n        endpoints<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">"/stream"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> context <span class="token operator">=></span>\n        <span class="token punctuation">{</span>\n            <span class="token keyword">var</span> response <span class="token operator">=</span> context<span class="token punctuation">.</span>Response<span class="token punctuation">;</span>\n            response<span class="token punctuation">.</span>Headers<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"connection"</span><span class="token punctuation">,</span> <span class="token string">"keep-alive"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            response<span class="token punctuation">.</span>Headers<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"cach-control"</span><span class="token punctuation">,</span> <span class="token string">"no-cache"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            response<span class="token punctuation">.</span>Headers<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"content-type"</span><span class="token punctuation">,</span> <span class="token string">"text/event-stream"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span>\n            <span class="token punctuation">{</span>\n                <span class="token keyword">await</span> response<span class="token punctuation">.</span>Body\n                    <span class="token punctuation">.</span><span class="token function">WriteAsync</span><span class="token punctuation">(</span>Encoding<span class="token punctuation">.</span>UTF8<span class="token punctuation">.</span><span class="token function">GetBytes</span><span class="token punctuation">(</span>$<span class="token string">"data: {JsonSerializer.Serialize(datasource.GetData())}\\n\\n"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n                <span class="token keyword">await</span> response<span class="token punctuation">.</span>Body<span class="token punctuation">.</span><span class="token function">FlushAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n                <span class="token keyword">await</span> Task<span class="token punctuation">.</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre></div>\n<p>Here\'s also a Node.js version of the server:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/stream"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  res<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    <span class="token string">"Content-Type"</span><span class="token punctuation">:</span> <span class="token string">"text/event-stream"</span><span class="token punctuation">,</span>\n    <span class="token string">"Cache-Control"</span><span class="token punctuation">:</span> <span class="token string">"no-cache"</span><span class="token punctuation">,</span>\n    Connection<span class="token punctuation">:</span> <span class="token string">"keep-alive"</span><span class="token punctuation">,</span>\n\n    <span class="token comment">// enabling CORS</span>\n    <span class="token string">"Access-Control-Allow-Origin"</span><span class="token punctuation">:</span> <span class="token string">"*"</span><span class="token punctuation">,</span>\n    <span class="token string">"Access-Control-Allow-Headers"</span><span class="token punctuation">:</span>\n      <span class="token string">"Origin, X-Requested-With, Content-Type, Accept"</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n  <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`data: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\\n\\n`</span></span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>\n<p>As you can see, we are sending the data in a specific format:</p>\n<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">data: My message\\n\\n</code></pre></div>\n<h2>Frontend Implementation</h2>\n<p>Implementing it on the client is fairly easy. All we need to do is making use of <code class="language-text">EventSource</code> API, which is a standard interface to interact with the Server-Sent Events protocol. It basically opens a persistent connection to our HTTP server. The cool thing about the API is that it keeps the connection open until we call <code class="language-text">EventSource.close()</code>:</p>\n<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">ProductList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> setData<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span>\n\n  <span class="token keyword">const</span> formatter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>NumberFormat</span><span class="token punctuation">(</span><span class="token string">"en-GB"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n    style<span class="token punctuation">:</span> <span class="token string">"currency"</span><span class="token punctuation">,</span>\n    currency<span class="token punctuation">:</span> <span class="token string">"gbp"</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> eventSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span><span class="token string">"http://localhost:5000/stream"</span><span class="token punctuation">)</span>\n    eventSource<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token function">updateProdutList</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n\n  <span class="token keyword">const</span> <span class="token function-variable function">updateProdutList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">product<span class="token punctuation">:</span> <span class="token builtin">any</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>product<span class="token punctuation">]</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>table className<span class="token operator">=</span><span class="token string">"table table-hover"</span><span class="token operator">></span>\n      <span class="token operator">&lt;</span>thead className<span class="token operator">=</span><span class="token string">"thead-dark"</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>tr<span class="token operator">></span>\n          <span class="token operator">&lt;</span>th<span class="token operator">></span>Id<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span>\n          <span class="token operator">&lt;</span>th<span class="token operator">></span>Title<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span>\n          <span class="token operator">&lt;</span>th<span class="token operator">></span>Price<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>thead<span class="token operator">></span>\n      <span class="token operator">&lt;</span>tbody<span class="token operator">></span>\n        <span class="token punctuation">{</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">:</span> <span class="token builtin">any</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>\n          <span class="token operator">&lt;</span>tr key<span class="token operator">=</span><span class="token punctuation">{</span>p<span class="token punctuation">.</span>Id<span class="token punctuation">}</span><span class="token operator">></span>\n            <span class="token operator">&lt;</span>td<span class="token operator">></span><span class="token punctuation">{</span>p<span class="token punctuation">.</span>Id<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>\n            <span class="token operator">&lt;</span>td<span class="token operator">></span><span class="token punctuation">{</span>p<span class="token punctuation">.</span>Title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>\n            <span class="token operator">&lt;</span>td<span class="token operator">></span><span class="token punctuation">{</span>formatter<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>Price<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>\n          <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>\n        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>tbody<span class="token operator">></span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">></span>\n  <span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token punctuation">{</span> ProductList <span class="token punctuation">}</span></code></pre></div>\n<p>Here we have passed in the SSE endpoint URL to the <code class="language-text">EventSource</code> constructor. It then goes and establishes the communication channel between the React app and the server. Then we added <code class="language-text">onmessage</code> event handler which is called when new data is received. <code class="language-text">updateProdutList</code> is responsible for updating the state so once the data is received we update the state with the latest data. The process of subscribing to the endpoint happens once the <code class="language-text">ProductList</code> component is mounted; that\'s why we used <code class="language-text">useEffect</code> inside the component.</p>\n<p>Now we can test the application:</p>\n<img class="img-res" src="/img/realtime.gif" alt="Realtime communication" />',excerpt:"Server Sents Events are realtime events sent from the server to the client. It's a way to subscribe to a data stream sent by a server…",fields:{slug:"2019-12-15-Server-Sent-Events-and-React"}}},{node:{frontmatter:{title:"Setting Up Tailwind",date:"November 16th, 2019",slug:"Setting-Up-Tailwind/"},html:'<h1>Setup</h1>\n<ol>\n<li>Create a directory then:</li>\n</ol>\n<p><code class="language-text">npm init -y</code></p>\n<ol start="2">\n<li>Install these dependencies:</li>\n</ol>\n<p><code class="language-text">npm install tailwindcss postcss-cli autoprefixer</code></p>\n<ol start="3">\n<li><code class="language-text">npx tailwind init</code> (It creates an empty <strong>tailwind.config.js</strong> file in the project root):</li>\n</ol>\n<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">module.exports = {\n  theme: {\n    extend: {}\n  },\n  variants: {},\n  plugins: []\n}</code></pre></div>\n<ol start="4">\n<li>Create a <strong>postcss.config.js</strong> in the root of the project:</li>\n</ol>\n<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">module.exports = {\n  plugins: [\n      require(&quot;tailwindcss&quot;),\n      require(&quot;autoprefixer&quot;)\n  ]\n};</code></pre></div>\n<ol start="5">\n<li>Create a CSS file that runs through the above process: <code class="language-text">css/tailwind.css</code>:</li>\n</ol>\n<div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@tailwind</span> base<span class="token punctuation">;</span></span>\n<span class="token atrule"><span class="token rule">@tailwind</span> components<span class="token punctuation">;</span></span>\n<span class="token atrule"><span class="token rule">@tailwind</span> utilities<span class="token punctuation">;</span></span></code></pre></div>\n<ol start="6">\n<li>Create a script to process the CSS through our list of PostCSS plugins:</li>\n</ol>\n<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"postcss css/tailwind.css -o public/build/tailwind.css"</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre></div>\n<ol start="7">\n<li>Run the command: <code class="language-text">npm run build</code>; A new CSS file is generated that has been processed through the PostCSS.</li>\n<li>Add an HTML file in <code class="language-text">public/index.html</code> and use the tailwind classes:</li>\n</ol>\n<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Tailwindcss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./build/tailwind.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text-4xl font-bold text-center text-blue-400<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Hello World!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre></div>\n<p><a href="https://marketplace.visualstudio.com/items?itemName=bradlc.vscode-tailwindcss">Tailwind CSS Intellisense</a> for intelligent auto-completion in VS Code</p>\n<h2>Hover</h2>\n<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bg-indigo-500 hover:bg-indigo-400<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Book your escape<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code></pre></div>\n<h2>Responsive design:</h2>\n<p>Out of the box Tailwind ships with four default breakpoints:</p>\n<ul>\n<li><code class="language-text">sm</code> which kicks in at 640</li>\n<li><code class="language-text">md</code> which kicks in at 768</li>\n<li><code class="language-text">lg</code> which kicks in at 1024</li>\n<li><code class="language-text">xl</code> which kicks in at 1280</li>\n</ul>\n<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mt-4 sm:mt-6 md:mt-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre></div>\n<h2>Composing Utilities with <code class="language-text">@apply</code>:</h2>\n<p>Change <code class="language-text">tailwind.css</code> file:</p>\n<div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@tailwind</span> base<span class="token punctuation">;</span></span>\n<span class="token atrule"><span class="token rule">@tailwind</span> components<span class="token punctuation">;</span></span>\n\n<span class="token selector">.btn</span> <span class="token punctuation">{</span>\n  <span class="token atrule"><span class="token rule">@apply</span> inline-block bg-indigo-500 text-white px-5 py-3 rounded-lg shadow-lg uppercase tracking-wider font-semibold text-sm<span class="token punctuation">;</span></span>\n<span class="token punctuation">}</span>\n<span class="token selector">.btn:hover</span> <span class="token punctuation">{</span>\n  <span class="token atrule"><span class="token rule">@apply</span> bg-indigo-400<span class="token punctuation">;</span></span>\n<span class="token punctuation">}</span>\n<span class="token selector">.btn:focus</span> <span class="token punctuation">{</span>\n  <span class="token atrule"><span class="token rule">@apply</span> outline-none shadow-outline<span class="token punctuation">;</span></span>\n<span class="token punctuation">}</span>\n<span class="token selector">.btn:active</span> <span class="token punctuation">{</span>\n  <span class="token atrule"><span class="token rule">@apply</span> bg-indigo-600<span class="token punctuation">;</span></span>\n<span class="token punctuation">}</span>\n<span class="token atrule"><span class="token rule">@screen</span> sm</span> <span class="token punctuation">{</span>\n  <span class="token selector">.btn</span> <span class="token punctuation">{</span>\n    <span class="token atrule"><span class="token rule">@apply</span> text-base<span class="token punctuation">;</span></span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token atrule"><span class="token rule">@tailwind</span> utilities<span class="token punctuation">;</span></span></code></pre></div>\n<h2>Add watch script for CSS files:</h2>\n<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n  <span class="token property">"watch"</span><span class="token operator">:</span> <span class="token string">"postcss css/tailwind.css -o public/build/tailwind.css --watch"</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre></div>\n<h1>Adding Tailwind to a React project</h1>\n<ol>\n<li><code class="language-text">npx create-react-app tailwind</code></li>\n<li><code class="language-text">cd tailwind</code></li>\n<li><code class="language-text">npm install tailwindcss postcss-cli autoprefixer</code></li>\n<li><code class="language-text">touch postcss.config.js</code>:</li>\n</ol>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"tailwindcss"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"autoprefixer"</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span></code></pre></div>\n<ol start="5">\n<li><code class="language-text">touch tailwind.css</code>:</li>\n</ol>\n<div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@tailwind</span> base<span class="token punctuation">;</span></span>\n<span class="token atrule"><span class="token rule">@tailwind</span> components<span class="token punctuation">;</span></span>\n<span class="token atrule"><span class="token rule">@tailwind</span> utilities<span class="token punctuation">;</span></span></code></pre></div>\n<ol start="6">\n<li>Add build script:</li>\n</ol>\n<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"build:css"</span><span class="token operator">:</span> <span class="token string">"postcss ./tailwind.css -o src/css/style.css"</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre></div>\n<ol start="7">\n<li>Update <code class="language-text">public/index.html</code>:</li>\n</ol>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>body <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"w-full bg-purple-100"</span><span class="token operator">></span></code></pre></div>\n<ol start="8">\n<li>Install <code class="language-text">concurrently</code> for watching <code class="language-text">tailwind.css</code> changes:</li>\n</ol>\n<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"concurrently \\"yarn watch:css\\" \\"yarn start\\""</span><span class="token punctuation">,</span>\n    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"react-scripts start"</span><span class="token punctuation">,</span>\n    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"react-scripts build"</span><span class="token punctuation">,</span>\n    <span class="token property">"watch:css"</span><span class="token operator">:</span> <span class="token string">"onchange \'tailwind.css\' -- yarn build:css"</span><span class="token punctuation">,</span>\n    <span class="token property">"build:css"</span><span class="token operator">:</span> <span class="token string">"postcss ./tailwind.css -o src/css/style.css"</span><span class="token punctuation">,</span>\n    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"react-scripts test"</span><span class="token punctuation">,</span>\n    <span class="token property">"eject"</span><span class="token operator">:</span> <span class="token string">"react-scripts eject"</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre></div>',excerpt:"Setup Create a directory then:  Install these dependencies:   (It creates an empty tailwind.config.js file in the project root): Create a…",fields:{slug:"2019-11-16-Setting-Up-Tailwind"}}},{node:{frontmatter:{title:"Passing custom HTTP Header via Apollo Client",date:"November 6th, 2019",slug:"Passing-custom-HTTP-Header-via-Apollo-Client/"},html:'<p>Today I wanted to send along an array as a parameter with all queries from client to server. But I wanted to find a quick way to accomplish the task as changing all queries took a tremendous amount of time. One thing that came to my mind was making use of Apollo Client by adding a custom header every time a request is sent to the server. <code class="language-text">Apollo Link</code> is a state management library for our client-side dashboard. It comes with something called <code class="language-text">Link</code> which is more like the concept of middleware but in a much more flexible and elegant way. The cool thing about this feature is that they are chainable so that we can snap together and define the functionality to handle GraphQL requests by the client. So when we issue a GraphQL request, every single link is applied one after another. So it\'s the best place to add the custom header:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> addOrigin <span class="token operator">=</span> <span class="token function">setContext</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> headers <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> IDs <span class="token operator">=</span> <span class="token keyword">await</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"IDs"</span><span class="token punctuation">)</span>\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    headers<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n      <span class="token operator">...</span>headers<span class="token punctuation">,</span>\n      customHeaderName<span class="token punctuation">:</span> IDs<span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n<span class="token keyword">const</span> links <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token comment">/* other links */</span> addOrigin<span class="token punctuation">,</span> httpLink<span class="token punctuation">]</span>\n\n<span class="token keyword">export</span> <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApolloClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  cache<span class="token punctuation">,</span>\n  link<span class="token punctuation">:</span> ApolloLink<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>links<span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>\n<p>On the backend we are using <code class="language-text">graphql-dotnet</code> so all I had to do was to define a class and populate the header:</p>\n<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">AddUserContextBuilder</span><span class="token punctuation">(</span>context <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">GraphQLUserContext</span> <span class="token punctuation">{</span> User <span class="token operator">=</span> context<span class="token punctuation">.</span>User<span class="token punctuation">,</span> Headers <span class="token operator">=</span> context<span class="token punctuation">.</span>Request<span class="token punctuation">.</span>Headers<span class="token punctuation">}</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">AddGraphTypes</span><span class="token punctuation">(</span>ServiceLifetime<span class="token punctuation">.</span>Scoped<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GraphQLUserContext</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token class-name">IHeaderDictionary</span> Headers <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre></div>\n<p>The code captures the headers and then make it available in resolve methods:</p>\n<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyGraphType</span> <span class="token punctuation">:</span> <span class="token class-name">ObjectGraphType</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token function">MyGraphType</span><span class="token punctuation">(</span><span class="token class-name">MyService</span> myService<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        Field<span class="token operator">&lt;</span>ListGraphType<span class="token operator">&lt;</span>MyType<span class="token operator">>></span><span class="token punctuation">(</span>\n            <span class="token string">"items"</span><span class="token punctuation">,</span>\n            resolve<span class="token punctuation">:</span> context <span class="token operator">=></span>\n            <span class="token punctuation">{</span>\n                <span class="token keyword">var</span> headers <span class="token operator">=</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token class-name">UserContext</span> <span class="token keyword">as</span> <span class="token keyword">dynamic</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token class-name">Headers</span> <span class="token keyword">as</span> IHeaderDictionary<span class="token punctuation">;</span>\n                <span class="token keyword">var</span> ids <span class="token operator">=</span> headers<span class="token punctuation">?</span><span class="token punctuation">[</span><span class="token string">"customHeaderName"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> myService<span class="token punctuation">.</span><span class="token function">GetAllAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n                <span class="token keyword">var</span> ids <span class="token operator">=</span> <span class="token punctuation">(</span>ids<span class="token punctuation">.</span>Value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">.</span>Parse<span class="token punctuation">)</span><span class="token punctuation">;</span>\n                <span class="token keyword">return</span> myService<span class="token punctuation">.</span><span class="token function">GetAllAsync</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre></div>',excerpt:"Today I wanted to send along an array as a parameter with all queries from client to server. But I wanted to find a quick way to accomplish…",fields:{slug:"2019-11-06-Passing-custom-header-via-apollo-client"}}},{node:{frontmatter:{title:"Redux",date:"November 5th, 2019",slug:"Redux/"},html:'<ul>\n<li>Redux is a predictable state container for JavaScript apps.</li>\n<li>The whole state of your app is stored in an object tree inside a single store.</li>\n<li>The only way to change the state tree is to emit an action.</li>\n<li>To specify how the actions transform the state tree, you write pure reducers:</li>\n</ul>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">counter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">case</span> <span class="token string">"INCREMENT"</span><span class="token punctuation">:</span>\n      <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span>\n    <span class="token keyword">case</span> <span class="token string">"DECREMENT"</span><span class="token punctuation">:</span>\n      <span class="token keyword">return</span> state <span class="token operator">-</span> <span class="token number">1</span>\n    <span class="token keyword">default</span><span class="token punctuation">:</span>\n      <span class="token keyword">return</span> state\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token operator">=</span> Redux\n<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerText <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\nstore<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>render<span class="token punctuation">)</span>\n<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// calling once to render the initial state (0), then the subscribe will update subsequently</span>\n\ndocument<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">"INCREMENT"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>\n<ul>\n<li>Redux is very useful when you start getting a complicated data scenarios or complicate change of events.</li>\n<li>It\'s really going to simplify your application:</li>\n</ul>\n<img class="img-res" alt="Redux is really going to simplify your application" src="/img/redux.png">\n<ul>\n<li>Setting up Redux is a bit confusing but once you set it up, it\'s going to pay off over the lifespan of the application.</li>\n<li>Store is immutable, we can\'t mutate any value on the store, we only ever create a brand new store object:</li>\n</ul>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token parameter">reducer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">let</span> state\n  <span class="token keyword">let</span> listeners <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>\n\n  <span class="token keyword">const</span> <span class="token function-variable function">getState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> state\n\n  <span class="token keyword">const</span> <span class="token function-variable function">subscribe</span> <span class="token operator">=</span> <span class="token parameter">listener</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    listeners<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      listeners <span class="token operator">=</span> listeners<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">l</span> <span class="token operator">=></span> l <span class="token operator">!==</span> listeners<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">const</span> <span class="token function-variable function">dispatch</span> <span class="token operator">=</span> <span class="token parameter">action</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    state <span class="token operator">=</span> <span class="token function">reducer</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span>\n    listeners<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">listener</span> <span class="token operator">=></span> <span class="token function">listener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    getState<span class="token punctuation">,</span>\n    subscribe<span class="token punctuation">,</span>\n    dispatch<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre></div>\n<ul>\n<li>Subscribtions have to be added before dispatching actions.</li>\n</ul>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// Library code</span>\n<span class="token keyword">function</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token parameter">reducer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">let</span> state\n  <span class="token keyword">let</span> listeners <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>\n\n  <span class="token keyword">const</span> <span class="token function-variable function">getState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> state\n\n  <span class="token keyword">const</span> <span class="token function-variable function">subscribe</span> <span class="token operator">=</span> <span class="token parameter">listener</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    listeners<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      listeners <span class="token operator">=</span> listeners<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">l</span> <span class="token operator">=></span> l <span class="token operator">!==</span> listener<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">const</span> <span class="token function-variable function">dispatch</span> <span class="token operator">=</span> <span class="token parameter">action</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    state <span class="token operator">=</span> <span class="token function">reducer</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span>\n    listeners<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">listener</span> <span class="token operator">=></span> <span class="token function">listener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    getState<span class="token punctuation">,</span>\n    subscribe<span class="token punctuation">,</span>\n    dispatch<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> <span class="token constant">INCREMENT</span> <span class="token operator">=</span> <span class="token string">"INCREMENT"</span>\n<span class="token keyword">const</span> <span class="token constant">DECREMENT</span> <span class="token operator">=</span> <span class="token string">"DECREMENT"</span>\n\n<span class="token comment">// Reducers</span>\n<span class="token keyword">const</span> <span class="token function-variable function">counter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">case</span> <span class="token constant">INCREMENT</span><span class="token punctuation">:</span>\n      <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span>\n    <span class="token keyword">case</span> <span class="token constant">DECREMENT</span><span class="token punctuation">:</span>\n      <span class="token keyword">return</span> state <span class="token operator">-</span> <span class="token number">1</span>\n    <span class="token keyword">default</span><span class="token punctuation">:</span>\n      <span class="token keyword">return</span> state\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span>\n\n<span class="token keyword">const</span> unsubscribe <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n<span class="token comment">// Action creators</span>\n<span class="token keyword">function</span> <span class="token function">incrementAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    type<span class="token punctuation">:</span> <span class="token constant">INCREMENT</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">function</span> <span class="token function">decrementAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    type<span class="token punctuation">:</span> <span class="token constant">DECREMENT</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\nstore<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">incrementAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\nstore<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">incrementAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\nstore<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">incrementAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\nstore<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">decrementAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>\n<ul>\n<li>We are going to wrap entire React application with one Provider component, So when the store changes it re-render the whole application.</li>\n</ul>',excerpt:"Redux is a predictable state container for JavaScript apps. The whole state of your app is stored in an object tree inside a single store…",fields:{slug:"2019-11-05-Redux"}}},{node:{frontmatter:{title:"Initializing state using class field declaration",date:"October 29th, 2019",slug:"Initializing-state-using-class-field-declaration/"},html:'<p>If you want to initialize state in a class based component we have two options:</p>\n<ul>\n<li>In constructor</li>\n<li>As a class property</li>\n</ul>\n<p>For class based components I used to initialize state in the constructor:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span>\n\n<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">SampleComponent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>\n      items<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n        <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getRandomInt</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"Item 1"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getRandomInt</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"Item 2"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function-variable function">getRandomInt</span> <span class="token operator">=</span> <span class="token parameter">max</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>max<span class="token punctuation">)</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>ul<span class="token operator">></span>\n                        \n        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> <span class="token punctuation">(</span>\n          <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">></span>\n            <span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span> <span class="token operator">-</span> <span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span>\n          <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>\n        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n                    \n      <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>\n    <span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre></div>\n<p>This approach is fine, but you will have to make sure you call <code class="language-text">super(props)</code>. Sometimes we might forget to call <code class="language-text">super(props)</code> in the constructor; in this case, the parent\'s constructor won\'t be executed, which will cause the following error:</p>\n<blockquote>\n<p>ReferenceError: Must call the <code class="language-text">super(props)</code> constructor in derived class before accessing \'this\' or returning from derived constructor</p>\n</blockquote>\n<p>It\'s where using class field declaration comes in handy. It saves us a few keystrokes, so you don\'t need to worry about calling <code class="language-text">super(props)</code> anymore. So the previous example can be written as:</p>\n<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span>\n\n<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">SampleComponent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  <span class="token function-variable function">getRandomInt</span> <span class="token operator">=</span> <span class="token parameter">max</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>max<span class="token punctuation">)</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n\n  state <span class="token operator">=</span> <span class="token punctuation">{</span>\n    items<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getRandomInt</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"Item 1"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getRandomInt</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"Item 2"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>ul<span class="token operator">></span>\n                        \n        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> <span class="token punctuation">(</span>\n          <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">></span>\n            <span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span> <span class="token operator">-</span> <span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span>\n          <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>\n        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n                    \n      <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>\n    <span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre></div>\n<p>The key point to remember here is that if you are going to call a method inside the <code class="language-text">state</code> (<code class="language-text">getRandomInt</code> in our case), you must declare your methods before declaring the state otherwise you will get the following error:</p>\n<blockquote>\n<p>TypeError: this.getRandomInt is not a function</p>\n</blockquote>\n<p>If you are using TypeScript then it has got your back and immediately yelling at you:</p>\n<img class="img-res" src="/img/typescript_state.png">',excerpt:"If you want to initialize state in a class based component we have two options: In constructor As a class property For class based…",fields:{slug:"2019-10-29-React"}}}]}}}}}]);
//# sourceMappingURL=component---src-pages-blog-js-7305ed25ff6cc03b2c57.js.map