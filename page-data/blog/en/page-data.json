{"componentChunkName":"component---src-pages-blog-en-js","path":"/blog/en/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"timeToRead":2,"frontmatter":{"title":"MySQL - Transforming JSON data into relational tables","date":"October 24th, 2020","slug":"Transforming-JSON-data-into-relational-tables/","tags":["MySQL","SQL"]},"html":"<p>Given that you have a table called <code>Products</code> in your database, one of its columns is of type <code>JSON</code> which has product's metadata:</p>\n<pre><code class=\"language-json\">[\n  {\n    \"id\": \"1\",\n    \"name\": \"Lorem ipsum jacket\",\n    \"price\": 12.45,\n    \"discount\": 10,\n    \"offerEnd\": \"October 5, 2020 12:11:00\",\n    \"rating\": 4,\n    \"saleCount\": 54,\n    \"tag\": [\"fashion\", \"men\", \"jacket\", \"full sleeve\"],\n    \"variation\": [\n      {\n        \"color\": \"white\",\n        \"image\": \"/assets/img/product/fashion/1.jpg\",\n        \"size\": [\n          {\n            \"name\": \"x\",\n            \"stock\": 3\n          },\n          {\n            \"name\": \"m\",\n            \"stock\": 2\n          },\n          {\n            \"name\": \"xl\",\n            \"stock\": 5\n          }\n        ]\n      },\n      {\n        \"color\": \"black\",\n        \"image\": \"/assets/img/product/fashion/8.jpg\",\n        \"size\": [\n          {\n            \"name\": \"x\",\n            \"stock\": 4\n          },\n          {\n            \"name\": \"m\",\n            \"stock\": 7\n          },\n          {\n            \"name\": \"xl\",\n            \"stock\": 9\n          },\n          {\n            \"name\": \"xxl\",\n            \"stock\": 1\n          }\n        ]\n      },\n    ],\n    \"image\": [\n      \"/assets/img/product/fashion/1.jpg\",\n      \"/assets/img/product/fashion/3.jpg\",\n    ],\n    \"shortDescription\": \"Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur.\",\n    \"fullDescription\": \"Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur? Nor again is there anyone who loves or pursues or desires to obtain pain of itself, because it is pain, but because occasionally circumstances occur in which toil and pain can procure him some great pleasure. To take a trivial example, which of us ever undertakes laborious physical exercise, except to obtain some advantage from it? But who has any right to find fault with a man who chooses to enjoy a pleasure that has no annoying consequences, or one who avoids a pain that produces no resultant pleasure?\"\n  },\n</code></pre>\n<p>MySQL provides some built-in functions to work with JSON data. One of which is <code>JSON_TABLE</code> which maps JSON data into a temporary relational table:</p>\n<pre><code class=\"language-sql\">SELECT\n      ANY_VALUE(jData.id) AS id,\n\t    jData.name,\n\t    GROUP_CONCAT(IFNULL(color, \"---\") SEPARATOR \"-\") AS colors,\n\t    COUNT(color) AS numberOfColors,\n      ANY_VALUE(jData.price) AS price,\n      ANY_VALUE(IFNULL(STR_TO_DATE(jData.offerEnd, \"%M %d, %Y %H:%i:%s\"), \"---\")) AS offerEnd,\n      ANY_VALUE(jData.rating) AS rating,\n      ANY_VALUE(jData.saleCount) AS saleCount\nFROM Products,\n\tJSON_TABLE(\n\t\tdata,\n\t\t\"$[*]\"\n\t\tCOLUMNS (\n\t\t\tid INT PATH \"$.id\",\n\t\t\tname NVARCHAR(100) PATH \"$.name\",\n            price DECIMAL(13, 2) PATH \"$.price\",\n            tags TEXT PATH \"$.tag[*]\",\n            NESTED PATH \"$.variation[*]\" COLUMNS (\n\t\t\t\tcolor TEXT PATH \"$.color\"\n            ),\n            rating INT PATH \"$.rating\",\n            discount FLOAT PATH \"$.discount\",\n            offerEnd TEXT PATH \"$.offerEnd\",\n\t\t\tsaleCount INT PATH \"$.saleCount\"\n\t\t)\n\t) AS jData\nGROUP BY jData.name\nORDER BY id\n</code></pre>\n<p>Which returns the following result:</p>\n<img class=\"img-res\" src=\"/img/json_table.png\" alt=\"json_table\" />\n<h3></h3>\n<p>You can find more info on MySQL documentation:\n<a href=\"https://dev.mysql.com/doc/refman/8.0/en/json.html\">https://dev.mysql.com/doc/refman/8.0/en/json.html</a></p>","excerpt":"Given that you have a table called Products in your database, one of its columns is of type JSON which has product's metadata: MySQLâ€¦"}},{"node":{"timeToRead":3,"frontmatter":{"title":"Getting Started With Sequelize","date":"October 12th, 2020","slug":"getting-started-with-sequelize/","tags":["Node.js","Sequelize"]},"html":"<p>Sequelize is an Object Relational Mapper (ORM) which enables us to query and manipulate data stored in a relational database. There are several ORM for Node.js out there. Sequelize is one of them and it's pretty popular. In this short tutorial we will have a quick look at Sequelize then we will write a simple Node.js application to connect to a MySQL database.</p>\n<h2>Setting up the project</h2>\n<p>To start off, head over to command line and type the following commands to initialise the project:</p>\n<pre><code class=\"language-js\">take sequelize_todo\nyarn init -y\nyarn add sequelize mysql2 dotenv ts-node typescript -D\n</code></pre>\n<p>Next, create a file called <code>dbConnection.ts</code> in the root of the project:</p>\n<pre><code class=\"language-js\">import { Sequelize } from \"sequelize\"\n\nconst sequelize = new Sequelize({\n  dialect: \"mysql\",\n  username: process.env.DATABASE_USERNAME,\n  password: process.env.DATABASE_PASSWORD,\n  database: process.env.DATABASE_NAME,\n  port: +process.env.DATABASE_PORT || 3306,\n})\n\nexport const database = {\n  sequelize,\n}\n</code></pre>\n<p>As you can see we have constructed an object using <code>Sequelize</code> constructor. This class needs some options which are required to connect to our MySQL database (that's why we have set <code>dialect</code> to \"mysql\". You can changes that to connect to other relational databases like SQL server, ...). Then we exported the newly created object.</p>\n<p>Next, create an <code>index.ts</code> file in the root of the project:</p>\n<pre><code class=\"language-js\">import * as dotenv from \"dotenv\"\ndotenv.config()\nimport { database } from \"./dbConnection\"\n\n;(async () => {\n  await database.sequelize.sync()\n})()\n</code></pre>\n<p>The first couple of lines are used to load <code>.env</code> file into <code>process.env</code>. This means that we will need to create another file in the root of the project to define our secret values:</p>\n<pre><code class=\"language-js\">DATABASE_HOST = localhost\nDATABASE_USERNAME = root\nDATABASE_PASSWORD = PASSWORD\nDATABASE_NAME = DBNAME\nDATABASE_PORT = 3306\n</code></pre>\n<p><strong>NOTE</strong>: Make sure you gitignore the <code>.env</code> file before pushing the code into remote repository.</p>\n<h2>Creating your first entity</h2>\n<p>Now we need to define our entity which is an abstraction that represents a table in your database. An entity is just a class that extends <code>Model</code>. So let's create a directory called <code>models</code> then create a file called <code>User.ts</code> inside that directory:</p>\n<pre><code class=\"language-js\">import * as Sequelize from \"sequelize\"\n\nclass User extends Sequelize.Model {\n  username: string\n  createdAt: Date\n}\nexport const InitUser = (sequelize: Sequelize.Sequelize) => {\n  User.init(\n    {\n      username: Sequelize.DataTypes.STRING,\n      createdAt: Sequelize.DataTypes.DATE,\n    },\n    {\n      sequelize,\n      tableName: \"Users\",\n    }\n  )\n}\n</code></pre>\n<p>To define our entity and its properties (Columns) we need to have access to the <code>sequelize</code> object which we exported previously. So let's head over to the <code>dbConnection.ts</code> file and update the file by passing <code>sequelize</code> object to the <code>InitUser</code> (which we have just exported):</p>\n<pre><code class=\"language-js\">export const database = {\n  sequelize,\n  User: InitUser(sequelize),\n}\n</code></pre>\n<p>Now if you run the project <code>ts-node index.ts</code> you will get this error:</p>\n<pre><code class=\"language-js\">(node:11377) UnhandledPromiseRejectionWarning: SequelizeConnectionError: Unknown database 'sequelize_sample'\n</code></pre>\n<p>It's because Sequelize doesn't know how to created the database so it needs a database to start with. So let's create the schema in MySQL:</p>\n<pre><code class=\"language-sql\">CREATE SCHEMA `sequelize_sample` ;\n</code></pre>\n<p>Now if you run the project one more time, Sequelize is able to create the table for you:</p>\n<pre><code class=\"language-js\">Executing (default): CREATE TABLE IF NOT EXISTS `Users` (`id` INTEGER NOT NULL auto_increment , `username` VARCHAR(255), `createdAt` DATETIME, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;\nExecuting (default): SHOW FULL COLUMNS FROM `Users`;\nExecuting (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'Users' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='sequelize_sample' AND REFERENCED_TABLE_NAME IS NOT NULL;\nExecuting (default): ALTER TABLE `Users` CHANGE `username` `username` VARCHAR(255);\nExecuting (default): ALTER TABLE `Users` CHANGE `createdAt` `createdAt` DATETIME;\nExecuting (default): ALTER TABLE `Users` CHANGE `updatedAt` `updatedAt` DATETIME NOT NULL;\nExecuting (default): SHOW INDEX FROM `Users` FROM `sequelize_sample`\n</code></pre>\n<p>In the next blog post I will explain how to query and manipulate data. You can find the code here on GitHub. (<a href=\"https://github.com/SirwanAfifi/sequelize_sample\">https://github.com/SirwanAfifi/sequelize_sample</a>)</p>","excerpt":"Sequelize is an Object Relational Mapper (ORM) which enables us to query and manipulate data stored in a relational database. There areâ€¦"}},{"node":{"timeToRead":6,"frontmatter":{"title":"WebSocket and React","date":"March 8th, 2020","slug":"WebSocket-and-React/","tags":["React","Realtime","SignalR","ASP.NET Core","Node.js"]},"html":"<p>WebSocket is a communication protocol. It's bidirectional in nature which means that either client or server can send data at any time. With WebSocket, we can build applications such as multiplayer games, chat apps, collaboration software that work on the open web. In this blog, I going to show you how to create a WebSocket server both in .NET Core and Node.js. I'll start with the Node.js version as it's a bit easier (boilerplate code for it is just 13 lines of code).</p>\n<h2>WebSocket Server (Node.js)</h2>\n<p>To create a WebSocket server in Node.js we need to install a third-party package called <code>socket.io</code> which is pretty popular. So follow these steps to create the server:</p>\n<pre><code>mkdir -p websocket/node &#x26;&#x26; cd \"$_\"\nyarn init -y\nyarn add express socket.io\ntouch index.js\n</code></pre>\n<p>Now open <code>index.js</code> and add the following code:</p>\n<pre><code class=\"language-js\">const app = require(\"express\")()\nconst http = require(\"http\").createServer(app)\nconst io = require(\"socket.io\")(http)\n\nio.on(\"connection\", socket => {\n  socket.on(\"message\", message => {\n    socket.broadcast.emit(\"message\", message)\n  })\n})\n\nhttp.listen(8080, () => {\n  console.log(\"listening on *:8080\")\n})\n</code></pre>\n<p>As you can see we have initialized a new instance of <code>socket.io</code> using <code>http</code>. Then we added an event listener for the <code>connection</code> event. This keeps listening to any incoming WebSocket connection so whenever a new WebSocket connection is established from the client, the callback is invoked. Inside the callback again we keep listening to the incoming request from the newly created connection, If the client emits an event called <code>message</code> we broadcast the data to other subscribers. That's it, the backend part is done. Now let's create a frontend for it.</p>\n<h2>WebSocket Client</h2>\n<p>I don't want to explain the process of creating a React app as it's pretty easy to scaffold a React application using <code>create-react-app</code>. So let's assume that we have an existing application and want to add chat functionality to it. First, make sure you have installed <code>socket.io-client</code> package. I should also mention that I'm going to use Bootstrap for stylying the components. What we are going to build is this widget:</p>\n<img class=\"img-res\" src=\"/img/chat.png\" alt=\"Chat\" />\n<p>To create such component I'll break it down into two separate components, one for each single message and the other for the chat widget. So let's go ahead and create them:</p>\n<h3>Message component</h3>\n<pre><code class=\"language-js\">import React from \"react\"\nimport user from \"../Assets/user.png\"\nexport default ({ userName, message }) => {\n  return (\n    &#x3C;>\n      &#x3C;div className=\"media\">\n        &#x3C;img\n          className=\"rounded-circle align-self-start mr-3\"\n          src={user}\n          alt=\"Avatar\"\n        />\n        &#x3C;div className=\"media-body\">\n          &#x3C;h5 className=\"mt-0\">{userName}&#x3C;/h5>\n          &#x3C;p>{message}&#x3C;/p>\n        &#x3C;/div>\n      &#x3C;/div>\n      &#x3C;div className=\"dropdown-divider\">&#x3C;/div>\n    &#x3C;/>\n  )\n}\n</code></pre>\n<h3>Chat component</h3>\n<pre><code class=\"language-js\">import React, { useState, useEffect } from \"react\"\nimport \"./Chat.css\"\nimport Message from \"./Message\"\nimport socketIOClient from \"socket.io-client\"\nconst socket = socketIOClient(\"http://localhost:8080\")\n\nexport default () => {\n  const [userName, setUserName] = useState(\"\")\n  const [message, setMessage] = useState(\"\")\n  const [messages, setMessages] = useState([])\n\n  useEffect(() => {\n    const uName = prompt(\"Name?\")\n    if (uName) {\n      setUserName(uName)\n    }\n  }, [])\n\n  socket.on(\"message\", message => {\n    setMessages([...messages, message])\n  })\n\n  return (\n    &#x3C;div className=\"wrapper\">\n      &#x3C;div className=\"card border-primary\">\n        &#x3C;h5 className=\"card-header bg-primary text-white\">\n          &#x3C;i className=\"fas fa-comment\">&#x3C;/i> Chat\n        &#x3C;/h5>\n        &#x3C;div className=\"card-body overflow-auto\">\n          {messages.map((msg, index) => (\n            &#x3C;Message\n              key={index}\n              userName={msg.userName}\n              message={msg.message}\n            />\n          ))}\n        &#x3C;/div>\n        &#x3C;div className=\"card-footer border-primary p-0\">\n          &#x3C;div className=\"input-group\">\n            &#x3C;input\n              value={message}\n              onChange={e => {\n                setMessage(e.target.value)\n              }}\n              type=\"text\"\n              className=\"form-control input-sm\"\n              placeholder=\"Type your message here...\"\n            />\n            &#x3C;button\n              className=\"btn btn-primary btn-sm\"\n              onClick={_ => {\n                const msg = {\n                  id: Math.random() * 10,\n                  message,\n                  userName: userName,\n                }\n                setMessages([...messages, msg])\n                setMessage(\"\")\n\n                socket.emit(\"message\", msg)\n              }}\n            >\n              Send\n            &#x3C;/button>\n          &#x3C;/div>\n        &#x3C;/div>\n      &#x3C;/div>\n    &#x3C;/div>\n  )\n}\n</code></pre>\n<p>As you can see we first imported <code>socket.io</code>. Then there are three parts to make it work. The first part is to connect to our WebSocket server:</p>\n<pre><code class=\"language-js\">import socketIOClient from \"socket.io-client\"\nconst socket = socketIOClient(\"http://localhost:8080\")\n</code></pre>\n<p>The second part is to listen to incoming messages from the backend. As soon as there is a new message we save it into our local state:</p>\n<pre><code class=\"language-js\">socket.on(\"message\", message => {\n  setMessages([...messages, message])\n})\n</code></pre>\n<p>The third part is when we click on <code>Send</code> button which is simply emitting a new message to the WebSocket server:</p>\n<pre><code class=\"language-js\">socket.emit(\"message\", msg)\n</code></pre>\n<p>That's it. We just built a simple chat application in just a few minutes. Now let's create the same functionality using .NET Core.</p>\n<h2>WebSocket Server (.NET Core)</h2>\n<p>To create a WebSocket server in .NET Core we should use SignalR as it's incredibly simple yet powerful library to create real-time web applications. So let's type in the following commands to create a project:</p>\n<pre><code>mkdir -p websocket/dotnet &#x26;&#x26; cd \"$_\"\ndotnet new web\n</code></pre>\n<p>Next we need something called <code>Hub</code> which is a class for listening and emitting data to subscribers. So let's create a Hub called <code>ChatHub</code>:</p>\n<pre><code class=\"language-csharp\">public class ChatHub : Hub\n{\n    public async Task Message(MessageModel message)\n    {\n        await Clients.Others.SendAsync(\"message\", message);\n    }\n}\n\npublic class MessageModel\n{\n    public string UserName { get; set; }\n    public string Message { get; set; }\n}\n</code></pre>\n<p>Then we will need to configure the server to respond to WebSocket requests. So let's change <code>Startup.cs</code> as the following:</p>\n<pre><code class=\"language-csharp\">public class Startup\n{\n    public void ConfigureServices(IServiceCollection services)\n    {\n        services.AddCors(o => o.AddPolicy(\"CorsPolicy\", builder =>\n        {\n            builder\n            .AllowAnyMethod()\n            .AllowAnyHeader()\n            .WithOrigins(\"http://localhost:3000\");\n        }));\n        services.AddSignalR();\n    }\n    public void Configure(IApplicationBuilder app, IWebHostEnvironment env)\n    {\n        app.UseCors(\"CorsPolicy\");\n\n\n        app.UseRouting();\n        app.UseEndpoints(endpoints =>\n        {\n            endpoints.MapHub&#x3C;ChatHub>(\"/chatHub\", options =>\n            {\n                options.Transports = HttpTransportType.WebSockets;\n            });\n        });\n    }\n}\n</code></pre>\n<p>It worth mentioning that SignalR includes some built-in transports to keep the underlying connection open. It means that it automatically chooses the most efficient transport type during an initial stage called negotiation. In the code, we have purposely set <code>WebSockets</code> transport by passing in a second argument to <code>MapHub</code> method. This is because the main focus of this blog post. But you can set other supported transports if you want to, If you don't explicitly set the transports, SignalR will use the most efficient type for you as mentioned. That's it. The server is now ready to communicate with the client. Unfortunately, the client part needs a couple of changes as the <code>socket.io-client</code> package doesn't support SignalR for its server as they are different in implementation. It means that we need to change the client code and the way it communicates with the server. First, we need to install an official Microsoft package:</p>\n<pre><code>yarn add @microsoft/signalr\n</code></pre>\n<p>Since the component structure is almost the same with one we had in <code>socket.io-client</code> so I'll just add the differences. First we need to import the SignalR package:</p>\n<pre><code class=\"language-js\">import {\n  HubConnectionBuilder,\n  LogLevel,\n  HttpTransportType,\n} from \"@microsoft/signalr\"\n</code></pre>\n<p>Then we need to have a way to initialize and open the connection. We could do that by defining a <code>useEffect</code> hook:</p>\n<pre><code class=\"language-js\">const [connection, setConnection] = useState();\n\nuseEffect(\n  configSocket();\n  // as before\n}, []);\n\nconst configSocket = async () => {\n  const socketConnection = new HubConnectionBuilder()\n    .configureLogging(LogLevel.Debug)\n    .withUrl(\"http://localhost:5000/chatHub\", {\n      skipNegotiation: true,\n      transport: HttpTransportType.WebSockets,\n    })\n    .build();\n  await socketConnection.start();\n  setConnection(socketConnection);\n}\n</code></pre>\n<p>We only want to initialize <code>connection</code> when the component mounts that's why we provided an empty array as a second argument for the effect hook. Next we need to listen to any incoming message:</p>\n<pre><code class=\"language-js\">connection &#x26;&#x26;\n  connection.on(\"message\", message => {\n    setMessages([...messages, message])\n  })\n</code></pre>\n<p>As the final step we need a way to emit the messages when a user clicks on <code>Send</code> button:</p>\n<pre><code class=\"language-js\">&#x3C;button\n  className=\"btn btn-primary btn-sm\"\n  onClick={_ => {\n    // as before\n\n    connection &#x26;&#x26; connection.invoke(\"message\", msg)\n  }}\n>\n  Send\n&#x3C;/button>\n</code></pre>\n<p>That's all we need to do to configure SignalR into our React application. Now you can run the project and see the result:</p>\n<img class=\"img-res\" src=\"/img/chat-demo.gif\" alt=\"Chat\" />\n<br/>\n<p><strong>Note</strong>: If you want to host the SignalR server on IIS you will have to enable WebSocket on IIS because it's not enabled by default. You can follow <a href=\"https://docs.microsoft.com/en-us/aspnet/core/fundamentals/websockets?view=aspnetcore-3.1#iisiis-express-support\">this process</a> to enable it:</p>\n<img class=\"img-res\" src=\"/img/IIS_WebSocket.png\" alt=\"Enabling WebSockets on IIS\" />\n<br/>\n<p>Source code (<a href=\"https://github.com/SirwanAfifi/realtime\">https://github.com/SirwanAfifi/realtime</a>)</p>","excerpt":"WebSocket is a communication protocol. It's bidirectional in nature which means that either client or server can send data at any time. Withâ€¦"}},{"node":{"timeToRead":3,"frontmatter":{"title":"Displaying Secured Images","date":"January 25th, 2020","slug":"Displaying-Secured-Images/","tags":["Node.js","Express","React","JavaScript"]},"html":"<p>Ran into an interesting problem this week with displaying secured images on the page. The problem is that <code>img</code> tag doesn't show the image if the resource is secured with a token or a username/password. When the browser encounters an image tag with a secured URL, it's unable to show the image, so it immediately responds with 401 Unauthorized error because the request is heading towards a protected resource. To show the problem, consider the following endpoint which requires the caller to pass in a token:</p>\n<pre><code class=\"language-js\">// server.js\napp.get(\"/downloadSecuredImage\", authentication, (req, res) => {\n  res.sendFile(`${__dirname}/images/Me.jpg`)\n})\n</code></pre>\n<p>As you can see, the Express framework provides a <code>sendFile()</code> method available on the response object which can be used to send static files to the client. It automatically sets appropriate headers to the response. I should also mention the token validation takes place using a custom Express middleware:</p>\n<pre><code class=\"language-js\">const jwt = require(\"jsonwebtoken\")\nconst database = require(\"../db/users\")\n\nconst authentication = async (req, res, next) => {\n  try {\n    const token = req.header(\"Authorization\").replace(\"Bearer \", \"\")\n    const decoded = await jwt.verify(token, \"SUPER_SECRET_PRIVATE_KEY\")\n    const user = database.users.some(u => u.email === decoded.user)\n    if (!user) {\n      throw new Error(\"Invalid credentials\")\n    }\n    req.user = decoded.user\n    next()\n  } catch (exception) {\n    console.log(exception)\n    res.status(401).send(exception)\n  }\n}\n\nmodule.exports = authentication\n</code></pre>\n<p>Now if we want an <code>img</code> tag to point to that endpoint, we get <code>401 Unauthorized</code> error, and the result would be the following image:</p>\n<img class=\"img-res\" src=\"/img/secured-image-401.png\" alt=\"secured-image\" />\n<p>One solution to tackle this issue is by embedding the image using a particular format. This format is called Data URL, and we can use it inside the image's <code>src</code> attribute, So the browser does not have to make another request to get it. Here is an example of how such Data URL looks like:</p>\n<pre><code>data:image/png;base64,R0lGODlhEAAQAM...\n</code></pre>\n<p>So we'll need to issue a request of type blob (<code>responseType: \"blob\"</code>) to the protected endpoint with the JWT token provided directly from the code. This way, we don't need to hard-code the URL inside <code>src</code> attribute anymore. Once the request is completed, we then assign the response data to a variable and make use of <code>FileReader</code>'s <code>readAsDataUrl</code> method to convert the blob result to Base64-encoded string. Here is a React component doing the process:</p>\n<pre><code class=\"language-tsx\">import React, { useState } from \"react\"\nimport axios from \"axios\"\n\nexport default () => {\n  const [token, setToken] = useState(\"\")\n  const [image, setImage] = useState&#x3C;string | ArrayBuffer | null>(\"\")\n\n  const downloadImage = async () => {\n    const img = await axios(`http://localhost:4000/downloadSecuredImage`, {\n      responseType: \"blob\",\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    })\n    const blob = img.data\n    let reader = new FileReader()\n    reader.readAsDataURL(blob)\n    reader.onload = () => {\n      console.log(reader.result)\n      setImage(reader.result)\n    }\n  }\n\n  return (\n    &#x3C;div className=\"container\">\n      &#x3C;div className=\"row\">\n        &#x3C;div className=\"col\">\n          &#x3C;div className=\"form-group\">\n            &#x3C;button\n              className=\"btn btn-info\"\n              onClick={_ => downloadImage()}\n              disabled={!token}\n            >\n              Download Image\n            &#x3C;/button>\n          &#x3C;/div>\n        &#x3C;/div>\n      &#x3C;/div>\n      &#x3C;div className=\"row\">\n        &#x3C;div className=\"col\">\n          &#x3C;img\n            src=\"http://localhost:4000/downloadSecuredImage\"\n            alt=\"This is a secured image....\"\n          />\n        &#x3C;/div>\n        &#x3C;div className=\"col\">\n          {image &#x26;&#x26; &#x3C;img src={image as string} alt=\"Image\" />}\n        &#x3C;/div>\n      &#x3C;/div>\n    &#x3C;/div>\n  )\n}\n</code></pre>\n<p>Now when the button is clicked we get the file from the server and save the converted result into a state, When the browser encounters the data URL (the value of <code>image</code>), It decodes the data and constructs the original file. This way, we have embedded the image data directly into the document.</p>\n<img class=\"img-res\" src=\"/img/SecureImageDemo.gif\" alt=\"SecureImageDemo\" />","excerpt":"Ran into an interesting problem this week with displaying secured images on the page. The problem is that img tag doesn't show the image ifâ€¦"}},{"node":{"timeToRead":5,"frontmatter":{"title":"MobX with React and TypeScript","date":"January 5th, 2020","slug":"MobX-with-React-and-TypeScript/","tags":["React","State Management","MobX"]},"html":"<p>MobX is one of the popular state management libraries. One of the great things about MobX is that we can store state in a simple data structure and allow the library to take care of keeping everything up to date. The MobX API is pretty simple; in fact, it has these four simple building blocks at its core:</p>\n<ul>\n<li>Observable</li>\n<li>Actions</li>\n<li>Computed</li>\n<li>Reactions</li>\n</ul>\n<h2>Observable</h2>\n<p>The idea is that when the data changes, the observable object notifies the observers. To define a property as observable, all we need to do is to use <code>@observable</code> decorator:</p>\n<pre><code class=\"language-js\">class TodoStore {\n  @observable todos: Todo[]\n}\n</code></pre>\n<p>Now When a new value is assigned to <code>todos</code> array, the notifications will fire, and all the associated observers will be notified.</p>\n<h2>Actions</h2>\n<p>Action is a way to change an observable (update the state). To define an action, we decorate methods inside the store with <code>@action</code>:</p>\n<pre><code class=\"language-js\">@action toggleTodo = (id: string) => {\n    this.todos = this.todos.map(todo => {\n      if (todo.id === id) {\n        return {\n          ...todo,\n          completed: !todo.completed\n        };\n      }\n      return todo;\n    });\n};\n</code></pre>\n<h2>Computed</h2>\n<p>Computed can be used to derive values from the existing state or other computed values:</p>\n<pre><code class=\"language-js\">@computed get info() {\n    return {\n      total: this.todos.length,\n      completed: this.todos.filter(todo => todo.completed).length,\n      notCompleted: this.todos.filter(todo => !todo.completed).length\n    };\n}\n</code></pre>\n<h2>Reactions</h2>\n<p>Reactions track observables from inside the store itself. In the example below if the action to set <code>todos</code> is called, then it runs the second argument.</p>\n<pre><code>class TodoStore {\n  constructor() {\n    reaction(\n      () => this.todos,\n      _ => console.log(this.todos.length)\n    );\n  }\n</code></pre>\n<h1>Creating a Simple Todo App with MobX and React</h1>\n<p>Now that we have talked about the main concepts, let's create a simple todo app using React, MobX and TypeScript:</p>\n<img class=\"img-res\" src=\"/img/mobx-project.png\" alt=\"MobX project\" />\n<p>So go to the terminal, create a directory then CD into it then type in this command to scaffold a new React project:</p>\n<pre><code class=\"language-js\">npx create-react-app . --typescript\n</code></pre>\n<p>For this project, I am using Bootstrap so let's add it as a dependency to the newly created project:</p>\n<pre><code class=\"language-js\">yarn add bootstrap --save\n</code></pre>\n<p>Now go to <code>index.tsx</code> and import <code>bootstrap.css</code>:</p>\n<pre><code class=\"language-js\">import \"bootstrap/dist/css/bootstrap.css\"\n</code></pre>\n<p>Now we'll install the needed dependencies:</p>\n<pre><code class=\"language-js\">yarn add mobx mobx-react-lite uuid @types/uuid --save\n</code></pre>\n<p>The next thing we have to do is to set <code>experimentalDecorators</code> flag to true in <code>tsconfig.json</code> in order for the MobX decorators to compile properly:</p>\n<pre><code class=\"language-json\">{\n  \"compilerOptions\": {\n    // other stuff...\n\n    \"experimentalDecorators\": true\n  }\n}\n</code></pre>\n<p>After all the above stuff is done, we have MobX ready to go. Now let's create a store inside the project <code>src/stores/TodoStore.ts</code>. Add the following code to it:</p>\n<pre><code class=\"language-js\">import { observable, action, computed, reaction } from \"mobx\"\nimport { createContext } from \"react\"\nimport uuidv4 from \"uuid/v4\"\n\nexport interface Todo {\n  id?: string;\n  title: string;\n  completed: boolean;\n}\n\nclass TodoStore {\n  constructor() {\n    reaction(() => this.todos, _ => console.log(this.todos.length))\n  }\n\n  @observable todos: Todo[] = [\n    { id: uuidv4(), title: \"Item #1\", completed: false },\n    { id: uuidv4(), title: \"Item #2\", completed: false },\n    { id: uuidv4(), title: \"Item #3\", completed: false },\n    { id: uuidv4(), title: \"Item #4\", completed: false },\n    { id: uuidv4(), title: \"Item #5\", completed: true },\n    { id: uuidv4(), title: \"Item #6\", completed: false },\n  ]\n\n  @action addTodo = (todo: Todo) => {\n    this.todos.push({ ...todo, id: uuidv4() })\n  }\n\n  @action toggleTodo = (id: string) => {\n    this.todos = this.todos.map(todo => {\n      if (todo.id === id) {\n        return {\n          ...todo,\n          completed: !todo.completed,\n        }\n      }\n      return todo\n    })\n  }\n\n  @action removeTodo = (id: string) => {\n    this.todos = this.todos.filter(todo => todo.id !== id)\n  }\n\n  @computed get info() {\n    return {\n      total: this.todos.length,\n      completed: this.todos.filter(todo => todo.completed).length,\n      notCompleted: this.todos.filter(todo => !todo.completed).length,\n    }\n  }\n}\n\nexport default createContext(new TodoStore())\n</code></pre>\n<p>Now create a new folder called components in the <code>src</code> directory and add <code>TodoAdd.tsx</code> and <code>TodoList.tsx</code>.</p>\n<h3>TodoAdd</h3>\n<pre><code class=\"language-js\">import React, { useContext, useState } from \"react\"\nimport TodoStore from \"../stores/TodoStore\"\nimport { observer } from \"mobx-react-lite\"\n\nconst AddTodo = () => {\n  const [title, setTitle] = useState(\"\")\n  const todoStore = useContext(TodoStore)\n  const { addTodo, info } = todoStore\n\n  return (\n    &#x3C;>\n      &#x3C;div className=\"alert alert-primary\">\n        &#x3C;div className=\"d-inline col-4\">\n          Total items: &#x26;nbsp;\n          &#x3C;span className=\"badge badge-info\">{info.total}&#x3C;/span>\n        &#x3C;/div>\n        &#x3C;div className=\"d-inline col-4\">\n          Finished items: &#x26;nbsp;\n          &#x3C;span className=\"badge badge-info\">{info.completed}&#x3C;/span>\n        &#x3C;/div>\n        &#x3C;div className=\"d-inline col-4\">\n          Unfinished items: &#x26;nbsp;\n          &#x3C;span className=\"badge badge-info\">{info.notCompleted}&#x3C;/span>\n        &#x3C;/div>\n      &#x3C;/div>\n      &#x3C;div className=\"form-group\">\n        &#x3C;input\n          className=\"form-control\"\n          type=\"text\"\n          value={title}\n          placeholder=\"Todo title...\"\n          onChange={e => setTitle(e.target.value)}\n        />\n      &#x3C;/div>\n      &#x3C;div className=\"form-group\">\n        &#x3C;button\n          className=\"btn btn-primary\"\n          onClick={_ => {\n            addTodo({\n              title: title,\n              completed: false,\n            })\n            setTitle(\"\")\n          }}\n        >\n          Add Todo\n        &#x3C;/button>\n      &#x3C;/div>\n    &#x3C;/>\n  )\n}\n\nexport default observer(AddTodo)\n</code></pre>\n<h3>TodoList</h3>\n<pre><code class=\"language-js\">import React, { useContext } from \"react\";\nimport TodoStore from \"../stores/TodoStore\";\nimport { observer } from \"mobx-react-lite\";\n\nconst TodoList = () => {\n  const todoStore = useContext(TodoStore);\n  const { todos, toggleTodo, removeTodo } = todoStore;\n  return (\n    &#x3C;>\n      &#x3C;div className=\"row\">\n        &#x3C;table className=\"table table-hover\">\n          &#x3C;thead className=\"thead-light\">\n            &#x3C;tr>\n              &#x3C;th>Title&#x3C;/th>\n              &#x3C;th>Completed?&#x3C;/th>\n              &#x3C;th>Actions&#x3C;/th>\n            &#x3C;/tr>\n          &#x3C;/thead>\n          &#x3C;tbody>\n            {todos.map(todo => (\n              &#x3C;tr key={todo.id}>\n                &#x3C;td>{todo.title}&#x3C;/td>\n                &#x3C;td>{todo.completed ? \"âœ…\" : \"\"}&#x3C;/td>\n                &#x3C;td>\n                  &#x3C;button\n                    className=\"btn btn-sm btn-info\"\n                    onClick={_ => toggleTodo(todo.id!)}\n                  >\n                    Toggle\n                  &#x3C;/button>\n                  &#x3C;button\n                    className=\"btn btn-sm btn-danger\"\n                    onClick={_ => removeTodo(todo.id!)}\n                  >\n                    Remove\n                  &#x3C;/button>\n                &#x3C;/td>\n              &#x3C;/tr>\n            ))}\n          &#x3C;/tbody>\n        &#x3C;/table>\n      &#x3C;/div>\n    &#x3C;/>\n  );\n};\n\nexport default observer(TodoList);\n\n</code></pre>\n<p>Both components use <code>observer</code> which is an <a href=\"https://sirwan.info/archive/2019/09/22/Higher-Order-Components/\">HOC</a> to make the components observers of our store. So any changes to any of the observable will cause the React components to re-render.</p>\n<p>Thatâ€™s it ðŸš€ Youâ€™re now up and going with MobX in your React application.</p>\n<p><a href=\"https://github.com/SirwanAfifi/mobxwithts\">Here</a>'s the source for the project.</p>","excerpt":"MobX is one of the popular state management libraries. One of the great things about MobX is that we can store state in a simple dataâ€¦"}},{"node":{"timeToRead":3,"frontmatter":{"title":"Server-Sent Events and React","date":"December 15th, 2019","slug":" Server-Sent-Events-and-React/","tags":["React","Realtime","ASP.NET Core","Node.js"]},"html":"<p>Server Sents Events are realtime events sent from the server to the client. It's a way to subscribe to a data stream sent by a server. Basically, it is a long-running HTTP connection with a particular mime type. Contrary to WebSocket, Server-Sent Events are unidirectional which clients subscribe to a channel and get data from the server. Updates for the data are pushed to the client in realtime as they occur, so the client doesn't need to initiate any requests. When using SSE, we should consider these:</p>\n<ul>\n<li>Requests can be redirected HTTP 301(permanent) &#x26;\n307(temporary)</li>\n<li>Only UTF-8 decoding is supported, no binary data</li>\n<li>Protocol supports multiple type of events, default is message</li>\n<li>Clients always reconnect (no need to handle)</li>\n<li>Server sends HTTP 204 No Content to stop reconnection</li>\n<li>Limited amount of global connections per site</li>\n</ul>\n<h2>Server Implementation:</h2>\n<p>Implementing it on the server is pretty easy. All we need to do is running an endless loop. Inside the loop, we should set the somespecial HTTP headers and push the data to the response every 2 seconds:</p>\n<pre><code class=\"language-csharp\">public void Configure(IApplicationBuilder app, IWebHostEnvironment env,\n        ILogger&#x3C;Startup> loggerDebug, Datasource datasource)\n{\n    app.UseCors(\"MyPolicy\");\n\n    app.UseRouting();\n    app.UseEndpoints(endpoints =>\n    {\n        endpoints.MapGet(\"/stream\", async context =>\n        {\n            var response = context.Response;\n            response.Headers.Add(\"connection\", \"keep-alive\");\n            response.Headers.Add(\"cach-control\", \"no-cache\");\n            response.Headers.Add(\"content-type\", \"text/event-stream\");\n\n            while (true)\n            {\n                await response.Body\n                    .WriteAsync(Encoding.UTF8.GetBytes($\"data: {JsonSerializer.Serialize(datasource.GetData())}\\n\\n\"));\n\n                await response.Body.FlushAsync();\n                await Task.Delay(2 * 1000);\n            }\n\n        });\n    });\n}\n</code></pre>\n<p>Here's also a Node.js version of the server:</p>\n<pre><code class=\"language-js\">app.get(\"/stream\", (req, res) => {\n  res.set({\n    \"Content-Type\": \"text/event-stream\",\n    \"Cache-Control\": \"no-cache\",\n    Connection: \"keep-alive\",\n\n    // enabling CORS\n    \"Access-Control-Allow-Origin\": \"*\",\n    \"Access-Control-Allow-Headers\":\n      \"Origin, X-Requested-With, Content-Type, Accept\",\n  })\n\n  setInterval(() => {\n    res.write(`data: ${JSON.stringify(getData())}\\n\\n`)\n  }, 2000)\n})\n</code></pre>\n<p>As you can see, we are sending the data in a specific format:</p>\n<pre><code>data: My message\\n\\n\n</code></pre>\n<h2>Frontend Implementation</h2>\n<p>Implementing it on the client is fairly easy. All we need to do is making use of <code>EventSource</code> API, which is a standard interface to interact with the Server-Sent Events protocol. It basically opens a persistent connection to our HTTP server. The cool thing about the API is that it keeps the connection open until we call <code>EventSource.close()</code>:</p>\n<pre><code class=\"language-ts\">import React from \"react\"\n\nconst ProductList = () => {\n  const [data, setData] = React.useState([] as any)\n\n  const formatter = new Intl.NumberFormat(\"en-GB\", {\n    style: \"currency\",\n    currency: \"gbp\",\n  })\n\n  React.useEffect(() => {\n    let eventSource = new EventSource(\"http://localhost:5000/stream\")\n    eventSource.onmessage = e => updateProdutList(JSON.parse(e.data))\n  }, [])\n\n  const updateProdutList = (product: any) => {\n    setData([...product])\n  }\n\n  return (\n    &#x3C;table className=\"table table-hover\">\n      &#x3C;thead className=\"thead-dark\">\n        &#x3C;tr>\n          &#x3C;th>Id&#x3C;/th>\n          &#x3C;th>Title&#x3C;/th>\n          &#x3C;th>Price&#x3C;/th>\n        &#x3C;/tr>\n      &#x3C;/thead>\n      &#x3C;tbody>\n        {data.map((p: any) => (\n          &#x3C;tr key={p.Id}>\n            &#x3C;td>{p.Id}&#x3C;/td>\n            &#x3C;td>{p.Title}&#x3C;/td>\n            &#x3C;td>{formatter.format(p.Price)}&#x3C;/td>\n          &#x3C;/tr>\n        ))}\n      &#x3C;/tbody>\n    &#x3C;/table>\n  )\n}\n\nexport { ProductList }\n</code></pre>\n<p>Here we have passed in the SSE endpoint URL to the <code>EventSource</code> constructor. It then goes and establishes the communication channel between the React app and the server. Then we added <code>onmessage</code> event handler which is called when new data is received. <code>updateProdutList</code> is responsible for updating the state so once the data is received we update the state with the latest data. The process of subscribing to the endpoint happens once the <code>ProductList</code> component is mounted; that's why we used <code>useEffect</code> inside the component.</p>\n<p>Now we can test the application:</p>\n<img class=\"img-res\" src=\"/img/realtime.gif\" alt=\"Realtime communication\" />","excerpt":"Server Sents Events are realtime events sent from the server to the client. It's a way to subscribe to a data stream sent by a serverâ€¦"}},{"node":{"timeToRead":3,"frontmatter":{"title":"Setting Up Tailwind","date":"November 16th, 2019","slug":"Setting-Up-Tailwind/","tags":["Tailwind","PostCSS","CSS","Programming Notes"]},"html":"<h1>Setup</h1>\n<ol>\n<li>Create a directory then:</li>\n</ol>\n<p><code>npm init -y</code></p>\n<ol start=\"2\">\n<li>Install these dependencies:</li>\n</ol>\n<p><code>npm install tailwindcss postcss-cli autoprefixer</code></p>\n<ol start=\"3\">\n<li><code>npx tailwind init</code> (It creates an empty <strong>tailwind.config.js</strong> file in the project root):</li>\n</ol>\n<pre><code>module.exports = {\n  theme: {\n    extend: {}\n  },\n  variants: {},\n  plugins: []\n}\n\n</code></pre>\n<ol start=\"4\">\n<li>Create a <strong>postcss.config.js</strong> in the root of the project:</li>\n</ol>\n<pre><code>module.exports = {\n  plugins: [\n      require(\"tailwindcss\"),\n      require(\"autoprefixer\")\n  ]\n};\n</code></pre>\n<ol start=\"5\">\n<li>Create a CSS file that runs through the above process: <code>css/tailwind.css</code>:</li>\n</ol>\n<pre><code class=\"language-css\">@tailwind base;\n@tailwind components;\n@tailwind utilities;\n</code></pre>\n<ol start=\"6\">\n<li>Create a script to process the CSS through our list of PostCSS plugins:</li>\n</ol>\n<pre><code class=\"language-json\">\"scripts\": {\n    \"build\": \"postcss css/tailwind.css -o public/build/tailwind.css\"\n},\n</code></pre>\n<ol start=\"7\">\n<li>\n<p>Run the command: <code>npm run build</code>; A new CSS file is generated that has been processed through the PostCSS.</p>\n</li>\n<li>\n<p>Add an HTML file in <code>public/index.html</code> and use the tailwind classes:</p>\n</li>\n</ol>\n<pre><code class=\"language-html\">&#x3C;html lang=\"en\">\n  &#x3C;head>\n    &#x3C;meta charset=\"UTF-8\" />\n    &#x3C;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    &#x3C;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\" />\n    &#x3C;title>Tailwindcss&#x3C;/title>\n    &#x3C;link rel=\"stylesheet\" href=\"./build/tailwind.css\" />\n  &#x3C;/head>\n  &#x3C;body>\n    &#x3C;h1 class=\"text-4xl font-bold text-center text-blue-400\">Hello World!&#x3C;/h1>\n  &#x3C;/body>\n&#x3C;/html>\n</code></pre>\n<p><a href=\"https://marketplace.visualstudio.com/items?itemName=bradlc.vscode-tailwindcss\">Tailwind CSS Intellisense</a> for intelligent auto-completion in VS Code</p>\n<h2>Hover</h2>\n<pre><code class=\"language-html\">&#x3C;a class=\"bg-indigo-500 hover:bg-indigo-400\" href=\"#\">Book your escape&#x3C;/a>\n</code></pre>\n<h2>Responsive design:</h2>\n<p>Out of the box Tailwind ships with four default breakpoints:</p>\n<ul>\n<li><code>sm</code> which kicks in at 640</li>\n<li><code>md</code> which kicks in at 768</li>\n<li><code>lg</code> which kicks in at 1024</li>\n<li><code>xl</code> which kicks in at 1280</li>\n</ul>\n<pre><code class=\"language-html\">&#x3C;div class=\"mt-4 sm:mt-6 md:mt-4\">&#x3C;/div>\n</code></pre>\n<h2>Composing Utilities with <code>@apply</code>:</h2>\n<p>Change <code>tailwind.css</code> file:</p>\n<pre><code class=\"language-css\">@tailwind base;\n@tailwind components;\n\n.btn {\n  @apply inline-block bg-indigo-500 text-white px-5 py-3 rounded-lg shadow-lg uppercase tracking-wider font-semibold text-sm;\n}\n.btn:hover {\n  @apply bg-indigo-400;\n}\n.btn:focus {\n  @apply outline-none shadow-outline;\n}\n.btn:active {\n  @apply bg-indigo-600;\n}\n@screen sm {\n  .btn {\n    @apply text-base;\n  }\n}\n\n@tailwind utilities;\n</code></pre>\n<h2>Add watch script for CSS files:</h2>\n<pre><code class=\"language-json\">\"scripts\": {\n  \"watch\": \"postcss css/tailwind.css -o public/build/tailwind.css --watch\"\n},\n</code></pre>\n<h1>Adding Tailwind to a React project</h1>\n<ol>\n<li>\n<p><code>npx create-react-app tailwind</code></p>\n</li>\n<li>\n<p><code>cd tailwind</code></p>\n</li>\n<li>\n<p><code>npm install tailwindcss postcss-cli autoprefixer</code></p>\n</li>\n<li>\n<p><code>touch postcss.config.js</code>:</p>\n</li>\n</ol>\n<pre><code class=\"language-js\">module.exports = {\n  plugins: [require(\"tailwindcss\"), require(\"autoprefixer\")],\n}\n</code></pre>\n<ol start=\"5\">\n<li><code>touch tailwind.css</code>:</li>\n</ol>\n<pre><code class=\"language-css\">@tailwind base;\n@tailwind components;\n@tailwind utilities;\n</code></pre>\n<ol start=\"6\">\n<li>Add build script:</li>\n</ol>\n<pre><code class=\"language-json\">\"scripts\": {\n    \"build:css\": \"postcss ./tailwind.css -o src/css/style.css\",\n},\n</code></pre>\n<ol start=\"7\">\n<li>Update <code>public/index.html</code>:</li>\n</ol>\n<pre><code class=\"language-js\">&#x3C;body class=\"w-full bg-purple-100\">\n</code></pre>\n<ol start=\"8\">\n<li>Install <code>concurrently</code> for watching <code>tailwind.css</code> changes:</li>\n</ol>\n<pre><code class=\"language-json\">\"scripts\": {\n    \"dev\": \"concurrently \\\"yarn watch:css\\\" \\\"yarn start\\\"\",\n    \"start\": \"react-scripts start\",\n    \"build\": \"react-scripts build\",\n    \"watch:css\": \"onchange 'tailwind.css' -- yarn build:css\",\n    \"build:css\": \"postcss ./tailwind.css -o src/css/style.css\",\n    \"test\": \"react-scripts test\",\n    \"eject\": \"react-scripts eject\"\n  },\n</code></pre>","excerpt":"Setup Create a directory then: npm init -y Install these dependencies: npm install tailwindcss postcss-cli autoprefixer npx tailwind initâ€¦"}},{"node":{"timeToRead":1,"frontmatter":{"title":"Passing custom HTTP Header via Apollo Client","date":"November 6th, 2019","slug":"Passing-custom-HTTP-Header-via-Apollo-Client/","tags":["React","Apollo Client","C#","Programming Notes"]},"html":"<p>Today I wanted to send along an array as a parameter with all queries from client to server. But I wanted to find a quick way to accomplish the task as changing all queries took a tremendous amount of time. One thing that came to my mind was making use of Apollo Client by adding a custom header every time a request is sent to the server. <code>Apollo Link</code> is a state management library for our client-side dashboard. It comes with something called <code>Link</code> which is more like the concept of middleware but in a much more flexible and elegant way. The cool thing about this feature is that they are chainable so that we can snap together and define the functionality to handle GraphQL requests by the client. So when we issue a GraphQL request, every single link is applied one after another. So it's the best place to add the custom header:</p>\n<pre><code class=\"language-js\">const addOrigin = setContext(async (_, { headers }) => {\n  const IDs = await localStorage.getItem(\"IDs\")\n  return {\n    headers: {\n      ...headers,\n      customHeaderName: IDs,\n    },\n  }\n})\n\nconst links = [, /* other links */ addOrigin, httpLink]\n\nexport const client = new ApolloClient({\n  cache,\n  link: ApolloLink.from(links),\n})\n</code></pre>\n<p>On the backend we are using <code>graphql-dotnet</code> so all I had to do was to define a class and populate the header:</p>\n<pre><code class=\"language-csharp\">services.AddGraphQL()\nÂ Â Â Â .AddUserContextBuilder(contextÂ =>Â newÂ GraphQLUserContextÂ {Â UserÂ =Â context.User,Â HeadersÂ =Â context.Request.Headers})\nÂ Â Â Â .AddGraphTypes(ServiceLifetime.Scoped);\n\npublicÂ classÂ GraphQLUserContext\n{\nÂ Â Â Â publicÂ IHeaderDictionaryÂ HeadersÂ {Â get;Â set;Â }\n}\n</code></pre>\n<p>The code captures the headers and then make it available in resolve methods:</p>\n<pre><code class=\"language-csharp\">publicÂ classÂ MyGraphTypeÂ :Â ObjectGraphType\n{\nÂ Â Â Â publicÂ MyGraphType(MyServiceÂ myService)\nÂ Â Â Â {\nÂ Â Â Â Â Â Â Â Field&#x3C;ListGraphType&#x3C;MyType>>(\nÂ Â Â Â Â Â Â Â Â Â Â Â \"items\",\nÂ Â Â Â Â Â Â Â Â Â Â Â resolve:Â contextÂ =>\nÂ Â Â Â Â Â Â Â Â Â Â Â {\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â varÂ headersÂ =Â (context.UserContextÂ asÂ dynamic).HeadersÂ asÂ IHeaderDictionary;\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â varÂ idsÂ =Â headers?[\"customHeaderName\"];\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (string.IsNullOrEmpty(ids))Â returnÂ myService.GetAllAsync();\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â varÂ idsÂ =Â (ids.Value).ToString().Split(\",Â \").Select(long.Parse);\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â returnÂ myService.GetAllAsync(ids);\nÂ Â Â Â Â Â Â Â Â Â Â Â });\nÂ Â Â Â }\n}\n\n</code></pre>","excerpt":"Today I wanted to send along an array as a parameter with all queries from client to server. But I wanted to find a quick way to accomplishâ€¦"}},{"node":{"timeToRead":2,"frontmatter":{"title":"Redux","date":"November 5th, 2019","slug":"Redux/","tags":["Redux","React","Programming Notes"]},"html":"<ul>\n<li>Redux is a predictable state container for JavaScript apps.</li>\n<li>The whole state of your app is stored in an object tree inside a single store.</li>\n<li>The only way to change the state tree is to emit an action.</li>\n<li>To specify how the actions transform the state tree, you write pure reducers:</li>\n</ul>\n<pre><code class=\"language-js\">const counter = (state = 0, action) => {\n  switch (action.type) {\n    case \"INCREMENT\":\n      return state + 1\n    case \"DECREMENT\":\n      return state - 1\n    default:\n      return state\n  }\n}\n\nconst { createStore } = Redux\nconst store = createStore(counter)\n\nconst render = () => {\n  document.body.innerText = store.getState()\n}\n\nstore.subscribe(render)\nrender() // calling once to render the initial state (0), then the subscribe will update subsequently\n\ndocument.addEventListener(\"click\", () => {\n  store.dispatch({ type: \"INCREMENT\" })\n})\n</code></pre>\n<ul>\n<li>Redux is very useful when you start getting a complicated data scenarios or complicate change of events.</li>\n<li>It's really going to simplify your application:</li>\n</ul>\n<img class=\"img-res\" alt=\"Redux is really going to simplify your application\" src=\"/img/redux.png\">\n<ul>\n<li>Setting up Redux is a bit confusing but once you set it up, it's going to pay off over the lifespan of the application.</li>\n<li>Store is immutable, we can't mutate any value on the store, we only ever create a brand new store object:</li>\n</ul>\n<pre><code class=\"language-js\">function createStore(reducer) {\n  let state\n  let listeners = []\n\n  const getState = () => state\n\n  const subscribe = listener => {\n    listeners.push(listener)\n    return () => {\n      listeners = listeners.filter(l => l !== listeners)\n    }\n  }\n\n  const dispatch = action => {\n    state = reducer(state, action)\n    listeners.forEach(listener => listener())\n  }\n\n  return {\n    getState,\n    subscribe,\n    dispatch,\n  }\n}\n</code></pre>\n<ul>\n<li>Subscribtions have to be added before dispatching actions.</li>\n</ul>\n<pre><code class=\"language-js\">// Library code\nfunction createStore(reducer) {\n  let state\n  let listeners = []\n\n  const getState = () => state\n\n  const subscribe = listener => {\n    listeners.push(listener)\n    return () => {\n      listeners = listeners.filter(l => l !== listener)\n    }\n  }\n\n  const dispatch = action => {\n    state = reducer(state, action)\n    listeners.forEach(listener => listener())\n  }\n\n  dispatch({})\n\n  return {\n    getState,\n    subscribe,\n    dispatch,\n  }\n}\n\nconst INCREMENT = \"INCREMENT\"\nconst DECREMENT = \"DECREMENT\"\n\n// Reducers\nconst counter = (state = 0, action) => {\n  switch (action.type) {\n    case INCREMENT:\n      return state + 1\n    case DECREMENT:\n      return state - 1\n    default:\n      return state\n  }\n}\n\nconst store = createStore(counter)\n\nconst unsubscribe = store.subscribe(() => {\n  console.log(store.getState())\n})\n\n// Action creators\nfunction incrementAction() {\n  return {\n    type: INCREMENT,\n  }\n}\nfunction decrementAction() {\n  return {\n    type: DECREMENT,\n  }\n}\n\nstore.dispatch(incrementAction())\nstore.dispatch(incrementAction())\nstore.dispatch(incrementAction())\nstore.dispatch(decrementAction())\n</code></pre>\n<ul>\n<li>We are going to wrap entire React application with one Provider component, So when the store changes it re-render the whole application.</li>\n</ul>","excerpt":"Redux is a predictable state container for JavaScript apps. The whole state of your app is stored in an object tree inside a single storeâ€¦"}},{"node":{"timeToRead":1,"frontmatter":{"title":"Initializing state using class field declaration","date":"October 29th, 2019","slug":"Initializing-state-using-class-field-declaration/","tags":["React"]},"html":"<p>If you want to initialize state in a class based component we have two options:</p>\n<ul>\n<li>In constructor</li>\n<li>As a class property</li>\n</ul>\n<p>For class based components I used to initialize state in the constructor:</p>\n<pre><code class=\"language-js\">import React, { Component } from \"react\"\n\nexport class SampleComponent extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      items: [\n        { id: this.getRandomInt(5), name: \"ItemÂ 1\" },\n        { id: this.getRandomInt(5), name: \"ItemÂ 2\" },\n      ],\n    }\n  }\n\n  getRandomInt = max => {\n    return Math.floor(Math.random() * Math.floor(max))\n  }\n\n  render() {\n    return (\n      &#x3C;ul>\n        Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â \n        {this.state.items.map(item => (\n          &#x3C;li key={item.id}>\n            {item.name}Â -Â {item.id}\n          &#x3C;/li>\n        ))}\n        Â Â Â Â Â Â Â Â Â Â Â Â \n      &#x3C;/ul>\n    )\n  }\n}\n</code></pre>\n<p>This approach is fine, but you will have to make sure you call <code>super(props)</code>. Sometimes we might forget to call <code>super(props)</code> in the constructor; in this case, the parent's constructor won't be executed, which will cause the following error:</p>\n<blockquote>\n<p>ReferenceError: Must call the <code>super(props)</code> constructor in derived class before accessing 'this' or returning from derived constructor</p>\n</blockquote>\n<p>It's where using class field declaration comes in handy. It saves us a few keystrokes, so you don't need to worry about calling <code>super(props)</code> anymore. So the previous example can be written as:</p>\n<pre><code class=\"language-js\">import React, { Component } from \"react\"\n\nexport class SampleComponent extends Component {\n  getRandomInt = max => {\n    return Math.floor(Math.random() * Math.floor(max))\n  }\n\n  state = {\n    items: [\n      { id: this.getRandomInt(5), name: \"ItemÂ 1\" },\n      { id: this.getRandomInt(5), name: \"ItemÂ 2\" },\n    ],\n  }\n\n  render() {\n    return (\n      &#x3C;ul>\n        Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â \n        {this.state.items.map(item => (\n          &#x3C;li key={item.id}>\n            {item.name}Â -Â {item.id}\n          &#x3C;/li>\n        ))}\n        Â Â Â Â Â Â Â Â Â Â Â Â \n      &#x3C;/ul>\n    )\n  }\n}\n</code></pre>\n<p>The key point to remember here is that if you are going to call a method inside the <code>state</code> (<code>getRandomInt</code> in our case), you must declare your methods before declaring the state otherwise you will get the following error:</p>\n<blockquote>\n<p>TypeError: this.getRandomInt is not a function</p>\n</blockquote>\n<p>If you are using TypeScript then it has got your back and immediately yelling at you:</p>\n<img class=\"img-res\" src=\"/img/typescript_state.png\">","excerpt":"If you want to initialize state in a class based component we have two options: In constructor As a class property For class basedâ€¦"}},{"node":{"timeToRead":1,"frontmatter":{"title":"Flux","date":"October 27th, 2019","slug":"Flux/","tags":["React","Programming Notes"]},"html":"<h1>What's Flux?</h1>\n<ul>\n<li>A design pattern developed at Facebook to keep data flowing in one direction (unidirectional data flow)</li>\n<li>An alternative to MVC</li>\n<li>Provides a way to provide data that React will use to create the UI</li>\n</ul>\n<h1>Definitions:</h1>\n<ul>\n<li>Store: In flux, application state data in managed outside of React components in stores.</li>\n<li>Store holds and change data</li>\n<li>Stores are the only thing that can update a view in Flux</li>\n<li>An action provides the instructions and data required to make a change.</li>\n<li>Actions are dispatched using a central control component called dispatcher.</li>\n<li>The dispatcher is designed to queue up actions and dispatch them to the appropriate store.</li>\n<li>Every change requires an action.</li>\n<li>Action creators are functions that can be used to abstract away the nitty-gritty details required to build an action.</li>\n<li>Actions are object that at minimum contain a type field</li>\n<li>Dispatcher takes an action, packages it with some information and send it on to the appropriate store.</li>\n</ul>\n<img class=\"img-res\" src=\"/img/flux.png\">\n<blockquote>\n<p>Structure and Data Flow\n<a href=\"https://facebook.github.io/flux/docs/in-depth-overview/\">https://facebook.github.io/flux/docs/in-depth-overview/</a></p>\n</blockquote>\n<h1>Flux implementations</h1>\n<ul>\n<li>Flux (<a href=\"https://facebook.github.io/flux/\">https://facebook.github.io/flux/</a>)</li>\n<li>Reflux (<a href=\"https://github.com/reflux/refluxjs\">https://github.com/reflux/refluxjs</a>)</li>\n<li>Flummox (<a href=\"http://acdlite.github.io/flummox\">http://acdlite.github.io/flummox</a>)</li>\n<li>Fluxible (<a href=\"https://fluxible.io/\">https://fluxible.io/</a>)</li>\n<li>Redux (<a href=\"https://redux.js.org/\">https://redux.js.org/</a>)</li>\n<li>MobX (<a href=\"https://mobx.js.org/README.html\">https://mobx.js.org/README.html</a>)</li>\n</ul>","excerpt":"What's Flux? A design pattern developed at Facebook to keep data flowing in one direction (unidirectional data flow) An alternative to MVCâ€¦"}},{"node":{"timeToRead":1,"frontmatter":{"title":"Building Ionic React App","date":"October 21st, 2019","slug":"Building-Ionic-React-App/","tags":["React","Ionic","Programming Notes"]},"html":"<ol>\n<li>Make sure you have Node.js installed (<a href=\"https://nodejs.org/dist/v12.13.0/node-v12.13.0-x86.msi\">https://nodejs.org/dist/v12.13.0/node-v12.13.0-x86.msi</a>)</li>\n<li>Open command prompt and type in this command to create an app: npx ionic start myApp blank --type=react</li>\n<li>Make sure you have VSCode installed (<a href=\"https://code.visualstudio.com/download\">https://code.visualstudio.com/download</a>)</li>\n<li>cd into myApp</li>\n<li>Type in this command to open the project in VSCode: code .</li>\n<li>Inside App.tsx you can see something like this:\n<code>&#x3C;Route path=\"/home\" component={Home} exact={true} /></code>\nThis means that when we navigate to /home it shows a page called Home which is located inside pages directory.</li>\n<li>Run the project using this command: npx ionic serve</li>\n<li>Switch to the editor and create a new page called List.tsx with this content:</li>\n</ol>\n<pre><code class=\"language-js\">import {\n  IonContent,\n  IonHeader,\n  IonPage,\n  IonTitle,\n  IonToolbar,\n} from \"@ionic/react\"\nimport React from \"react\"\n\nconst List: React.FC = () => {\n  return (\n    &#x3C;IonPage>\n      &#x3C;IonHeader>\n        &#x3C;IonToolbar>\n          &#x3C;IonTitle>This is a sample page&#x3C;/IonTitle>\n        &#x3C;/IonToolbar>\n      &#x3C;/IonHeader>\n      &#x3C;IonContent className=\"ion-padding\">\n        {[\"Item one\", \"Item two\", \"Item 3\"].map(item => (\n          &#x3C;p key={item}>{item}&#x3C;/p>\n        ))}\n      &#x3C;/IonContent>\n    &#x3C;/IonPage>\n  )\n}\n\nexport default List\n</code></pre>\n<ol start=\"9\">\n<li>Add a new route for the newly created page inside App.tsx right after the <code>&#x3C;Route path=\"/home\" component={Home} exact={true} /></code>:</li>\n</ol>\n<pre><code class=\"language-js\">&#x3C;Route path=\"/list\" component={List} exact={true} />\n</code></pre>\n<img class=\"center-image img-res\" src=\"/img/ionic.png\" alt=\"ionic\" />","excerpt":"Make sure you have Node.js installed (https://nodejs.org/dist/v12.13.0/node-v12.13.0-x86.msi) Open command prompt and type in this commandâ€¦"}},{"node":{"timeToRead":3,"frontmatter":{"title":"Testing React Components","date":"October 2nd, 2019","slug":"Testing-React-Components/","tags":["React"]},"html":"<p><code>create-react-app</code> comes with a built-in test runner called <code>Jest</code> which is basically a tool for executing unite tests and also reporting the result. To run the test files in projects, all we need to do is type in <code>npm run test</code> command. This command searches for all test files in the project and executes them one after another. Once the tests have been run, it enters into watch mode, which means that whenever we change the test files in goes and re-run them.</p>\n<p>There are two approaches that we can use for testing a component:</p>\n<ul>\n<li>Shallow rendering</li>\n<li>Full rendering</li>\n</ul>\n<h1>Shallow rendering</h1>\n<p>Shallow rendering allows us to render a component without rendering its children. It means that it isolates the component from its children. This type of rendering makes more sense when testing a component's functionality. For example, let's say we have a blog application and want to check if the <code>App</code> component contains a header:</p>\n<pre><code class=\"language-js\">import React from \"react\"\nimport Adapter from \"enzyme-adapter-react-16\"\nimport Enzyme, { shallow } from \"enzyme\"\nimport App from \"./App\"\nimport { Header } from \"./components/Header\"\n\nEnzyme.configure({ adapter: new Adapter() })\n\nit(\"renders app component\", () => {\n  const wrapper = shallow(&#x3C;App />)\n  const header = &#x3C;Header />\n  expect(wrapper.contains(header)).toEqual(true)\n})\n</code></pre>\n<p>Since the test is using shallow rendering, the child components are not used to render it means that only the <code>App</code> component's state and props are used for when rendering the content and its children are not rendered:</p>\n<pre><code class=\"language-js\">&#x3C;Fragment>\n  &#x3C;div className=\"columns\">\n    &#x3C;div className=\"column\">\n      &#x3C;Header />\n    &#x3C;/div>\n  &#x3C;/div>\n  &#x3C;div className=\"container\">\n    &#x3C;div className=\"columns\">\n      &#x3C;div className=\"column is-8\">\n        &#x3C;List />\n      &#x3C;/div>\n      &#x3C;div className=\"column is-4\">\n        &#x3C;AuthorList />\n      &#x3C;/div>\n    &#x3C;/div>\n  &#x3C;/div>\n&#x3C;/Fragment>\n</code></pre>\n<h1>Full rendering</h1>\n<p>Full rendering means that the <code>App</code> component children are fully rendered:</p>\n<pre><code class=\"language-js\">it(\"renders app component\", () => {\n  const wrapper = mount(&#x3C;App />)\n  const header = &#x3C;Header />\n  expect(wrapper.contains(header)).toEqual(true)\n})\n</code></pre>\n<p>Which produeces the following output.</p>\n<pre><code class=\"language-html\">&#x3C;App>\n  &#x3C;div className=\"columns\">\n    &#x3C;div className=\"column\">\n      &#x3C;header>\n        &#x3C;nav className=\"navbar is-primary\">\n          &#x3C;div className=\"navbar-brand\">\n            &#x3C;a className=\"navbar-item\" href=\"https://myblog.com\">\n              &#x3C;h1>\n                My Blog\n              &#x3C;/h1>\n            &#x3C;/a>\n            &#x3C;div className=\"navbar-burger burger\">\n              &#x3C;span />\n              &#x3C;span />\n              &#x3C;span />\n            &#x3C;/div>\n          &#x3C;/div>\n          &#x3C;div className=\"navbar-menu\">\n            &#x3C;div className=\"navbar-start\">\n              &#x3C;a className=\"navbar-item\" href=\"/home\">\n                Home\n              &#x3C;/a>\n              &#x3C;a className=\"navbar-item\" href=\"/posts\">\n                Posts\n              &#x3C;/a>\n            &#x3C;/div>\n          &#x3C;/div>\n        &#x3C;/nav>\n      &#x3C;/header>\n    &#x3C;/div>\n  &#x3C;/div>\n  &#x3C;div className=\"container\">\n    &#x3C;div className=\"columns\">\n      &#x3C;div className=\"column is-8\">\n        &#x3C;List>\n          &#x3C;h1 className=\"title\">\n            Latest posts\n          &#x3C;/h1>\n          &#x3C;div className=\"box\">\n            &#x3C;ActionButton text=\"Sort\" callback=\"{[Function]}\">\n              &#x3C;button className=\"button is-primary\" onClick=\"{[Function]}\">\n                Sort\n              &#x3C;/button>\n            &#x3C;/ActionButton>\n          &#x3C;/div>\n          &#x3C;div id=\"boxDiv\" className=\"box\">\n            &#x3C;Post post=\"{{...}}\">\n              &#x3C;div className=\"panel\">\n                &#x3C;p className=\"panel-heading\">\n                  Post1\n                &#x3C;/p>\n                &#x3C;section className=\"panel-block\">\n                  &#x3C;p>\n                    Hello\n                  &#x3C;/p>\n                &#x3C;/section>\n              &#x3C;/div>\n            &#x3C;/Post>\n            &#x3C;Post post=\"{{...}}\">\n              &#x3C;div className=\"panel\">\n                &#x3C;p className=\"panel-heading\">\n                  Post2\n                &#x3C;/p>\n                &#x3C;section className=\"panel-block\">\n                  &#x3C;p>\n                    Hello\n                  &#x3C;/p>\n                &#x3C;/section>\n              &#x3C;/div>\n            &#x3C;/Post>\n            &#x3C;Post post=\"{{...}}\">\n              &#x3C;div className=\"panel\">\n                &#x3C;p className=\"panel-heading\">\n                  Post3\n                &#x3C;/p>\n                &#x3C;section className=\"panel-block\">\n                  &#x3C;p>\n                    Hello\n                  &#x3C;/p>\n                &#x3C;/section>\n              &#x3C;/div>\n            &#x3C;/Post>\n            &#x3C;Post post=\"{{...}}\">\n              &#x3C;div className=\"panel\">\n                &#x3C;p className=\"panel-heading\">\n                  Post4\n                &#x3C;/p>\n                &#x3C;section className=\"panel-block\">\n                  &#x3C;p>\n                    Hello\n                  &#x3C;/p>\n                &#x3C;/section>\n              &#x3C;/div>\n            &#x3C;/Post>\n          &#x3C;/div>\n        &#x3C;/List>\n      &#x3C;/div>\n      &#x3C;div className=\"column is-4\">\n        &#x3C;AuthorList>\n          &#x3C;h1 className=\"title\">\n            Authors\n          &#x3C;/h1>\n          &#x3C;ul className=\"list\">\n            &#x3C;a href=\"/\" className=\"list-item\">\n              Sirwan Afifi\n            &#x3C;/a>\n          &#x3C;/ul>\n        &#x3C;/AuthorList>\n      &#x3C;/div>\n    &#x3C;/div>\n  &#x3C;/div>\n&#x3C;/App>\n</code></pre>","excerpt":"create-react-app comes with a built-in test runner called Jest which is basically a tool for executing unite tests and also reporting theâ€¦"}},{"node":{"timeToRead":1,"frontmatter":{"title":"Higher-Order Components","date":"September 22nd, 2019","slug":"Higher-Order-Components/","tags":["React"]},"html":"<p>Before we get started, we need to understand what a higher-order function is. In JavaScript functions are first-class citizens because they are treated like any other variables:</p>\n<ul>\n<li>They can be created using literals:</li>\n</ul>\n<pre><code class=\"language-js\">function myFunction() {\n  // function body\n}\n</code></pre>\n<ul>\n<li>They can be assigned to other types:</li>\n</ul>\n<pre><code class=\"language-js\">var myFunction = function() {\n  // function body\n}\nmyArray.push(function() {\n  // function body\n})\nmyObj.data = function() {\n  // function body\n}\n</code></pre>\n<ul>\n<li>A function can be passed to another function as an argument:</li>\n</ul>\n<pre><code class=\"language-js\">function invoke(myFunction) {\n  myFunction()\n}\n\ninvoke(function() {\n  // function body\n})\n</code></pre>\n<ul>\n<li>A function can return another function:</li>\n</ul>\n<pre><code class=\"language-js\">function myFunction() {\n  return function() {\n    // function body, inside this scope we can also have access to outter scope\n  }\n}\n</code></pre>\n<ul>\n<li>We can add new properties to a function:</li>\n</ul>\n<pre><code class=\"language-js\">var myFunction = function() {\n  // function body\n}\nmyFunction.name = \"Function name\"\n</code></pre>\n<h2>Higher-Order Component(Function)</h2>\n<p>Now talking about Higher-Order function makes more sense. A higher-order function is basically a function that can take another function as an argument, or returns a function as a result. In React it's pretty much the same concept; It takes a component as an argument and returns a component:</p>\n<pre><code class=\"language-js\">function MyComponent(Component) {\n  return class extends Component {\n    constructor(props) {\n      super(props)\n    }\n\n    render() {\n      return &#x3C;Component {...this.props} />\n    }\n  }\n}\n</code></pre>\n<p>It's great becuase we can wrap a component with another component; this means that we can add extra functionalities to a component so it can be usfuel to share common functionality between components without repeating code. They are often used for <code>cross-cutting</code> concerns. An example of it could be private routes inside a React application:</p>\n<pre><code class=\"language-js\">import React from \"react\"\nimport { Route, Redirect } from \"react-router-dom\"\nexport const PrivateRoute = ({ component: Component, ...rest }) => (\n  &#x3C;Route\n    {...rest}\n    render={props =>\n      isUserAuthenticated() ? (\n        &#x3C;Component {...props} />\n      ) : (\n        &#x3C;Redirect\n          to={{\n            pathname: \"/login\",\n            state: { from: props.location },\n          }}\n        />\n      )\n    }\n  />\n)\n</code></pre>\n<p>Here, the <code>PrivateRoute</code> is itself a function that is used to enhance another component. The way it enhance is to wrap the incoming component with <code>Route</code> component.</p>","excerpt":"Before we get started, we need to understand what a higher-order function is. In JavaScript functions are first-class citizens because theyâ€¦"}},{"node":{"timeToRead":2,"frontmatter":{"title":"Importing JSON files into SQL Server","date":"September 18th, 2019","slug":"Importing-JSON-files-into-SQL-Server/","tags":["SQL Server","TSQL"]},"html":"<p>I was assigned to a task to import a <a href=\"https://en.wikipedia.org/wiki/GeoJSON\">GeoJSON</a> file into a SQL Server database. The file was pretty big; I couldn't even open the file in an editor. At first, I wanted to write a simple program (with C# or Python) to open the file and then loop through the entries, parse each one of the entry and then save it into the database. But it would have taken time if I followed that process. All I wanted to do was save a JSON file right into the database. That's where I gave <code>OPENROWSET</code> a try. Everything went well, and I successfully saved the file into the database:</p>\n<pre><code class=\"language-sql\">DECLARE @GeoJSON nvarchar(max)\n\nSELECT @GeoJSON = BulkColumn\n FROM OPENROWSET (BULK 'C:\\areas.json', SINGLE_CLOB) as j\n\nINSERT INTO dbo.Areas (Area,Coordinates)\nSELECT\n\tArea,\n\tCoordinates\nFROM\n    OPENJSON(@GeoJSON, '$.features')\n             WITH (\n                 Area varchar(50) '$.properties.name',\n                 Coordinates nvarchar(max) '$.geometry.coordinates' as JSON\n                 )\n</code></pre>\n<p>As you might already know, the <code>OPENROWSET</code> is a table value function which returns a table with a single column called <code>Bulk</code>. What above code does is first open the JSON file and assign it to a variable called <code>GeoJSON</code>. Then I used another table value column called <code>OPENJSON</code> to parse the JSON. The first thing we can do is to set our root element, which is <code>features</code> in my case. Then elements can be referenced with the prefix <code>$</code>. There are two important things to mention. First, if you want to save a JSON element into a string column you will need to make sure the column type is <code>nvarchar(max)</code> and you add <code>as JSON</code> inside the <code>WITH</code> clause for that specific column.</p>\n<p>You can also build a geography value if you have a column with that type:</p>\n<pre><code class=\"language-sql\">DECLARE @GeoJSON nvarchar(max)\n\nSELECT @GeoJSON = BulkColumn\n FROM OPENROWSET (BULK 'C:\\areas.json', SINGLE_CLOB) as j\n\nINSERT INTO dbo.Areas (Area,Coordinates)\nSELECT\n\tArea,\n\tCoordinates,\n    geography::STPointFromText('POINT (' + Longitude + ' ' + Latitude + ')', 4326) AS Geography,\n    Longitude,\n    Latitude\nFROM\n    OPENJSON(@GeoJSON, '$.features')\n             WITH (\n                 Area varchar(50) '$.properties.name',\n                 Coordinates nvarchar(max) '$.geometry.coordinates' as JSON,\n                 Longitude varchar(100) '$.lon',\n                 Latitude varchar(100) '$.lat'\n                 )\n</code></pre>","excerpt":"I was assigned to a task to import a GeoJSON file into a SQL Server database. The file was pretty big; I couldn't even open the file in anâ€¦"}},{"node":{"timeToRead":2,"frontmatter":{"title":"Using IHostingEnvironment in a test project","date":"August 9th, 2019","slug":"Using-IHostingEnvironment-in-a-test-project/","tags":["ASP.NET Core","xUnit",".NET Core"]},"html":"<p>Assume that you have a service which accepts <code>IHostingEnvironment</code> as its dependency:</p>\n<pre><code class=\"language-csharp\">public class MyService\n{\n    private readonly IHostingEnvironment hostingEnv;\n\n    public MyService(IHostingEnvironment hostingEnv)\n    {\n        this.hostingEnv = hostingEnv;\n    }\n\n    public Task&#x3C;IEnumerable&#x3C;Post>> GetPosts()\n    {\n        var fileInfo = hostingEnv.ContentRootFileProvider.GetFileInfo(\"posts.json\");\n        var file = File.ReadAllText(file.PhysicalPath);\n        var deserializeObject = JsonConvert.DeserializeObject&#x3C;IEnumerable&#x3C;Post>>(file);\n        return Task.FromResult(deserializeObject);\n    }\n}\n</code></pre>\n<p>Now we wan to be able to load that JSON file inside a test project in order to test the service. First of all, we need to make sure we have these packages installed on the test project:</p>\n<pre><code class=\"language-xml\">&#x3C;ItemGroup>\nÂ Â Â Â &#x3C;PackageReference Include=\"Microsoft.AspNetCore.Hosting\" Version=\"2.2.0\" />\nÂ Â Â Â &#x3C;PackageReference Include=\"Microsoft.AspNetCore.Hosting.Abstractions\" Version=\"2.2.0\" />\nÂ Â Â Â &#x3C;PackageReference Include=\"Microsoft.Extensions.DependencyInjection\" Version=\"2.2.0\" />\nÂ Â Â Â &#x3C;PackageReference Include=\"Microsoft.Extensions.DependencyInjection.Abstractions\" Version=\"2.2.0\" />\nÂ Â Â Â &#x3C;PackageReference Include=\"Microsoft.Extensions.FileProviders.Physical\" Version=\"2.2.0\" />\nÂ Â Â Â &#x3C;PackageReference Include=\"Microsoft.NET.Test.Sdk\" Version=\"16.0.1\" />\nÂ Â Â Â &#x3C;PackageReference Include=\"xunit\" Version=\"2.4.0\" />\nÂ Â Â Â &#x3C;PackageReference Include=\"xunit.runner.visualstudio\" Version=\"2.4.0\" />\n&#x3C;/ItemGroup>\n</code></pre>\n<p>We also need to modify the csproj file to copy the JSON file to the build output:</p>\n<pre><code class=\"language-xml\">&#x3C;ItemGroup>\nÂ Â Â Â &#x3C;None Update=\"data.json\">\nÂ Â Â Â Â Â Â Â &#x3C;CopyToOutputDirectory>PreserveNewest&#x3C;/CopyToOutputDirectory>\nÂ Â Â Â &#x3C;/None>\n&#x3C;/ItemGroup>\n</code></pre>\n<p>Then we need a base class to configure the built-in DI container and register <code>IHostingEnvironment</code>:</p>\n<pre><code class=\"language-csharp\">namespace GreatSpot.Tests\n{\nÂ Â Â Â public class BaseTest\nÂ Â Â Â {\nÂ Â Â Â Â Â Â Â public static IServiceProvider Services { get; private set; }\nÂ Â Â Â Â Â Â Â public BaseTest()\nÂ Â Â Â Â Â Â Â {\nÂ Â Â Â Â Â Â Â Â Â Â Â var serviceCollection = new ServiceCollection();\nÂ Â Â Â Â Â Â Â Â Â Â Â serviceCollection.AddSingleton&#x3C;IHostingEnvironment>(new HostingEnvironment\nÂ Â Â Â Â Â Â Â Â Â Â Â {\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ContentRootFileProvider = new PhysicalFileProvider(Environment.CurrentDirectory)\nÂ Â Â Â Â Â Â Â Â Â Â Â });\nÂ Â Â Â Â Â Â Â Â Â Â Â Services = serviceCollection.BuildServiceProvider();\nÂ Â Â Â Â Â Â Â }\nÂ Â Â Â }\n}\n</code></pre>\n<p>Now we can use the registred service in our test methods:</p>\n<pre><code class=\"language-csharp\">public class PostTests : BaseTest\n{\n    [Fact]\n    public async Task Get_All_Posts()\n    {\n    Â Â Â Â var hostingEnvironment = Services.GetService&#x3C;IHostingEnvironment>();\n\n    Â Â Â Â var myService = new MyService(hostingEnvironment);\n    Â Â Â Â var data = await myService.GetPosts();\n    Â Â Â Â Assert.Equal(10, data.Count);\n    }\n}\n</code></pre>","excerpt":"Assume that you have a service which accepts IHostingEnvironment as its dependency: Now we wan to be able to load that JSON file inside aâ€¦"}},{"node":{"timeToRead":1,"frontmatter":{"title":"Migrating To Gatsby","date":"July 22nd, 2019","slug":"Migrating-To-Gatsby/","tags":["Gatsby","React","GraphQL"]},"html":"<p>Jekyll got me into blogging mostly because of its markdown support. When I first saw it, it was clear to me I had to have it. I'd say it was(still is) a fast possible way for blogging and I liked it. Also, the additional bonus was to host the blog using GitHub pages. Jekyll is excellent; It gets you started quickly without having to worry about how to set up things. Recently I decided to use JavaScript-based solutions. Gatsby has been the 1st item in my list. I've been playing around with it, and so far I'm quite happy. It's basically a framework based on React and GraphQL that makes it easy to create both website and web applications. It's also a static website generator. The cool thing about Gatsby is that we can also use it for building complex web apps with data storage, authentication and more. These abstractions allow us to connect any data source to our application.</p>\n<img class=\"center-image img-res\" src=\"/img/gatsby.png\" alt=\"gatsby\" />\n<h2>Why Gatsby?</h2>\n<ul>\n<li>It's super fast</li>\n<li>It's super easy to work with</li>\n<li>It has so many features baked right in</li>\n<li>We can create a web project in a matter of minutes without needing to install/customise build tools</li>\n<li>It comes with everything we need to get started right away</li>\n</ul>\n<p>Publishing a blog post can be done in a few lines now:</p>\n<pre><code class=\"language-js\">git add . &#x26;&#x26; git commit -m \"new blog\"\nnpm run deploy:github\n</code></pre>\n<p>I feel like everything feels more under control now:</p>\n<img class=\"center-image img-res\" src=\"/img/gatsby_project.png\" alt=\"gatsby\" />","excerpt":"Jekyll got me into blogging mostly because of its markdown support. When I first saw it, it was clear to me I had to have it. I'd say it wasâ€¦"}},{"node":{"timeToRead":2,"frontmatter":{"title":"Morse code","date":"July 8th, 2019","slug":"Programming-challenges-morse-code/","tags":["Algorithm","React","Morse"]},"html":"<img class=\"center-image img-res\" src=\"/img/morse_code.png\" alt=\"Morse Code table\" />\n<p>Morse Code is a set of dots and dashes (short mark, dot or 'dit' (Â·) and longer mark, dash or 'dah' (-)). Basically, it's a character encoding scheme for transmitting cryptographic messages which used in telecommunication. Think of it as the early version of texting. The system is named after the American artist Samuel Finley Breese Morse who co-developed an electrical telegraph system at the beginning of 1836. In fact it was heavily used for (secret) transmissions during WWI and WWII. Different combination of dots and dashes will produce different letters it also means that different combination of letters will be eventually your encoded messages.</p>\n<img class=\"center-image img-res\" src=\"/img/International_Morse_Code.svg\" alt=\"Morse Code table\" />\n<p>I thought it might be a good idea to write my name in Morse code to see how it looks like. Since I am a lazy developer, so I ended up writing a React application to do the job for me:</p>\n<img class=\"center-image img-res\" src=\"/img/morse_code_translator.gif\" alt=\"Morse Code video\" />\n<p>Here's the implementation in JavaScript:</p>\n<pre><code class=\"language-js\">const language = {\n  alphabets: {\n    A: \"â€¢âˆ’\",\n    B: \"âˆ’â€¢â€¢â€¢\",\n    C: \"âˆ’â€¢âˆ’â€¢\",\n    D: \"âˆ’â€¢â€¢\",\n    E: \"â€¢\",\n    F: \"â€¢â€¢âˆ’â€¢\",\n    G: \"âˆ’âˆ’â€¢\",\n    H: \"â€¢â€¢â€¢â€¢\",\n    I: \"â€¢â€¢\",\n    J: \"â€¢âˆ’âˆ’âˆ’\",\n    K: \"âˆ’â€¢âˆ’\",\n    M: \"âˆ’âˆ’\",\n    N: \"âˆ’â€¢\",\n    L: \"â€¢âˆ’â€¢â€¢\",\n    N: \"âˆ’â€¢\",\n    O: \"âˆ’âˆ’âˆ’\",\n    P: \"â€¢âˆ’âˆ’â€¢\",\n    Q: \"âˆ’âˆ’â€¢âˆ’\",\n    R: \"â€¢âˆ’â€¢\",\n    S: \"â€¢â€¢â€¢\",\n    T: \"âˆ’\",\n    U: \"â€¢â€¢âˆ’\",\n    V: \"â€¢â€¢âˆ’\",\n    W: \"â€¢âˆ’âˆ’\",\n    X: \"âˆ’â€¢â€¢âˆ’\",\n    Y: \"âˆ’â€¢âˆ’âˆ’\",\n    Z: \"âˆ’âˆ’â€¢â€¢\",\n  },\n  numeral: {\n    \"1\": \"â€¢âˆ’âˆ’âˆ’âˆ’\",\n    \"2\": \"â€¢â€¢âˆ’âˆ’âˆ’\",\n    \"3\": \"â€¢â€¢âˆ’âˆ’\",\n    \"4\": \"â€¢â€¢â€¢âˆ’\",\n    \"5\": \"â€¢â€¢â€¢â€¢â€¢\",\n    \"6\": \"âˆ’â€¢â€¢â€¢â€¢\",\n    \"7\": \"âˆ’âˆ’â€¢â€¢â€¢\",\n    \"8\": \"âˆ’âˆ’âˆ’â€¢â€¢\",\n    \"9\": \"âˆ’âˆ’âˆ’âˆ’â€¢\",\n    \"0\": \"âˆ’âˆ’âˆ’âˆ’âˆ’\",\n  },\n  punctuations: {\n    \"â€¢\": \"â€¢âˆ’â€¢âˆ’â€¢âˆ’\",\n    \",\": \"âˆ’âˆ’â€¢â€¢âˆ’âˆ’\",\n    \"?\": \"â€¢â€¢âˆ’âˆ’â€¢â€¢\",\n    \":\": \"âˆ’âˆ’âˆ’â€¢â€¢â€¢\",\n    \";\": \"âˆ’â€¢âˆ’â€¢âˆ’â€¢\",\n    \"âˆ’\": \"âˆ’â€¢â€¢â€¢â€¢âˆ’\",\n    \"/\": \"âˆ’â€¢â€¢âˆ’â€¢\",\n    '\"': \"â€¢âˆ’â€¢â€¢âˆ’â€¢\",\n    \"'\": \"â€¢âˆ’âˆ’âˆ’âˆ’â€¢\",\n    \"(\": \"âˆ’â€¢âˆ’âˆ’â€¢\",\n    \")\": \"âˆ’â€¢âˆ’âˆ’â€¢âˆ’\",\n    \"=\": \"âˆ’â€¢â€¢â€¢âˆ’\",\n    \"+\": \"â€¢âˆ’â€¢âˆ’â€¢\",\n    $: \"â€¢â€¢âˆ’â€¢â€¢âˆ’\",\n    q: \"â€¢âˆ’â€¢âˆ’â€¢â€¢\",\n    _: \"â€¢â€¢âˆ’âˆ’â€¢âˆ’\",\n  },\n}\n\nconst translateToMorseCode = input => {\n  const inputArray = [...input]\n  const morseCode = inputArray.map(i => {\n    const code =\n      language.alphabets[i.toUpperCase()] ||\n      language.numeral[i] ||\n      language.punctuations[i]\n    return code || \"\"\n  })\n  return morseCode.join(\" \")\n}\n\nconst translateToEnglish = input => {\n  const inputArray = input.split(\" \")\n  const engWord = inputArray.map(i => {\n    const value =\n      Object.keys(language.alphabets).filter(key => {\n        return language.alphabets[key] === i\n      })[0] ||\n      Object.keys(language.punctuations).filter(key => {\n        return language.punctuations[key] === i\n      })[0] ||\n      Object.keys(language.numeral).filter(key => {\n        return language.numeral[key] === i\n      })[0]\n    return value ? value.toLocaleLowerCase() : \"\"\n  })\n  return engWord.join(\" \")\n}\n</code></pre>\n<p>Since the original idea of Morse Code was to signal the message in a form perceptible to the human senses, such as sound waves or visible light, so I have added the ability to play a sound while coding the message:</p>\n<pre><code class=\"language-js\">async display() {\n    this.setState({ loading: true });\n    this.setState({ output: \"\" });\n    for (let i of [...translateToMorseCode(this.state.input)]) {\n        await sleep(200);\n        if (i === \"â€¢\") {\n            playSound();\n        }\n        else if (i === \"âˆ’\") {\n            playSound();\n            playSound();\n        }\n        this.setState({ output: this.state.output + \"\" + i });\n    }\n    this.setState({ loading: false });\n}\n</code></pre>\n<p>You can grab the working sample project from <a href=\"https://github.com/SirwanAfifi/morse\">GitHub</a>.</p>","excerpt":"Morse Code is a set of dots and dashes (short mark, dot or 'dit' (Â·) and longer mark, dash or 'dah' (-)). Basically, it's a characterâ€¦"}},{"node":{"timeToRead":1,"frontmatter":{"title":"Calling Stored Procedures using Dapper","date":"June 7th, 2019","slug":"Calling-Stored-Procedures/","tags":["EF Core","Dapper","C#"]},"html":"<p>Today I wanted to call a Stored Procedure using Entity Framework Core. It is possible using <code>DbSet.FromSql()</code> method, which is one of the powerful features of Entity Framework Core. It gives us the ability to run RAW SQL queries directly against a database:</p>\n<pre><code class=\"language-csharp\">var blogs = context.Blogs\n    .FromSql(\"CALL GetBlogs\")\n    .ToList();\n</code></pre>\n<p>But the problem is that the column names in the result set must match the column names that properties are mapped to. So, for example, given this Stored Procedure:</p>\n<pre><code class=\"language-sql\">CREATE DEFINER=`root`@`%` PROCEDURE `GetBlogs`()\nBEGIN\n\tselect avg(Rating) as average, min(Rating)as minimum, max(Rating) as maximum\n\tfrom blogs\nEND\n</code></pre>\n<p>In this case, your model must be exactly the same as the result set. Otherwise, you'd get an exception. Most of our Stored Procedure use some Aggregate functions. So I had to find another solution for it which was using Dapper. As you probably know, Dapper is nothing but a set of extension methods on top of <code>IDbConnection</code>. So to use it, you will need to install <code>Dapper</code> and register it using built-in IoC container in your ASP.NET Core application:</p>\n<pre><code class=\"language-csharp\">services.AddTransient&#x3C;IDbConnection>((sp) => new MySqlConnection(configuration.GetConnectionString(\"MyConnection\")));\n\n</code></pre>\n<p>Then you can use it inside your services:</p>\n<pre><code class=\"language-csharp\">public class MyService\n{\n    private readonly IDbConnection _dbConnection;\n\n    public MyService(IDbConnection dbConnection)\n    {\n        _dbConnection = dbConnection;\n    }\n\n    public Task&#x3C;IEnumerable&#x3C;BlogViewModel>> GetBlogs(long authorId)\n    {\n        var query = _dbConnection.QueryAsync&#x3C;BlogViewModel>(\"GetBlogs\", new { AuthorId = authorId },\n            commandType: CommandType.StoredProcedure);\n        return query;\n    }\n}\n</code></pre>","excerpt":"Today I wanted to call a Stored Procedure using Entity Framework Core. It is possible using DbSet.FromSql() method, which is one of theâ€¦"}},{"node":{"timeToRead":1,"frontmatter":{"title":"Highlighting Current Link in Razor Pages","date":"May 31st, 2019","slug":"Razor-Pages-Highlight-Current-Link/","tags":["Razor","ASP.NET Core"]},"html":"<p>Let's say you have several pages in your Razor Pages application. Now you want to make the menu items active depending on the page you are currently on:</p>\n<img class=\"center-image img-res\" src=\"/img/active_menu.png\" alt=\"Active menu\" />\n<p>The solution is pretty simple; all you need to do is checking the request path in <code>_Layout</code> file. To access the Request object, you need to inject <code>IHttpContextAccessor</code> in the layout file. Before injecting this interface into our view we must register it in <code>ConfigureServices</code> method in Startup class:</p>\n<pre><code class=\"language-csharp\">public void ConfigureServices(IServiceCollection services)\n{\n    // ...\n    services.AddSingleton&#x3C;IHttpContextAccessor, HttpContextAccessor>();\n}\n</code></pre>\n<p><em>Note</em>: If you are using ASP.NET Core 2.1+ you can use <code>AddHttpContextAccessor</code> helper extension method to correctly register the <code>IHttpContextAccessor</code> with the correct lifetime (singleton):</p>\n<pre><code class=\"language-csharp\">services.AddHttpContextAccessor();\n</code></pre>\n<p>Now we should be able to access current <code>HttpContext</code> inside our views:</p>\n<pre><code class=\"language-html\">@inject Microsoft.AspNetCore.Http.IHttpContextAccessor Accessor\n&#x3C;html>\n&#x3C;head>\n    &#x3C;title>Layout&#x3C;/title>\n    &#x3C;link rel=\"stylesheet\" href=\"/css/shared.css\" />\n    @RenderSection(\"styles\", false)\n&#x3C;/head>\n&#x3C;body>\n    &#x3C;header class=\"header-shadow\">\n        &#x3C;div class=\"container is-fluid header\">\n            &#x3C;nav class=\"navbar\">\n                &#x3C;div class=\"navbar-menu navbar-end\" id=\"mainNavMenu\">\n                    &#x3C;a class=\"navbar-item @(Accessor.HttpContext.Request.Path.Value == \"/\" ? \"nav-item-selected\" : \"\" )\" href=\"/\">Home&#x3C;/a>\n                    &#x3C;a class=\"navbar-item @(Accessor.HttpContext.Request.Path.Value == \"/Services\" ? \"nav-item-selected\" : \"\" )\" href=\"/Services\">Services&#x3C;/a>\n                    &#x3C;a class=\"navbar-item @(Accessor.HttpContext.Request.Path.Value == \"/About\" ? \"nav-item-selected\" : \"\" )\" href=\"/About\">About Us&#x3C;/a>\n                    &#x3C;a class=\"navbar-item @(Accessor.HttpContext.Request.Path.Value == \"/Contact\" ? \"nav-item-selected\" : \"\" )\" href=\"/Contact\">Contact&#x3C;/a>\n                &#x3C;/div>\n            &#x3C;/nav>\n        &#x3C;/div>\n    &#x3C;/header>\n\n    @RenderBody()\n\n&#x3C;/body>\n&#x3C;/html>\n\n</code></pre>","excerpt":"Let's say you have several pages in your Razor Pages application. Now you want to make the menu items active depending on the page you areâ€¦"}},{"node":{"timeToRead":2,"frontmatter":{"title":"Passed Exam 70-483 - Programming in C#","date":"May 25th, 2019","slug":"Passed-Exam-70-483-exam/","tags":["C#","Exam"]},"html":"<p><a href=\"https://www.youracclaim.com/badges/4f0b2269-04b6-4d81-8b37-e25f7956dc4f\"><img class=\"center-image img-res\" src=\"/img/csharp_badge.png\" alt=\"CSharp notes\" /></a></p>\n<p>I have been developing with C# for a while, and I decided to pass Exam 70-483 in order to validate my skill. In order to pass the exam, you should be able to perform the following skills:</p>\n<h2>Manage program flow (25â€“30%)</h2>\n<ul>\n<li>Implement multithreading and asynchronous processing</li>\n<li>Manage multithreading</li>\n<li>Implement program flow</li>\n<li>Iterate across collection and array items; program decisions by using switch statements, if/then, and operators; evaluate expressions</li>\n<li>Create and implement events and callbacks</li>\n<li>Create event handlers; subscribe to and unsubscribe from events; use built-in delegate types to create events; create delegates; lambda expressions; anonymous methods</li>\n<li>Implement exception handling</li>\n</ul>\n<h2>Create and use types (25â€“30%)</h2>\n<ul>\n<li>Create types</li>\n<li>Consume types</li>\n<li>Enforce encapsulation</li>\n<li>Create and implement a class hierarchy</li>\n<li>Find, execute, and create types at runtime by using reflection</li>\n<li>Manage the object life cycle</li>\n<li>Manipulate strings</li>\n</ul>\n<h2>Debug applications and implement security (25â€“30%)</h2>\n<ul>\n<li>Validate application input</li>\n<li>Perform symmetric and asymmetric encryption</li>\n<li>Manage assemblies</li>\n<li>Debug an application</li>\n<li>Implement diagnostics in an application</li>\n</ul>\n<h2>Implement data access (25â€“30%)</h2>\n<ul>\n<li>Perform I/O operations</li>\n<li>Consume data</li>\n<li>Query and manipulate data and objects by using LINQ</li>\n<li>Serialize and deserialize data</li>\n<li>Store data in and retrieve data from collections</li>\n</ul>\n<p>You can check the details in the <a href=\"https://www.microsoft.com/en-us/learning/exam-70-483.aspx\">Exam 70â€“483 Official Website</a>.</p>\n<h1>Resources</h1>\n<p>These are the books I used for passing the exam.</p>\n<img class=\"center-image img-res\" src=\"/img/books.jpg\" alt=\"CSharp notes\" />\n<ul>\n<li><a href=\"https://www.amazon.com/Exam-Ref-70-483-Programming-Miles/dp/1509306986\">Exam Ref 70-483 Programming in C#, 2nd Edition By Rob Miles</a></li>\n<li><a href=\"https://www.amazon.com/C-6-0-Nutshell-Definitive-Reference/dp/1491927062/ref=sr_1_4?crid=218XJSHWO1SYD&#x26;keywords=c+in+a+nutshell&#x26;qid=1560670921&#x26;s=books&#x26;sprefix=C%23+in+a+%2Cstripbooks-intl-ship%2C380&#x26;sr=1-4\">C# 6.0 in a Nutshell: The Definitive Reference</a></li>\n</ul>\n<p>The way I read these books was by reading them from cover to cover and highlight important things:</p>\n<img class=\"center-image img-res\" src=\"/img/csharp_notes.png\" alt=\"CSharp notes\" />\n<p>I also kept track of the notes somewhere else to review them after finishing the books:</p>\n<img class=\"center-image img-res\" src=\"/img/csharp_notes_doc.png\" alt=\"CSharp notes\" />","excerpt":"I have been developing with C# for a while, and I decided to pass Exam 70-483 in order to validate my skill. In order to pass the exam, youâ€¦"}},{"node":{"timeToRead":2,"frontmatter":{"title":"Hosting React app on IIS","date":"April 9th, 2019","slug":"Hosting-react-app-on-iis/","tags":["React.js","Routing","IIS"]},"html":"<p>Today I wanted to host a React application; the first and easiest option was hosting the app using a package called <a href=\"https://github.com/zeit/serve\">serve</a> which is basically a static file serving tool. The process was easy, all I had to do was first prepare a production build of my application using <code>npm run build</code> then run the <code>npx serve</code> command inside my build's directory:</p>\n<pre><code class=\"language-js\">cd build\nserve -s\n</code></pre>\n<p>This is great but the problem is that my application is using React Router and when I wanted to navigate between pages I got <code>404</code> error:</p>\n<img class=\"center-image img-res\" src=\"/img/react-serve-404.png\" alt=\"React App 404\" />\n<p>based on the officail React docs:</p>\n<blockquote>\n<p>If you use routers that use the HTML5 pushState history API under the hood (for example, React Router with browserHistory), many static file servers will fail. For example, if you used React Router with a route for /todos/42, the development server will respond to localhost:3000/todos/42 properly, but an Express serving a production build as above will not. This is because when there is a fresh page load for a /todos/42, the server looks for the file build/todos/42 and does not find it. The server needs to be configured to respond to a request to /todos/42 by serving index.html</p>\n</blockquote>\n<p>So I decided to host the app on IIS and define a URL rewrite to redirect all unknown paths to <code>index.html</code>. URL Rewrite isn't installed by defualt so you must <a href=\"https://www.iis.net/downloads/microsoft/url-rewrite\">install</a> it if you haven't already. Here's what I did to host my React application:</p>\n<p>1- Adding a new website on IIS</p>\n<img class=\"center-image img-res\" src=\"/img/create-website-react-app.png\" alt=\"Create website on IIS for React app\" />\n<p>2- Adding the following rule to URL rewrite:</p>\n<img class=\"center-image img-res\" src=\"/img/url-rewite-ui.png\" alt=\"URL Rewrite UI\" />\n<p>As you know, this configuration is also saved in somewhere else which is the location of the newly created website inside a file called <code>web.config</code>, So this means that what we created in the UI is generated into this XML file. If we open up the file, we can see the following configuration:</p>\n<pre><code class=\"language-xml\">&#x3C;?xml version=\"1.0\"?>\n&#x3C;configuration>\n    &#x3C;system.webServer>\n        &#x3C;rewrite>\n            &#x3C;rules>\n                &#x3C;rule name=\"React Routes\" stopProcessing=\"true\">\n                    &#x3C;match url=\".*\" />\n                    &#x3C;conditions logicalGrouping=\"MatchAll\">\n                        &#x3C;add input=\"{REQUEST_FILENAME}\" matchType=\"IsFile\" negate=\"true\" />\n                        &#x3C;add input=\"{REQUEST_FILENAME}\" matchType=\"IsDirectory\" negate=\"true\" />\n                    &#x3C;/conditions>\n                    &#x3C;action type=\"Rewrite\" url=\"/index.html\" />\n                &#x3C;/rule>\n            &#x3C;/rules>\n        &#x3C;/rewrite>\n    &#x3C;/system.webServer>\n&#x3C;/configuration>\n</code></pre>\n<p>The critical part is inside the <code>rules</code> tag. The tag name is an arbitrary string you can change it to whatever you want, and then we have a pattern <code>.*</code> Which means everything using regular expression syntax, then we have our rules, we are basically saying if the input contains a file name or a directory name at the end of URL, an action occurs in this case the action is redirecting to <code>index.html</code>. You might be wondering why I set <code>stopProcessing=\"true\"</code>, by setting this flag to true it will stop the processing of further rules, and the request will be passed to the IIS request pipeline. Now the unknown paths are handed off to the client side router, and the rest is history.</p>","excerpt":"Today I wanted to host a React application; the first and easiest option was hosting the app using a package called serve which is basicallyâ€¦"}},{"node":{"timeToRead":3,"frontmatter":{"title":"Hosting a WCF Service as a Windows Service Using Topshelf","date":"March 7th, 2019","slug":"Hosting-WCF-Service/","tags":["C#","WCF"]},"html":"<p>You might be wondering why I am blogging about WCF. Is it still relevant? This is part of a legacy WCF project, and I am responsible for adding some functionalities to it, I like it though. By the way, it's been a long time since it went out of fashion, but many large enterprise applications still use it.</p>\n<p>As you know, WCF services need to run in a host process so when clients want to consume the services we need to make sure the services are alive. The host process needs to provide a host, and this host is responsible for setting up the services and listening for incoming messages then creating instances of the service and respond to the client by dispatching a call to the service class. As I mentioned in a legacy application we wanted to host our services as a Windows Service, this app had been using a Console application, but the problem with Console applications is that you need to make sure the app is open all the time. For example, if the server gets restarted you should manually open the app, you could say we should add this app as a startup process so whenever the system boots up this app is opened but we can achieve a better result by writing a Windows service instead. Windows services are a great way to run code in the background; this means that we donâ€™t need a Console Application to run the application. Once you installed the service it keeps running, we can control how to start the service for example when can set it to automatically started when the system boots or be configured when a user logs in. Both of these approaches are considered as two hosting options because they are self-hosted applications; it means that both are running inside a .NET process.</p>\n<h2>Installing Topshelf</h2>\n<p>Topshelf is an open source .NET Windows Service library, it makes the process of creating Windows services much easier for us so that we can only focus on the service functionality as opposed to setting up the boilerplate service code. To install TopShelf all we need to do is installing its NuGet package:</p>\n<pre><code>Install-Package Topshelf\n</code></pre>\n<p>The next step is wrapping your service functionality inside a class with two methods <code>Start</code> and <code>Stop</code> these methods are going to be used by TopShelf to start and stop the service:</p>\n<pre><code class=\"language-csharp\">public class MyService\n{\n    private ServiceHost usersHost;\n\n    public bool Start()\n    {\n\n        try\n        {\n            usersHost = new ServiceHost(typeof(UsersService.UsersService));\n\n            usersHost.Open();\n            Console.WriteLine(\"Service Running...\");\n            Console.WriteLine(\"Press a key to quit\");\n\n            return true;\n        }\n        catch (Exception ex)\n        {\n\n            return false;\n        }\n        finally\n        {\n            usersHost.Close();\n        }\n    }\n\n    public bool Stop()\n    {\n        usersHost.Close();\n\n        return true;\n    }\n}\n</code></pre>\n<p>The next step is adding this class to TopShelf for creating our Windows Service:</p>\n<pre><code class=\"language-csharp\">public class Program\n{\n    static void Main(string[] args)\n    {\n        HostFactory.Run(serviceConfig =>\n        {\n            serviceConfig.Service&#x3C;MyService>(serviceInstance =>\n            {\n                serviceInstance.ConstructUsing(() => new MyService());\n                serviceInstance.WhenStarted(execute => execute.Start());\n                serviceInstance.WhenStopped(execute => execute.Stop());\n            });\n\n            serviceConfig.SetServiceName(\"My Service\");\n            serviceConfig.SetDisplayName(\"My Service\");\n            serviceConfig.SetDescription(\"Hosting WCF services\");\n\n            serviceConfig.StartAutomatically();\n        });\n    }\n}\n</code></pre>\n<h2>Installing our service into Windows</h2>\n<ul>\n<li>Run Command Prompt as Admin</li>\n<li>cd into to bin\\Debug folder</li>\n<li>{AssebmlyName}.exe install</li>\n</ul>\n<h2>Adding NLog</h2>\n<p>We can add logging functionality to the mix using NLog, for doing so we first need to add the following package:</p>\n<pre><code>Install-Package Topshelf.NLog\n</code></pre>\n<p>The next step is to add the following configuration to <code>app.config</code> file:</p>\n<pre><code class=\"language-xml\">&#x3C;configSections>\n   &#x3C;section name=\"nlog\" type=\"NLog.Config.ConfigSectionHandler, NLog\"/>\n&#x3C;/configSections>\n\n&#x3C;nlog>\n    &#x3C;targets>\n      &#x3C;target name=\"consoleTarget\" type=\"Console\" />\n    &#x3C;/targets>\n    &#x3C;rules>\n      &#x3C;logger name=\"*\" minlevel=\"Debug\" writeTo=\"consoleTarget\" />\n    &#x3C;/rules>\n&#x3C;/nlog>\n</code></pre>\n<p>Then we need to register NLog service in the <code>Program.cs</code> file:</p>\n<pre><code class=\"language-csharp\">public class Program\n{\n    static void Main(string[] args)\n    {\n        HostFactory.Run(serviceConfig =>\n        {\n            serviceConfig.UseNLog();\n\n            // as before\n        });\n    }\n}\n</code></pre>\n<p>Now we can use the logger in our service:</p>\n<pre><code class=\"language-csharp\">public class MyService\n{\n    // our service declarations\n\n    private static readonly LogWriter _log = HostLogger.Get&#x3C;MyService>();\n\n     public bool Start()\n        {\n            try\n            {\n               _log.Info(\"Starting services\");\n\n</code></pre>","excerpt":"You might be wondering why I am blogging about WCF. Is it still relevant? This is part of a legacy WCF project, and I am responsible forâ€¦"}},{"node":{"timeToRead":3,"frontmatter":{"title":"What's Elasticsearch","date":"December 5th, 2018","slug":"What's-Elasticsearch/","tags":["Search","Programming Notes"]},"html":"<p>Wikipedia:</p>\n<blockquote>\n<p>Elasticsearch is a search engine based on the Lucene library. It provides a distributed, multitenant-capable full-text search engine with an HTTP web interface and schema-free JSON documents. Elasticsearch is developed in Java and is released as open source under the terms of the Apache License. Official clients are available in Java, .NET (C#), PHP, Python, Apache Groovy, Ruby and many other languages.5 According to the DB-Engines ranking, Elasticsearch is the most popular enterprise search engine followed by Apache Solr, also based on Lucene.</p>\n</blockquote>\n<p>Executing SELECT * FROM .... all the time consumes a lot of CPU also it doesn't have index, One solution would be using FTS (Full Text Search) in RDBMS but in NoSQL world If you need a high performance search engine you'd better use Elasticsearch.</p>\n<img class=\"center-image img-res\" src=\"/img/elastic_stack.jpg\" alt=\"Elastic Stack\" />\n<h3>History</h3>\n<ul>\n<li>1999 - Lucene\n<ul>\n<li>It helped all search engines back then index the data that they were adjusting from the internet and provide reasonable ways of retrieving that information based fuzzy matching.</li>\n</ul>\n</li>\n<li>2004 - Compass\n<ul>\n<li>Built on top of Lucene, the same services but in a more scalable manner, idea was to provide a distributed search solution.</li>\n</ul>\n</li>\n<li>2010 - Elasticsearch\n<ul>\n<li>Distributed, RESTful search and analytical engine</li>\n</ul>\n</li>\n</ul>\n<h3>Use cases</h3>\n<ul>\n<li>Security/log analytics</li>\n<li>Marketing = Use this data to find things:\n<ul>\n<li>How people find our website?</li>\n<li>Where they came from?</li>\n<li>What device they are using?</li>\n<li>What part of the world they are coming from?</li>\n</ul>\n</li>\n<li>Search = ES was built with idea of great search engine</li>\n</ul>\n<h3>Concepts</h3>\n<ul>\n<li>Near Real Time (NRT)</li>\n<li>Cluster:\n<ul>\n<li>collection of our nodes</li>\n<li>has a unique name</li>\n</ul>\n</li>\n<li>Node:\n<ul>\n<li>part of the cluster to store the data</li>\n<li>has a unique name</li>\n</ul>\n</li>\n<li>Index:\n<ul>\n<li>a collection of similar documents</li>\n</ul>\n</li>\n<li>Type:\n<ul>\n<li>a category or a partition of your index</li>\n</ul>\n</li>\n<li>Document:\n<ul>\n<li>in JSON format</li>\n<li>customer</li>\n<li>event</li>\n</ul>\n</li>\n</ul>\n<h3>Querying</h3>\n<ul>\n<li>Simple query:\n<ul>\n<li>get all accounts: GET bank/account/_search</li>\n<li>get all accounts in state of CA:</li>\n</ul>\n<pre><code class=\"language-js\">GET bank/account/_search\n{\n    \"query\": {\n        \"match\": {\n            \"state\": \"CA\"\n        }\n    }\n}\n</code></pre>\n-Â multiple conditions:\n<pre><code class=\"language-js\">GET bank/account/_search\n{\n    \"query\": {\n        \"bool\": {\n            \"state\": \"CA\"\n        }\n    }\n}\n</code></pre>\n<ul>\n<li>boost: 3 = three times more important than state</li>\n<li><code>_score</code>: How ES identifies the relevance of a document based on your search query</li>\n</ul>\n</li>\n</ul>\n<h3>Bulk loading data into Elasticsearch</h3>\n<p>_bulk: The endpoint for bulk api, this is where we send request to when we want to bulk load data. it expects new-line delimited JSON data (including a new-line at the very end, which is important, otherwise we'll get errors). It allows us to <code>Index</code>, <code>Create</code>, <code>Delete</code>, <code>Update</code>. When using this we need to make sure we are using <code>--data-binary</code> flag from the curl command.</p>\n<ul>\n<li>/_bulk</li>\n<li>new-line JSON</li>\n<li>Index, Create, Delete, Update</li>\n<li>--data-binary</li>\n</ul>\n<h4>How to bulk load data</h4>\n<ul>\n<li>Create a file that has some data in it:</li>\n</ul>\n<pre><code class=\"language-js\">{ \"index\" : { \"_index\" : \"indexName\", \"_type\" : \"typeName\", \"_id\": \"1\" }}\n{\"title\":\"Web Developer II\",\"author\":\"Chrysler Clerk\",\"content\":\"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Proin risus. Praesent lectus.\",\"publishedDate\":\"2018-02-03T17:51:14Z\"}\n</code></pre>\n<ul>\n<li>Load the data into Elasticsearch using curl:</li>\n</ul>\n<pre><code class=\"language-js\">curl -s -H \"Content-Type: application/x-ndjson\" -XPOST localhost:9200/_bulk --data-binary \"@reqs\"; echo\n</code></pre>","excerpt":"Wikipedia: Elasticsearch is a search engine based on the Lucene library. It provides a distributed, multitenant-capable full-text searchâ€¦"}},{"node":{"timeToRead":3,"frontmatter":{"title":"GraphQL","date":"October 28th, 2018","slug":"Graphql/","tags":["GraphQL","API"]},"html":"<p>Recently I have been working on a node stack project as a full stack JavaScript developer, it's a great experience because I'm working with talented developers. We use TypeScript on both backend and frontend which is great because I'm coming from a .NET background and couldnâ€™t be happier; Well we have types for our JS code :) But sometimes TypeScript drives me crazy for example when working with existing React libraries there are no type declarations and a lot of TypeScriptâ€™s benefits disappear so we have to write our own <code>.d.ts</code> file but it is worth it :) On the backend we use GraphQL for our APIs, so in this post, I explain my observation about this technology.</p>\n<h3>What's GraphQL?</h3>\n<img class=\"center-image img-res\" src=\"/img/graphql.jpg\" alt=\"GraphQL\" />\n<p>GraphQL is a query language for any kind of API and can fulfil any queries across multiple databases. The main benefit of using it is that you can ask for exactly what you want and you will get the result and nothing else. In this case, clients describe what they want their data and shape of it. The good point is that requests are validated against so-called <code>Schema</code>, we create this schema on our server, it basically describes the functionality available to our clients, inside this schema, we define our type definitions:</p>\n<pre><code class=\"language-js\">type User {\n    id: ID!\n    firstName: String\n    lastName: String\n    age: Int\n}\n\ntype Query {\n    users: [User]\n}\n</code></pre>\n<p>In the schema, we need a top-level type called <code>Query</code>. The server defines the queries it can accept. So, in this case, we're saying we need to return a list of users, the result is an array of type User.</p>\n<h3>Resolvers</h3>\n<p>Now we need a <code>Resolver</code> to figure out what we get back when we call <code>users</code> query. Resolvers are basically some functions that respond to queries and mutations, they are the functions that give us the results from a query.</p>\n<pre><code class=\"language-js\">const root = {\n  users: () => {\n    return [\n      { id: 1, firstName: \"Sirwan\", lastName: \"Afifi\", age: 29 },\n      { id: 2, firstName: \"User 2\", lastName: \"lastName2\", age: 20 },\n      { id: 3, firstName: \"User 3\", lastName: \"lastName3\", age: 20 },\n      { id: 4, firstName: \"User 4\", lastName: \"lastName4\", age: 20 },\n      { id: 5, firstName: \"User 5\", lastName: \"lastName5\", age: 20 },\n      { id: 6, firstName: \"User 6\", lastName: \"lastName6\", age: 20 },\n      { id: 7, firstName: \"User 7\", lastName: \"lastName7\", age: 20 },\n      { id: 8, firstName: \"User 8\", lastName: \"lastName8\", age: 20 },\n    ]\n  },\n}\n</code></pre>\n<p>Now we can query the <code>users</code> to get the result, the query gets parsed and executed against a data source on the server and the server sends back the result as JSON:</p>\n<img class=\"center-image img-res\" src=\"/img/graphiQL.png\" alt=\"GraphiQL\" />\n<p>As you can see we have intellisense for our API. In fact, GraphQL is more like TypeScript for our API, by using it we have awesome static type analyze. In traditional REST we had many requests but with GraphQL we only have one single endpoint.</p>\n<h3>Mutation types</h3>\n<p>The query type is responsible for defining what will return when we call the query. With mutation type, we can mutate (change, create) data.</p>\n<pre><code class=\"language-js\">input UserInput {\n    id: ID!\n    firstName: String\n    lastName: String\n    age: Int\n}\n\ntype Mutation {\n    createUser(input: UserInput): User\n}\n</code></pre>\n<p>The great point about a mutation is that we mutate something and we also ask for something in the result, that's why we can specify a return type for a mutation, in this case, it's <code>User</code>:</p>\n<img class=\"center-image img-res\" src=\"/img/graphQL-mutation.png\" alt=\"GraphiQL\" />\n<p>GraphQL is a convenient way for a client to communicate with the server, There is much more to talk about this technology so I will pick up again in my next article.</p>","excerpt":"Recently I have been working on a node stack project as a full stack JavaScript developer, it's a great experience because I'm working withâ€¦"}},{"node":{"timeToRead":1,"frontmatter":{"title":"React Hooks","date":"October 27th, 2018","slug":"React-Hooks/","tags":["ReactJS","TypeScript","JavaScript"]},"html":"<p>Hooks are a new feature that is coming up in React v16.7.0-alpha, it's a really great feature, I am so excited about this new feature. The goal is to use all functionalities you can do in class components in functional style components, We heavily use functional components in our project so in order to use things like State we have two options: re-writing our component using class components or simply use a package called <code>react-powerplug</code>:</p>\n<pre><code class=\"language-typescript\">import * as React from \"react\"\nimport { State } from \"react-powerplug\"\n\nconst Example = () => {\n  return (\n    &#x3C;State\n      initial={{\n        count: 0,\n      }}\n    >\n      {({ state, setState }) => (\n        &#x3C;div>\n          &#x3C;p>You clicked {state.count} times&#x3C;/p>\n          &#x3C;button onClick={() => setState({ count: state.count + 1 })}>\n            Click me\n          &#x3C;/button>\n        &#x3C;/div>\n      )}\n    &#x3C;/State>\n  )\n}\n\nexport { Example }\n</code></pre>\n<p>It is great, but we don't need to have this anymore because one of the features provided by Hooks in the new version of React is ability to have state inside a functional component. Here's the same example using React Hooks:</p>\n<pre><code class=\"language-typescript\">import { useState } from \"react\"\nimport * as React from \"react\"\n\nexport interface ReactHookProps {}\n\nconst ReactHook = (props: ReactHookProps) => {\n  const [count, setCount] = useState(0)\n\n  return (\n    &#x3C;div>\n      &#x3C;h1>Hello From ReactHook Component&#x3C;/h1>\n      &#x3C;p>You clicked {count} times&#x3C;/p>\n      &#x3C;button onClick={() => setCount(count + 1)}>Click me&#x3C;/button>\n    &#x3C;/div>\n  )\n}\n\nexport { ReactHook }\n</code></pre>\n<p>As you can see, by calling <code>useState</code> and passing a default value, it gives you two properties; one for <code>get</code> and the other for <code>set</code>. The interesting point about <code>useState</code> is that we can have multiple states inside the component:</p>\n<pre><code class=\"language-typescript\">const [person, setPerson] = useState({\n  firstName: \"Sirwan\",\n  lastName: \"Afifi\",\n  age: 29,\n})\n</code></pre>\n<p>Working with state is just one of <code>Hooks</code> functionalities, I will try to blog about the other features too.</p>\n<p>You can grab the working sample project from <a href=\"https://github.com/SirwanAfifi/react-hooks.git\">GitHub</a>.</p>\n<p>Happy coding :)</p>","excerpt":"Hooks are a new feature that is coming up in React v16.7.0-alpha, it's a really great feature, I am so excited about this new feature. Theâ€¦"}},{"node":{"timeToRead":3,"frontmatter":{"title":"Shahriban - My first Hackathon project (Challenges, Lessons Learned)","date":"June 25th, 2018","slug":"Shahriban/","tags":["Vue.js","JavaScript","Teamwork","SideProject"]},"html":"<img class=\"center-image img-res\" src=\"/img/poster-hackathon.jpg\" alt=\"Hackathon Event\" />\n<blockquote>\n<p>Image courtesy of <a href=\"http://www.liveh2h.com/img/liveh2h-announces-global-collaboration-hackathon-developer-event/\">LiveH2H</a></p>\n</blockquote>\n<p>As you probably know, Hackathon is an event that programmers, designers, entrepreneurs to get together for a short period of time to collaborate on a project. The cool part of this event is delivering tasks rapidly, In fact, it's more like a Marathon for programmers. I have never participated in a hackathon before but I always wanted to give it a try because it is something I have been wanting to do for a long time. Several weeks ago I had the opportunity to participate in such event with my friends <a href=\"https://sohailabbasi.com/\">Sohail</a> and <a href=\"http://chirokydil.blogfa.com/\">Arash</a> from <a href=\"http://www.kurdsoftware.com/\">Kurdsoftware</a> group. By the way, the event was not supposed to be like a competitive sort of events, We just wanted to do something. In this blog post, I am going to share challenges we faced over the course of the event.</p>\n<h3>Challenge #1</h3>\n<p>The first challenge for us was picking a project to implement so we decided to brainstorm as many ideas as possible then we tried to write them down. At this point, we had a big picture of all potential ideas. At the end of the day we ended up to an interesting one, <a href=\"https://shahriban.com/\">Shahriban</a>; the idea was to implement a platform for reporting local issues in a city. it's more like a collaborative culture, something a citizen should do but does not have to do, to make their community better. Our goal was to encourage citizens across our city to be involved in process of improving the city. You can read more about Shahriban here(<a href=\"https://sohailabbasi.com/shahriban-social-capital-iran/\">English</a>, <a href=\"http://foad-ansari.ir/%d8%b4%d9%87%d8%b1%db%8c-%d8%a8%d8%a7%d9%86-%d9%86%da%af%d9%87%d8%a8%d8%a7%d9%86-%d8%b4%d9%87%d8%b1/\">Persian</a>, <a href=\"http://chirokydil.blogfa.com/post/71\">Kurdish</a>):</p>\n<img class=\"center-image img-res\" src=\"/img/shahriban_homepage.png\" alt=\"Shahriban\" />\n<h3>Challenge #2</h3>\n<p>The next challenge after choosing the project was the technical side of it, Since we have different types of skills, we were not sure what language/platform to use to implement the project. we decided to keep it simple and follow <a href=\"https://en.wikipedia.org/wiki/KISS_principle\">KISS principle</a> and use something like Wordpress but the problem is that customizing Wordpress takes time and it's not simple as it sounds. So at the end, we decided to implement it from scratch so we picked PHP for the backend and Vue.js for the frontend. Sohail and Arash worked on the backend and used <a href=\"https://github.com/mevdschee/php-crud-api\">php-crud-api</a>; a single file PHP script that adds a REST API to a SQL database, So at this point we had a fully fledged RESTful API and the process went very smoothly, we had everything at our disposal quickly. On the frontend, I picked Vue.js because getting up and running with Vue.js is really simple. So I used Vue CLI to generate the project. Over the course of 2 hours we had everything in place:</p>\n<img class=\"center-image img-res\" src=\"/img/shahriban_vue_project.png\" alt=\"Shahriban\" />\n<h3>Challenge #3</h3>\n<p>The last challenge was to implement an app, Since Telegram is the most popular instant messaging app in Iran, we decided to develop a bot to do the job for us. This was really great because we didn't have to implement an app for Android, iOS:</p>\n<img class=\"center-image img-res\" src=\"/img/shahriban_screenshots.png\" alt=\"Shahriban\" />\n<p>By the way, there are some restrictions to access Telegram in Iran, Perhaps we should have developed a native app for both Android and iOS. But the problem is that at the time this was not possible for us because we didn't have an app developer in our team, I have developed some native Android apps in the past but my main focus these days is on the web so I wasn't able to do that. If you want to contribute and are interested in, or you know someone who is interested in please let us know.</p>\n<h3>Conclusion</h3>\n<p>The whole experience was really great, we learned a lot in the process and feel a lot more confident and prepared for future events. Also in addition to the experience, I think this is a best opportunity to have a little bit impact in our community.</p>","excerpt":"Image courtesy of LiveH2H As you probably know, Hackathon is an event that programmers, designers, entrepreneurs to get together for a shortâ€¦"}},{"node":{"timeToRead":5,"frontmatter":{"title":"Uploading file in Vue.js","date":"June 4th, 2018","slug":"Uploading-file-in-Vue.js/","tags":["TypeScript","Vue.js","JavaScript","ASP.NET Core"]},"html":"<p>In this blog post I am going to show you how you can upload file using Vue.js. On the backend we will use ASP.NET Core MVC to expose an endpoint to the client to receive file. Let's say we have a HTML form for saving a coffee, this form contains a file input to accept coffee's image:</p>\n<img class=\"img-res\" src=\"/img/vue-upload-file.png\" alt=\"Vue Upload File\" />\n<p>To allow the user to pick a file we need to have a reference to the file input field using <code>ref</code> attribute then we can easily access this input using <code>$refs</code> object inside our Vue instance this is like selecting an element using jQuery:</p>\n<pre><code class=\"language-html\">&#x3C;input required type=\"file\" ref=\"image\" />\n</code></pre>\n<p>As you can see we named this input <code>image</code> so we can access the element this way:</p>\n<pre><code class=\"language-js\">this.\\$refs.image\n</code></pre>\n<p>Before we can submit the form we can encapsulate functionality inside a service:</p>\n<pre><code class=\"language-js\">import axios from \"axios\"\n\nclass CoffeeService {\n  saveCoffee(coffee: any, file: any): any {\n    const formData = new FormData()\n    for (const key in coffee) {\n      if (coffee.hasOwnProperty(key)) {\n        formData.append(key, coffee[key])\n      }\n    }\n    formData.append(file.name, file)\n\n    return axios.post(\"/Coffees/SaveCoffee\", formData)\n  }\n}\n\n// Export a singletone instance in the global namespace\nexport const coffeeService = new CoffeeService()\n</code></pre>\n<p>This service has a method called <code>saveCoffee</code> which accepts two parameters one is the coffee itself and the second one is uploaded file then we are using <code>FormData</code> to combine these data together and sending it to the server using <code>axios</code> library. Keep in mind, this method returns a promise which means that the caller can use <code>then</code> syntax to get server's response. So inside the <code>CoffeeComponent</code> we can use <code>Coffeeservice</code> like this:</p>\n<pre><code class=\"language-html\">&#x3C;template>\n  &#x3C;div class=\"container\">\n    &#x3C;h3>Add a new Coffee&#x3C;/h3>\n    &#x3C;form v-on:submit.prevent=\"submitted\">\n      &#x3C;div class=\"form-group\">\n        &#x3C;label class=\"control-label\">Coffee Name&#x3C;/label>\n        &#x3C;input\n          required\n          type=\"text\"\n          class=\"form-control\"\n          name=\"Name\"\n          v-model=\"model.name\"\n        />\n      &#x3C;/div>\n\n      &#x3C;div class=\"form-group\">\n        &#x3C;label class=\"control-label\">Coffee Type&#x3C;/label>\n        &#x3C;select\n          class=\"form-control\"\n          name=\"CoffeeType\"\n          v-model=\"model.coffeeType\"\n        >\n          &#x3C;option\n            v-for=\"coffeeType in coffeeTypes\"\n            :value=\"coffeeType.value\"\n            v-bind:key=\"coffeeType.value\"\n            >{{ coffeeType.name }}&#x3C;/option\n          >\n        &#x3C;/select>\n      &#x3C;/div>\n\n      &#x3C;div class=\"form-group\">\n        &#x3C;label class=\"control-label\">Coffee Image&#x3C;/label>\n        &#x3C;input\n          required\n          type=\"file\"\n          multiple\n          class=\"form-control\"\n          name=\"Image\"\n          @change=\"fileChange\"\n          ref=\"image\"\n        />\n      &#x3C;/div>\n\n      &#x3C;button class=\"btn btn-primary\" type=\"submit\">Save&#x3C;/button>\n    &#x3C;/form>\n  &#x3C;/div>\n&#x3C;/template>\n\n&#x3C;script lang=\"ts\">\n  import Vue from \"vue\"\n  import { Component, Prop, Watch } from \"vue-property-decorator\"\n  import { coffeeService } from \"../services/CoffeeService\"\n  /// &#x3C;reference path=\"./toaster.d.ts\" />\n\n  @Component({\n    components: { UploadFileSimpleComponent },\n  })\n  export default class UploadFileSimpleComponent extends Vue {\n    coffeeTypes = [\n      { name: \"Espresso\", value: 0 },\n      { name: \"Latte\", value: 1 },\n      { name: \"Mocha\", value: 2 },\n    ]\n\n    model = {}\n\n    submitted() {\n      coffeeService\n        .saveCoffee(this.model, (&#x3C;any>this.$refs.image).files)\n        .then(function(response: any) {\n          toastr.success(response.data)\n        })\n        .catch(function(error: any) {\n          toastr.error(error)\n        })\n    }\n  }\n&#x3C;/script>\n</code></pre>\n<h3>Showing upload progress</h3>\n<p>Now we want to show upload progress, axios makes this easy all we need to do is add a third argument to the <code>post</code> method, this argument is actually an object, inside this object we can configure the request inside this object we have access to an event handler called <code>onUploadProgress</code> which we can do the calculation. let's change the <code>CoffeeService</code> to this:</p>\n<pre><code class=\"language-js\">import axios from \"axios\"\nimport { eventBus } from \"../main\"\n\nclass CoffeeService {\n  saveCoffee(coffee: any, file: any): any {\n    const formData = new FormData()\n    for (const key in coffee) {\n      if (coffee.hasOwnProperty(key)) {\n        formData.append(key, coffee[key])\n      }\n    }\n\n    formData.append(file.name, file)\n\n    let startTime = Date.now()\n\n    return axios.post(\"/Coffees/SaveCoffee\", formData, {\n      onUploadProgress: uploadEvent => {\n        const queueProgress = Math.round(\n          (uploadEvent.loaded / uploadEvent.total) * 100\n        )\n        const timeElapsed = Date.now() - startTime\n        const uploadSpeedFirst = uploadEvent.loaded / (timeElapsed / 1000)\n        const uploadTimeRemaining = Math.ceil(\n          (uploadEvent.total - uploadEvent.loaded) / uploadSpeedFirst\n        )\n        const uploadTimeElapsed = Math.ceil(timeElapsed / 1000)\n        const uploadSpeed = uploadSpeedFirst / 1024 / 1024\n\n        eventBus.$emit(\"uploadData\", {\n          queueProgress,\n          uploadTimeRemaining,\n          uploadTimeElapsed,\n          uploadSpeed,\n        })\n      },\n    })\n  }\n}\n\n// Export a singletone instance in the global namespace\nexport const coffeeService = new CoffeeService()\n</code></pre>\n<p>Inside the method we construct an object, this object will notify all subscribers with current progress. This notification is done using <code>$emit</code> method. We also need to update the template to show this progress:</p>\n<pre><code class=\"language-html\">&#x3C;div v-if=\"uploadDetails.queueProgress > 0\">\n  &#x3C;table class=\"table\">\n    &#x3C;thead>\n      &#x3C;tr>\n        &#x3C;th width=\"15%\">Event&#x3C;/th>\n        &#x3C;th>Status&#x3C;/th>\n      &#x3C;/tr>\n    &#x3C;/thead>\n    &#x3C;tbody>\n      &#x3C;tr>\n        &#x3C;td>&#x3C;strong>Elapsed time&#x3C;/strong>&#x3C;/td>\n        &#x3C;td nowrap>{{uploadDetails.uploadTimeElapsed | number}} second(s)&#x3C;/td>\n      &#x3C;/tr>\n      &#x3C;tr>\n        &#x3C;td>&#x3C;strong>Remaining time&#x3C;/strong>&#x3C;/td>\n        &#x3C;td nowrap>{{uploadDetails.uploadTimeRemaining | number}} second(s)&#x3C;/td>\n      &#x3C;/tr>\n      &#x3C;tr>\n        &#x3C;td>&#x3C;strong>Upload speed&#x3C;/strong>&#x3C;/td>\n        &#x3C;td nowrap>{{uploadDetails.uploadSpeed | number}} MB/s&#x3C;/td>\n      &#x3C;/tr>\n      &#x3C;tr>\n        &#x3C;td>&#x3C;strong>Queue progress&#x3C;/strong>&#x3C;/td>\n        &#x3C;td>\n          &#x3C;div\n            class=\"progress-bar progress-bar-info progress-bar-striped\"\n            role=\"progressbar\"\n            aria-valuemin=\"0\"\n            aria-valuemax=\"100\"\n            :aria-valuenow=\"uploadDetails.queueProgress\"\n            :style=\"{ 'width': uploadDetails.queueProgress + '%' }\"\n          >\n            {{uploadDetails.queueProgress}}%\n          &#x3C;/div>\n        &#x3C;/td>\n      &#x3C;/tr>\n    &#x3C;/tbody>\n  &#x3C;/table>\n&#x3C;/div>\n</code></pre>\n<p>The backend is a simple MVC controller, all it does is uploading the file and saving the coffee into the database:</p>\n<pre><code class=\"language-csharp\">public async Task&#x3C;IActionResult> SaveCoffee(Coffee coffee)\n{\n// Uploading files\nvar fileName = await UploadFiles();\n\n    // Saving data\n    coffee.Image = fileName;\n    _coffeeService.Add(coffee);\n    _coffeeService.SaveChanges();\n\n    return Json(\"Coffee has been saved!\");\n\n}\n\nprivate async Task&#x3C;string> UploadFiles()\n{\nvar uploadsRootFolder = Path.Combine(\\_environment.WebRootPath, \"uploads\");\nif (!Directory.Exists(uploadsRootFolder))\n{\nDirectory.CreateDirectory(uploadsRootFolder);\n}\n\n    var files = Request.Form.Files;\n    foreach (var file in files)\n\n    {\n        if (file == null || file.Length == 0)\n        {\n            continue;\n        }\n\n        var filePath = Path.Combine(uploadsRootFolder, file.FileName);\n        using (var fileStream = new FileStream(filePath, FileMode.Create))\n        {\n            await file.CopyToAsync(fileStream).ConfigureAwait(false);\n            return file.FileName;\n        }\n    }\n\n    return string.Empty;\n\n}\n\n</code></pre>\n<img class=\"img-res\" src=\"/img/upload-file-vue.gif\" alt=\"Upload file using Vue.js\" />\n<p>You can grab the working sample project from <a href=\"https://github.com/SirwanAfifi/vue-experiments\">GitHub</a>.</p>","excerpt":"In this blog post I am going to show you how you can upload file using Vue.js. On the backend we will use ASP.NET Core MVC to expose anâ€¦"}},{"node":{"timeToRead":4,"frontmatter":{"title":"TypeScript and Vue.js","date":"May 28th, 2018","slug":"TypeScript-and-Vue.js/","tags":["TypeScript","Vue.js","JavaScript","ASP.NET Core"]},"html":"<img class=\"img-res\" src=\"/img/vuepost.png\" alt=\"Webpack\" />\n<p>You might be wondering why do we need to worry about yet another framework when we already know there are things like Angular, React, ... the answer is simplicity. I have used Angular in some of my previous projects by Angular I mean the first version of it (AngularJS 1.x) but these days I feel like Angular team is going to force developers to migrate to Angular (2, 3, 4, 5, 6, ...). I really like Vue.js, it's really a great one because I think Vue.js is Declarative, Easy to Maintain and Powerful.\nAlso, the integration between Vue and TypeScript is really good. Just like other frameworks Vue also has CLI which helps you to scaffold your project quickly. In this blog post, I would like to show how to combine Vue.js with TypeScript inside an ASP.NET Core 2.x application.</p>\n<h3>Project Setup</h3>\n<p>The easiest way to get started is by using dotnet cli tool to create a project:</p>\n<pre><code class=\"language-bash\">dotnet new mvc --name aspnet-vue-typescript\n\n</code></pre>\n<p>Then cd to that directory and then use <code>code .</code> to open VSCode. At this point the project structure looks like this:</p>\n<img class=\"img-res\" src=\"/img/dotnet-new.png\" alt=\"Sample app\" />\n<p>To get started with our client side code we need to install some packages, for doing so we need <code>package.json</code> file:</p>\n<pre><code class=\"language-json\">{\n  \"name\": \"aspnet-vue-typescript\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" &#x26;&#x26; exit 1\"\n  },\n  \"author\": \"Sirwan Afifi\",\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"ts-loader\": \"^4.3.0\",\n    \"typescript\": \"^2.8.3\",\n    \"vue\": \"^2.5.16\",\n    \"vue-class-component\": \"^6.2.0\",\n    \"vue-property-decorator\": \"^6.1.0\",\n    \"webpack\": \"^4.9.1\",\n    \"webpack-dev-server\": \"^3.1.4\"\n  },\n  \"devDependencies\": {\n    \"aspnet-webpack\": \"^2.0.3\",\n    \"css-loader\": \"^0.28.11\",\n    \"file-loader\": \"^1.1.11\",\n    \"sass-loader\": \"^7.0.1\",\n    \"style-loader\": \"^0.21.0\",\n    \"vue-loader\": \"^15.2.1\",\n    \"vue-template-compiler\": \"^2.5.16\",\n    \"webpack-cli\": \"^2.1.4\",\n    \"webpack-hot-middleware\": \"^2.22.2\"\n  }\n}\n</code></pre>\n<p>Once you installed this packages using <code>npm install</code>, we'll create our <code>webpack.config.js</code> file:</p>\n<pre><code class=\"language-js\">let webpack = require(\"webpack\")\nconst VueLoaderPlugin = require(\"vue-loader/lib/plugin\")\nlet path = require(\"path\")\n\nmodule.exports = {\n  entry: {\n    main: \"./ClientApp/main\",\n  },\n  output: {\n    path: path.resolve(__dirname, \"wwwroot\", \"js\"),\n    filename: \"[name].js\",\n    publicPath: \"/js/\",\n  },\n  module: {\n    rules: [\n      { test: /\\.vue$/, loader: \"vue-loader\" },\n      {\n        test: /\\.tsx?$/,\n        loader: \"ts-loader\",\n        exclude: /node_modules/,\n        options: { appendTsSuffixTo: [/\\.vue$/] },\n      },\n    ],\n  },\n  resolve: {\n    extensions: [\".tsx\", \".ts\", \".js\"],\n    alias: {\n      vue$: \"vue/dist/vue.esm.js\", // 'vue/dist/vue.common.js' for webpack 1\n    },\n  },\n  optimization: {\n    splitChunks: {\n      cacheGroups: {\n        commons: {\n          test: /[\\\\/]node_modules[\\\\/]/,\n          name: \"main\",\n          chunks: \"all\",\n        },\n      },\n    },\n  },\n  plugins: [new VueLoaderPlugin()],\n}\n</code></pre>\n<p>As you can see we're telling webpack where the entry point is, so create a new directory inside the project called <code>ClientApp</code>, this directory contains all Vue's related files, Inside this directory, create a ts file called <code>main.ts</code> this file is going to be our entry point:</p>\n<pre><code class=\"language-js\">import Vue from \"vue\"\nimport MyComponent from \"./components/MyComponent.vue\"\n\nVue.config.productionTip = false\n\nconst v = new Vue({\n  el: \"#app\",\n  data() {\n    return {\n      name: \"Sirwan\",\n    }\n  },\n  components: {\n    MyComponent,\n  },\n})\n</code></pre>\n<p>Next, we have specified the output which is <code>bundle.js</code> file, this file doesn't yet exist, it's going to be created by webpack. Then we have specified TypeScript loader for webpack. Next thing left to do is adding <code>tsconfig.json</code> file to the project:</p>\n<pre><code class=\"language-js\">{\n    \"compilerOptions\": {\n        \"sourceMap\": true,\n        \"noImplicitReturns\": true,\n        \"noImplicitAny\": true,\n        \"experimentalDecorators\": true,\n        \"emitDecoratorMetadata\": true,\n        \"target\": \"es5\",\n        \"strict\": true,\n        \"module\": \"es2015\",\n        \"moduleResolution\": \"node\",\n        \"lib\": [\n            \"es2016\",\n            \"dom\"\n        ]\n    },\n    \"exclude\": [\n        \"node_modules\",\n        \"wwwroot\"\n    ]\n}\n</code></pre>\n<p>At this point if you run <code>npx webpack</code> you'll see the bundle file:</p>\n<img class=\"img-res\" src=\"/img/npx-webpack.png\" alt=\"Webpack\" />\n<p>Now we can add a script reference inside <code>Views/Shared/_Layout.cshtml</code> to <code>bundle.js</code> file:</p>\n<pre><code class=\"language-html\">&#x3C;script src=\"~/js/bundle.js\" asp-append-version=\"true\">&#x3C;/script>\n</code></pre>\n<p>Now we can use Vue inside our views:</p>\n<pre><code class=\"language-csharp\">@{\n    ViewData[\"Title\"] = \"Home Page\";\n}\n\n&#x3C;div class=\"jumbotron\">\n  &#x3C;h1 class=\"display-4\">Hello, {{ name }}&#x3C;/h1>\n&#x3C;/div>\n</code></pre>\n<h3>Hot Module Replacement</h3>\n<p>Webpack has something called Hot <a href=\"https://webpack.js.org/concepts/hot-module-replacement/\">Module Replacement</a>:</p>\n<blockquote>\n<p>Hot Module Replacement (HMR) exchanges, adds, or removes modules while an application is running, without a full reload. This can significantly speed up development in a few ways:\nRetain application state which is lost during a full reload.\nSave valuable development time by only updating what's changed.\nTweak styling faster -- almost comparable to changing styles in the browser's debugger.</p>\n</blockquote>\n<p>For adding this functionality we need to install <code>webpack-hot-middleware</code> package:</p>\n<pre><code class=\"language-bash\">npm i -D webpack-hot-middleware\n\n</code></pre>\n<p>Then we need to register this component into MVC's HTTP request pipeline in the <code>Configure</code> method, for doing this we need to install <a href=\"https://www.nuget.org/packages/Microsoft.AspNetCore.SpaServices\">Microsoft.AspNetCore.SpaServices</a>:</p>\n<pre><code class=\"language-csharp\">app.UseWebpackDevMiddleware(new WebpackDevMiddlewareOptions\n{\n    HotModuleReplacement = true\n});\n</code></pre>\n<p>This middleware looks for webpack file and automatically executes it for us when we change client side code:</p>\n<img class=\"img-res\" src=\"/img/reload-webpack.gif\" alt=\"Webpack\" />","excerpt":"You might be wondering why do we need to worry about yet another framework when we already know there are things like Angular, Reactâ€¦"}},{"node":{"timeToRead":4,"frontmatter":{"title":"Developing Console-based UI in C#","date":"May 2nd, 2018","slug":"Developing-Console-based-UI-in-C/","tags":["C#",".NET Core"]},"html":"<p>As you know Console Applications don't have graphical user interface or GUI. Instead, they run from Command Line, for example instead of writing a name into a textbox and clicking a button we would instead invoke the Console Application and provide the name as a parameter. In fact, in Console Applications we instead interact with the user using text inputs. For example, we could prompt something like this:</p>\n<img class=\"img-res\" src=\"/img/consoleTest.jpg\" />\n<p>The user can then write a name and hit enter then we can read that text input into our application.</p>\n<p>Wouldn't be better to make it beautiful? This is where we can use <a href=\"https://github.com/migueldeicaza/gui.cs\">Terminal.Gui</a> a cross-platform GUI toolkit:</p>\n<img class=\"img-res\" src=\"/img/guics.png\" alt=\"Sample app\" />\n<blockquote>\n<p>Terminal.Gui is a library intended to create console-based applications using C#. The framework has been designed to make it easy to write applications that will work on monochrome terminals, as well as modern color terminals with mouse support. This library works across Windows, Linux and MacOS.</p>\n</blockquote>\n<p>Using this UI toolkit is pretty simple, all you need to do is adding its package into your project:</p>\n<pre><code>dotnet add package Terminal.Gui\n</code></pre>\n<p>The simplest application looks like this:</p>\n<pre><code class=\"language-csharp\">using System;\n\nnamespace consoleTest\n{\n    using Terminal.Gui;\n\n    class Demo {\n        static int Main ()\n        {\n            Application.Init ();\n\n            var n = MessageBox.Query (50, 7,\n                \"Question\", \"Do you like console apps?\", \"Yes\", \"No\");\n\n            return n;\n        }\n    }\n}\n\n</code></pre>\n<p>This example shows a prompt and returns an integer value depending on which value was selected by the user (Yes, No, or if they use chose not to make a decision and instead pressed the ESC key):</p>\n<img class=\"img-res\" src=\"/img/firstTerminalUIapp.png\" alt=\"Sample app\" />\n<p>As you can see the first thing to do is calling <code>Application.Init ();</code> to actually initialize the application. We can also create a window and then add a menu to it:</p>\n<pre><code class=\"language-csharp\">Application.Init ();\nvar top = Application.Top;\n\n// Creates the top-level window to show\nvar win = new Window (new Rect (0, 1, top.Frame.Width, top.Frame.Height-1), \"MyApp\");\ntop.Add (win);\n\n// Creates a menubar, the item \"New\" has a help menu.\nvar menu = new MenuBar (new MenuBarItem [] {\n    new MenuBarItem (\"_File\", new MenuItem [] {\n        new MenuItem (\"_New\", \"Creates new file\", ()=> {}),\n        new MenuItem (\"_Close\", \"\", () => {}),\n        new MenuItem (\"_Quit\", \"\", () => { top.Running = false; })\n    }),\n    new MenuBarItem (\"_Edit\", new MenuItem [] {\n        new MenuItem (\"_Copy\", \"\", null),\n        new MenuItem (\"C_ut\", \"\", null),\n        new MenuItem (\"_Paste\", \"\", null)\n    })\n});\ntop.Add (menu);\n\n// Add some controls\nwin.Add (\n    new Label (3, 2, \"Login: \"),\n    new TextField (14, 2, 40, \"\"),\n    new Label (3, 4, \"Password: \"),\n    new TextField (14, 4, 40, \"\") {  },\n    new CheckBox (3, 6, \"Remember me\"),\n    new RadioGroup (3, 8, new [] { \"_Personal\", \"_Company\" }),\n    new Button (3, 14, \"Ok\"),\n    new Button (10, 14, \"Cancel\"),\n    new Label (3, 18, \"Press ESC and 9 to activate the menubar\"));\n\nApplication.Run ();\n</code></pre>\n<img class=\"img-res\" src=\"/img/sampleTerminalUI.png\" alt=\"Sample app\" />\n<p>You can build even complex console-based UI using this toolkit:</p>\n<pre><code class=\"language-csharp\">using System;\nusing System.Linq;\nusing NStack;\nusing Terminal.Gui;\nusing TestingGuiCS.Models;\n\nnamespace TestingGuiCS\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            Application.Init ();\n            var top = Application.Top;\n\n            // Creates a menubar, the item \"New\" has a help menu.\n            var menu = new MenuBar (new MenuBarItem [] {\n                new MenuBarItem (\"_File\", new MenuItem [] {\n                    new MenuItem (\"_Quit\", \"\", () => { top.Running = false; })\n                })\n            });\n            top.Add (menu);\n\n\n            // Creates the top-level window to show\n            var win = new Window (new Rect (0, 1, top.Frame.Width, top.Frame.Height-1), \"Movie Db\");\n            top.Add (win);\n\n            // Add some controls\n            var txtSearchLbl = new Label(3, 1, \"Movie Name: \");\n            var txtSearch = new TextField(15, 1, 30, \"\");\n            var forKidsOnly = new CheckBox(3, 3, \"For Kids?\");\n            var minimumRatingLbl = new Label(25, 3, \"Minimum Rating: \");\n            var minimumRatingTxt = new TextField(41, 3, 10, \"\");\n            var searchBtn = new Button(3, 5, \"Filter\");\n            var allMoviesListView = new ListView(new Rect(4, 8, top.Frame.Width, 200), MovieDataSource.GetList(forKidsOnly.Checked, 0).ToList());\n            searchBtn.Clicked = () =>\n            {\n\n                double rating = 0;\n                var isDouble = double.TryParse(minimumRatingTxt.Text.ToString(), out rating);\n                if(!string.IsNullOrEmpty(minimumRatingTxt.Text.ToString()) &#x26;&#x26; !isDouble)\n                {\n                    MessageBox.ErrorQuery(30, 6, \"Error\", \"Rating must be number\");\n                    minimumRatingTxt.Text = ustring.Empty;\n                    return;\n                }\n\n                win.Remove(allMoviesListView);\n                if (string.IsNullOrEmpty(txtSearch.Text.ToString()) || string.IsNullOrEmpty(minimumRatingTxt.Text.ToString()))\n                {\n                    allMoviesListView = new ListView(new Rect(4, 8, top.Frame.Width, 200),\n                        MovieDataSource.GetList(forKidsOnly.Checked, rating).ToList());\n                    win.Add(allMoviesListView);\n                }\n                else\n                {\n                    win.Remove(allMoviesListView);\n                    win.Add(new ListView(new Rect(4, 8, top.Frame.Width, 200),\n                        MovieDataSource.GetList(forKidsOnly.Checked, rating)\n                            .Where(x =>\n                            x.Name.Contains(txtSearch.Text.ToString(), StringComparison.OrdinalIgnoreCase)\n                        ).ToList()));\n                }\n\n            };\n            win.Add (\n                txtSearchLbl,\n                txtSearch,\n                forKidsOnly,\n                minimumRatingLbl,\n                minimumRatingTxt,\n                searchBtn,\n                new Label (3, 7, \"-------------Search Result--------------\")\n            );\n\n            Application.Run ();\n        }\n    }\n}\n</code></pre>\n<img class=\"img-res\" src=\"/img/terminalUI.gif\" alt=\"Sample app\" />\n<p>You can grab the working sample project from <a href=\"https://github.com/SirwanAfifi/Console-based-UI\">GitHub</a>.</p>\n<h3>What about cross platform UI frameworks?</h3>\n<p>Developing cross platform UIs is not officially supported by Microsoft, But there are some open source projects out there for doing so:</p>\n<ul>\n<li><a href=\"https://github.com/AvaloniaUI/Avalonia\">Avalonia</a></li>\n<li><a href=\"https://github.com/picoe/Eto\">Eto.Forms</a></li>\n</ul>","excerpt":"As you know Console Applications don't have graphical user interface or GUI. Instead, they run from Command Line, for example instead ofâ€¦"}},{"node":{"timeToRead":1,"frontmatter":{"title":"Does making decision matter?","date":"April 27th, 2018","slug":"Does-making-decision-matter","tags":["Life","Decision"]},"html":"<img class=\"img-res\" src=\"/img/decision.jpg\" />\n*Photo by Felix Russell-Saw on Unsplash*\n<p>We make decision all the time, most of these decisions are done unconsciously, others we agonize over, we all have been there agonizing over a difficult or big decision, we always worry about what to do next, in fact we are trying to make the right decision, But in my opinion thereâ€™s no such thing as the right thing or the wrong thing, itâ€™s been a big deal for me because making decisions (big and little ones) have been challenging in my life.</p>\n<p>Last Friday I was talking with a friend (<a href=\"http://foad-ansari.ir/\">Foad</a>) about making decisions, he told me about something called Decidophobia or simply fear of making decisions.</p>\n<p>Life is full of options and choices so donâ€™t waste your time to worry about right and wrong decisions JUST take action itâ€™s worth it.</p>","excerpt":"We make decision all the time, most of these decisions are done unconsciously, others we agonize over, we all have been there agonizing overâ€¦"}},{"node":{"timeToRead":1,"frontmatter":{"title":"Running PowerShell on macOS","date":"June 6th, 2017","slug":"Powershell-on-macOS/","tags":["Linux","Windows","PowerShell"]},"html":"<p>It's been a while I have been using macOS as my primary operating system, you can read about my expreince <a href=\"http://sirwan.info/archive/2017/06/04/SQL-Server-on-Linux-in-Docker-on-a-Mac/\">here</a>.</p>\n<p>Today I wanted to run a PowerShell script, I searched around and figured out Microsoft has made PowerShell <a href=\"https://github.com/PowerShell/PowerShell\">open source</a> open source and the good news is that PowerShell is now cross-platform! this means that you can also run PowerShell scripts on Linux, macOS.</p>\n<p>Actually to get PowerShell to work all you need to do is installing it using Homebrew:</p>\n<pre><code class=\"language-js\">brew cask install powershell\n</code></pre>\n<p><em>Before preceding, make sure you have already installed <a href=\"https://caskroom.github.io/\">Homebrew-Cask</a> on your machine.</em></p>\n<blockquote>\n<p>Homebrew-Cask extends Homebrew and brings its elegance, simplicity, and speed to macOS applications and large binaries alike.\nIt only takes 1 line in your shell to reach 3759 Casks maintained by 4856 contributors.</p>\n</blockquote>\n<img class=\"img-res\" src=\"/img/powershell_installation_on_mac.png\" />\n<p>That's it, now <code>PowerShell</code> is installed, so you can use it in your terminal:\n<img class=\"img-res\" src=\"/img/powershell_foreach.png\" /></p>\n<p>There's also a great <a href=\"https://marketplace.visualstudio.com/items?itemName=ms-vscode.PowerShell\">VSCode extension</a> to write, debug PowerShell scripts:\n<img class=\"img-res\" src=\"/img/powershell_debugging_on_vscode.png\" /></p>","excerpt":"It's been a while I have been using macOS as my primary operating system, you can read about my expreince here. Today I wanted to run aâ€¦"}},{"node":{"timeToRead":3,"frontmatter":{"title":"SQL Server on Linux in Docker on a Mac","date":"June 4th, 2017","slug":"SQL-Server-on-Linux-in-Docker-on-a-Mac/","tags":["Docker","ASP.NET Core"]},"html":"<p>Over the last few months, I have been working on a couple of ASP.NET Core projects, it's been great experience so far becuase I can easily work on <a href=\"http://sirwan.info/My-first-experiences-with-Linux\">different platforms</a> while working on these projects. I recently bought a MacBook Pro and have decided to do .NET projects on macOS since then.</p>\n<p>Fortunately working with projects is not a pain in the neck anymore, with help of <a href=\"https://www.docker.com/what-docker\">Docker</a> you can easily setup up a complex development environment in minutes. It actually simplifies the process of building and shipping, running your apps on differente environments.</p>\n<p>The first challenge I faced when using macOS was connecting to and using SQL Server. Thanks to Docker and SQL Server for Linux. It's an instance of SQL Server as a docker container and it's super-fast so that it runs in seconds.</p>\n<img class=\"img-res\" src=\"/img/docker.png\" />\n<hr>\n<h2>Installing Docker for Mac</h2>\n<p>In order to get Docker to work you will need to install Docker for Mac, you can follow <a href=\"https://docs.docker.com/docker-for-mac\">these steps</a> to install it. Once Docker installation is done, it will automatically be started:\n<br /></p>\n<img class=\"img-res\" src=\"/img/docker-running.png\" />\n<p>You can also run <code>docker --version</code> to verify that Docker is working as expected.</p>\n<hr>\n<h2>Pulling and running Docker image</h2>\n<p>Next, you can install and run SQL <a href=\"https://hub.docker.com/r/microsoft/mssql-server-linux\">Server on Linux docker image</a> using following command:</p>\n<pre><code class=\"language-shell\">docker run -e 'ACCEPT_EULA=Y' -e 'SA_PASSWORD=Passowrdâ€™ -p 1433:1433 -d microsoft/mssql-server-linux\n\n</code></pre>\n<p>This command will install and run the SQL Server image. Now SQL Server is running locally in Docker container:</p>\n<img class=\"img-res\" src=\"/img/sql-server-is-running.png\" />\n<p>You can use its connection string in your ASP.NET Core application:</p>\n<pre><code class=\"language-csharp\">public class MvcMovieContext : DbContext\n{\n    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)\n    {\n        optionsBuilder.UseSqlServer(@\"Data Source=localhost;Initial Catalog=MovieDB;User ID=sa;Password=StrongPassword\");\n    }\n\n    public DbSet&#x3C;Movie> Movies { get; set; }\n}\n</code></pre>\n<p>Now if we run migration, the <code>MovieDB</code> database will be created in the running docker container:</p>\n<pre><code class=\"language-shell\">dotnet ef database update\n\n</code></pre>\n<h2>Connecting and quering the databse</h2>\n<p>There are several ways to connect and query a database running in Docker container, one way is using a command line tool called <code>sqlcmd</code>:</p>\n<img class=\"img-res\" src=\"/img/sqlcmd.png\" />\n<p>Personally I use <code>mssql</code> extension for Visual Studio Code. becuase it's really easy to use so you don't have to write your queries in command line mode. If you have not already installed this extension, all you need to do is press <code>âŒ˜ + P</code> and type <code>ext install mssql</code> then press enter to install it.</p>\n<p>In order to connect and query your database first, you need to write your SQL queries into a <code>SQL</code> file in VS Code then press <code>âŒ˜ + Shift + P</code> then choose <code>Create Connection Profile</code>, follow the prompts to specify the connection properties for the new connection profile. At the end you should have following settings:</p>\n<pre><code class=\"language-json\">{\n  \"mssql.connections\": [\n    {\n      \"authenticationType\": \"SqlLogin\",\n      \"server\": \"localhost\",\n      \"database\": \"MovieDB\",\n      \"user\": \"SA\",\n      \"password\": \"\",\n      \"savePassword\": true,\n      \"profileName\": \"MovieDB\"\n    }\n  ]\n}\n</code></pre>\n<p>As you can see <code>mssql.connections</code> takes an array, it means that you can define as many connection profiles as you want. Once you defined your profile, you can use it to execute your queries then the result will be shown as a seperate window:</p>\n<img class=\"img-res\" src=\"/img/query_result_mssql.png\" />\n<p>As you can see working with SQL Server on macOS is really straightforward. Something like this was not possible in .NET before but nowadays you can develope .NET applications on OS of your choice. that's why Iâ€™m more excited about .NET more than ever.</p>","excerpt":"Over the last few months, I have been working on a couple of ASP.NET Core projects, it's been great experience so far becuase I can easilyâ€¦"}},{"node":{"timeToRead":2,"frontmatter":{"title":"Working remotely","date":"May 3rd, 2017","slug":"Working-remotely/","tags":["Agile","remote"]},"html":"<p>It has been 8 months and so that I have been working remotely for a startup out there. It's been my pleasure to work with a team of great and talented members. over the past few months, I have learned a lot both in terms of technical stuff and working as a team member.</p>\n<p>For some, this might not seem a big deal. But for me, it's a pretty big one. So I thought it would be great to share my experiences so far.</p>\n<h3>New technology, new tools</h3>\n<p>For this project we are using .NET core and ASP.NET MVC core on top of it. The main benefit of using cutting edge technologies is that you always keep yourself updated, but you might argue that working with new and shiny things is overwhelming because the product is not mature enough to work with. But I believe that's also another great benefit because when you encounter a bug you easily open a GitHub issue and report it. So I think it's best of both worlds.</p>\n<h3>Estimation</h3>\n<p>At first, I couldn't deal with an accurate estimation, after a while I figured out that the problem was the task itself, not me, if a task is a big one then estimation most likely will be accurate, so the solution of having an accurate estimation is to break the task into smaller ones.</p>\n<h3>Documentation</h3>\n<p>A key point to have a good documentation is that, it needs to be updated after the requirement is changed. In our case, there are too many changes in requirements, this makes new team members confused. In my opinion, there must be a section called changelog in the documentation so that it will be really easy to know what was the previous changes at first place. you might say it's better to use <code>git log</code> but I think sometimes you don't need to go through several file changes in git history in order to understand a small change. Another good thing for new members is having mockups. I have been always a big fan of this type development, because as you know a picture worth a thousand words.</p>\n<h3>Working in different time zones</h3>\n<p>From my point of view working in different time zones makes remote working a little bit difficult, suppose you are given a task, now you have some questions and no one is online, so in this case, you have to leave your messages on Slack or Jira in order to get your questions answered. this is really big deal for small teams.</p>\n<h3>Collaboration</h3>\n<p>Another key point in agile development is collaboration. Working in a team is not just about delivering your product as soon as possible in some sprints. the best part of an agile team is having daily/weekly standup with other members. By other members I mean Mobile developers, Backend developers, Database developers, ... I think the standup shouldn't be held separately. As a web developer, I need to know what's going on in other parts of the application, because I think it gives developers a really good big picture.</p>\n<h3>Conclusion</h3>\n<p>All in all, it has been a great journey for me so far. because working remotely not only improves your technical ability but gives you a cultural perspective.</p>","excerpt":"It has been 8 months and so that I have been working remotely for a startup out there. It's been my pleasure to work with a team of greatâ€¦"}},{"node":{"timeToRead":3,"frontmatter":{"title":"My first experiences with Linux","date":"February 27th, 2017","slug":"My-first-experiences-with-Linux/","tags":["Linux","Windows"]},"html":"<p>Running Window 98 on my PC was my first experience with Windows. in fact, for the last 11 years or so, Windows has been the dominant operating system that I've been using. So, up until now, I have been an avid fan of Windows.</p>\n<blockquote>\n<p>Disclaimer: I'm not going to say that I'm not interested in Windows anymore, I just want to explain my experience with Ubuntu</p>\n</blockquote>\n<p>Windows just works fine for the most part. But, as a developer, I have always felt something is missing. For solving this problem, Microsoft has tried its best bringing in tools like PowerShell and Bash to Windows. But again, with all these great features and tools, as a developer, you think something is missing.</p>\n<p>Two weeks ago, I decided to give Linux a try, So I chose Ubuntu because it's user-friendly and its community is huge. Actually, my goal was to do some experiments with new version of .NET called .NET Core. The experience was great. First, I created a very simple console application on Windows and deployed it as a <a href=\"https://docs.microsoft.com/en-us/dotnet/articles/core/preview3/deploying/#self-contained-deployments-scd\">SCD (Self-Contained Deployment)</a>:</p>\n<img class=\"img-res\" src=\"/img/publish.jpg\" />\n<p>Then, I copied the publish folder on my USB stick and finally, I could run my .NET Core application without installing the .NET runtime on the target machine:</p>\n<img class=\"img-res\" src=\"/img/run_app.png\" />\n<p>As a .NET developer I have been waiting voraciously for such opportunity. So, I think it's the best time to migrate to Linux.</p>\n<p>Actually, I was amazed at the first impression because Linux has everything a developer needs out of the box. Python is already installed on the OS. This is great because there are times you want to write simple scripts, scrap a page or something like that.</p>\n<p>Other cool features of Linux are commands like <a href=\"https://www.gnu.org/software/sed/manual/sed.html\">sed</a> and <a href=\"https://www.gnu.org/software/grep/manual/html_node/index.html\">grep</a>. These tools are great whether you are a developer or a network administrator. for example, suppose that you have following content within a file named <code>test.json</code>:</p>\n<pre><code class=\"language-json\">{\n  \"AppName\": \"Simple App\",\n  \"Website\": \"sirwan.info\",\n  \"UseSqlite\": false\n}\n</code></pre>\n<p>Now you want to replace all occurrence of <code>\"UseSqlite\": false,</code> to <code>\"UseSqlite\": true,</code> you can do that simply by typing this command:</p>\n<pre><code class=\"language-js\">cat text.json | sed 's/\"UseSqlite\": false,/\"UseSqlite\": true,/'\n</code></pre>\n<img class=\"img-res\" src=\"/img/sed_command.png\" />\n<p>You can definitely do wide varaity of things using these tools, I just wanted to tell you how much I am excited about these cool stuff.</p>\n<h3>Development on Ubuntu</h3>\n<p>The good news is that .NET Core runs on Windows, Mac and Linux. In order to install .NET Core on Ubuntu you just simply need to navigate to <a href=\"https://www.microsoft.com/net/download\">dot.net</a> site and download the appropriate version. after installing .NET Core, it gives you a CLI called <code>dotnet</code> so you can simply create, build and publish your applications using this command, for example:</p>\n<pre><code class=\"language-csharp\">dotnet new\ndotnet restore\ndotnet run\n</code></pre>\n<p>You can also use the editor of your choice for developing .NET Core application, personally I prefer to use <a href=\"http://code.visualstudio.com/\">Visual Studio Code</a> or VSCode for short. because it has all great features you need:</p>\n<img class=\"img-res\" src=\"/img/vscode.png\" />\n<p>VSCode is great, But I think using an IDE like Visual Studio gives you the power you need when are developing applications, Unfortunately, there's no official version of Visual Studio for Linux at this time. I hope Microsoft release it for Linux users The only reason that I can't abandon Windows is the lack of Visual Studio So I have to keep using Windows on my main machine.</p>\n<h3>Conclusion</h3>\n<p>As I mentioned Visual Studio is the only reason to not completely abandon Windows, But I will use Ubuntu for sure. This was my first attempt to use Ubuntu and I am very happy about the experience, I would like to hear your ideas about your journey.</p>\n<p>Happy Coding :))</p>","excerpt":"Running Window 98 on my PC was my first experience with Windows. in fact, for the last 11 years or so, Windows has been the dominantâ€¦"}},{"node":{"timeToRead":1,"frontmatter":{"title":"Environments in ASP.NET Core","date":"November 23rd, 2016","slug":"Environments-in-ASP.NET-Core/","tags":["C#","ASP.NET Core"]},"html":"<p>In ASP.NET Core we can have different hosting environments, this is supported by an environment variable called <code>ASPNETCORE_ENVIRONMENT</code>. You can see this value is already set to <code>Development</code>:</p>\n<img class=\"img-res\" src=\"/img/environment.jpg\" />\n<p>This value is active as long as you run your application inside Visual Studio, So when you deploy your application you must change this value. Actually, this value comes from a file called <code>launchSettings.json</code>:</p>\n<pre><code class=\"language-csharp\">{\n  \"iisSettings\": {\n    \"windowsAuthentication\": false,\n    \"anonymousAuthentication\": true,\n    \"iisExpress\": {\n      \"applicationUrl\": \"http://localhost:13880/\",\n      \"sslPort\": 0\n    }\n  },\n  \"profiles\": {\n    \"IIS Express\": {\n      \"commandName\": \"IISExpress\",\n      \"launchBrowser\": true,\n      \"environmentVariables\": {\n        \"ASPNETCORE_ENVIRONMENT\": \"Development\"\n      }\n    },\n    \"ProjectName\": {\n      \"commandName\": \"Project\",\n      \"launchBrowser\": true,\n      \"launchUrl\": \"http://localhost:5000\",\n      \"environmentVariables\": {\n        \"ASPNETCORE_ENVIRONMENT\": \"Development\"\n      }\n    }\n  }\n}\n</code></pre>\n<p>You can determine what the environment is by using <code>IHostingEnvironment</code>:</p>\n<pre><code class=\"language-csharp\">public void Configure(IApplicationBuilder app,\n\tIHostingEnvironment env, ILoggerFactory loggerFactory)\n{\n\tloggerFactory.AddConsole();\n\n\tif (env.IsDevelopment())\n\t{\n\t\tapp.UseDeveloperExceptionPage();\n\t}\n\telse\n\t{\n\t\tapp.UseExceptionHandler(new ExceptionHandlerOptions\n\t\t{\n\t\t\tExceptionHandler = context => context.Response.WriteAsync(\"Opps!\")\n\t\t});\n\t}\n\n\t// other configurations\n}\n</code></pre>\n<p>This object also has a method called <code>IsEnvironment</code> for using custom environment:</p>\n<pre><code class=\"language-csharp\">if (env.IsEnvironment(\"envName\"))\n{\n    // some config\n}\n</code></pre>\n<p>One interesting thing is that the Startup class itself supports different environments, it means that for each environment you can have both <code>Configure</code> and <code>ConfigureServices</code>:</p>\n<pre><code class=\"language-csharp\">public void ConfigureDevelopment(IApplicationBuilder app, .....\npublic void ConfigureServicesDevelopment(IServiceCollection services)\n\npublic void ConfigureStaging(IApplicationBuilder app, .....\npublic void ConfigureServicesStaging(IServiceCollection services)\n\npublic void ConfigureProduction(IApplicationBuilder app, .....\npublic void ConfigureServicesProduction(IServiceCollection services)\n</code></pre>\n<p>Now you might ask how we can set this environment variable, well there are several ways that you can use, this great <a href=\"http://andrewlock.net/how-to-set-the-hosting-environment-in-asp-net-core/\">post</a> explains them in details.</p>","excerpt":"In ASP.NET Core we can have different hosting environments, this is supported by an environment variable called ASPNETCORE_ENVIRONMENT. Youâ€¦"}},{"node":{"timeToRead":2,"frontmatter":{"title":"Getting to know Singleton pattern in C#","date":"November 8th, 2016","slug":"Getting-to-know-Singletone-Pattern/","tags":["C#","Design Patterns"]},"html":"<p>This pattern helps us to ensure a class has only one instance. The term comes from the <a href=\"https://en.wikipedia.org/wiki/Singleton_(mathematics)\">mathematical concept of a singleton</a>:</p>\n<blockquote>\n<p>In mathematics, a singleton, also known as a unit set,[1] is a set with exactly one element. For example, the set {0} is a singleton.</p>\n</blockquote>\n<p>Eventually we must have a class that only gives us a single instance:</p>\n<pre><code class=\"language-csharp\">var sigleInstance = MySingletonClass.GetInstance();\n</code></pre>\n<p>As you can see the only way to access the instance is by calling a public static method called <code>GetInstance()</code>, the single object instance under consideration is created only for the first time it is requested. suppose the following class:</p>\n<pre><code class=\"language-csharp\">public class MySingletonClass\n{\n    public MySingletonClass()\n    {\n\n    }\n}\n</code></pre>\n<p>Now I want to make this class singleton, So the first step is to ensure that no one can instantiate our class for doing so we must make the constrauctor <code>private</code>:</p>\n<pre><code class=\"language-csharp\">public class MySingletonClass\n{\n    private MySingletonClass()\n    {\n\n    }\n}\n</code></pre>\n<p>Now whenever you want to create a new instance of <code>MySingletonClass</code> using <code>new</code> keyword, Visual Studio gives you this error:</p>\n<img class=\"img-res\" src=\"/img/singleton_error.jpg\" />\n<p>But we can still instantiate it from within the class. So next step is to create a new variable of type <code>MySingletonClass</code> inside the class, this class is going to be the only instance of the class:</p>\n<pre><code class=\"language-csharp\">public class MySingletonClass\n{\n\tprivate static MySingletonClass _instance;\n\n\tprivate MySingletonClass() { }\n}\n</code></pre>\n<p>So we are getting close to implementing the pattern. Now we need a way to get access the single instance. So we need a method like this:</p>\n<pre><code class=\"language-csharp\">public static MySingletonClass GetInstance()\n{\n\tif (_instance == null)\n\t{\n\t\t_instance = new MySingletonClass();\n\t}\n\treturn _instance;\n}\n</code></pre>\n<p>This method instantiates <code>MySingletonClass</code> if an instance doesn't already exist, otherwise it return the existing instance. To demonstrate the object lifetime we can print value of <code>GetHashCode()</code> fo these objects:</p>\n<pre><code class=\"language-csharp\">var mySingleInstance   = MySingletonClass.GetInstance();\nvar mySingleInstance_2 = MySingletonClass.GetInstance();\nvar mySingleInstance_3 = MySingletonClass.GetInstance();\nvar mySingleInstance_4 = MySingletonClass.GetInstance();\n\nConsole.WriteLine($\"obj1: {mySingleInstance.GetHashCode()}\");\nConsole.WriteLine($\"obj2: {mySingleInstance_2.GetHashCode()} \");\nConsole.WriteLine($\"obj3: {mySingleInstance_3.GetHashCode()} \");\nConsole.WriteLine($\"obj4: {mySingleInstance_4.GetHashCode()} \");\n</code></pre>\n<img class=\"img-res\" src=\"/img/singleton_GetHashCode.jpg\" />\n<p>As you can see all of the objects are the same and share the same instance. The problem with this implementation is that, it's not <a href=\"http://csharpindepth.com/Articles/General/Singleton.aspx\">thread-safe</a>; it means that if seperate threads of execution access the <code>_instance</code> at the same time, more that one instance of the <code>MySingletonClass</code> object may be created. One of the solution is by using .NET 4's <code>Lazy&#x3C;T></code> type:</p>\n<pre><code class=\"language-csharp\">public class MySingletonClass\n{\n\tprivate static readonly Lazy&#x3C;MySingletonClass> _instance =\n\t\tnew Lazy&#x3C;MySingletonClass>(() => new MySingletonClass());\n\n    private MySingletonClass() { }\n\n    public static MySingletonClass GetInstance()\n    {\n    \treturn _instance.Value;\n    }\n\n}\n</code></pre>","excerpt":"This pattern helps us to ensure a class has only one instance. The term comes from the mathematical concept of a singleton: In mathematicsâ€¦"}},{"node":{"timeToRead":1,"frontmatter":{"title":"Designing Fluent Interfaces in C#","date":"October 26th, 2016","slug":"Designing-Fluent-Interfaces-in-C/","tags":["C#","Design Patterns"]},"html":"<p>The concept of <a href=\"martinfowler.com/bliki/FluentInterface.html\">Fluent Interface</a> was coined by Martin Fowler to create various objects and wire them up together. This pattern is often used for object configuration and setup. For example in ASP.NET Core applications we have following code for configuring the server:</p>\n<pre><code class=\"language-csharp\">using System;\nusing Microsoft.AspNetCore.Hosting;\n\nnamespace aspnetcoreapp\n{\n    public class Program\n    {\n        public static void Main(string[] args)\n        {\n            var host = new WebHostBuilder()\n                .UseKestrel()\n                .UseStartup&#x3C;Startup>()\n                .Build();\n\n            host.Run();\n        }\n    }\n}\n</code></pre>\n<p>As you can see we can chain methods together easily and the intention is to produce an API that is readable and flows. This pattern is heavily used in programming, Here's an example of using this approach in jQuery:</p>\n<pre><code class=\"language-js\">$(\"#result\")\n  .css(\"background\", \"yellow\")\n  .width(200)\n  .height(200)\n  .text(\"This is the result\")\n</code></pre>\n<p>For C#, there is LINQ:</p>\n<pre><code class=\"language-csharp\">var person = PersonDataSource\n\t.Where(p => p.Age > 20)\n\t.OrderBy(p => p.Name)\n\t.Select(p => new {\n\t\tName = p.Name,\n\t\tLastName = p.LastName\n});\n</code></pre>\n<p>You might ask how to implement this pattern, well, it is very simple you just need to return <code>this</code> during method call. The <code>Calculator</code> defined below contains three methods. These methods are returing <code>Calculator</code> object using <code>this</code> keyword, which allow to chain the methods:</p>\n<pre><code class=\"language-csharp\">public class Calculator\n{\n\tpublic int Initial { get; private set; }\n\tpublic Calculator(int intial)\n\t{\n\t\tInitial = intial;\n\t}\n\n\tpublic Calculator Add(int x)\n\t{\n\t\tInitial = Initial + x;\n\t\treturn this;\n\t}\n\n\tpublic Calculator Divide(int x)\n\t{\n\t\tInitial = Initial / x;\n\t\treturn this;\n\t}\n\n\tpublic Calculator Substract(int x)\n\t{\n\t\tInitial = Initial - x;\n\t\treturn this;\n\t}\n}\n</code></pre>\n<p>Now we can use the class this way:</p>\n<pre><code class=\"language-csharp\">var calc = new Calculator(5)\n\t\t\t.Add(5)\n\t\t\t.Divide(5)\n\t\t\t.Substract(2);\n\nSystem.Console.WriteLine(calc.Initial);\n</code></pre>\n<p>As you can see this approach makes our code concise and easier to read.</p>","excerpt":"The concept of Fluent Interface was coined by Martin Fowler to create various objects and wire them up together. This pattern is often usedâ€¦"}},{"node":{"timeToRead":2,"frontmatter":{"title":"Explicit Interface Implementation","date":"August 12th, 2016","slug":"Explicit-Interface-Implementation/","tags":["C#"]},"html":"<p>Let's imagine that you have a class with two methods:</p>\n<pre><code class=\"language-csharp\">public class VendingMachine\n{\n    public bool InsertCoin(float amount)\n    {\n        if (amount &#x3C; 500)\n        {\n            return false;\n        }\n        return true;\n    }\n\n    public string Buy()\n    {\n        return \"Buy\";\n    }\n}\n</code></pre>\n<p>Now when we want to create an instance of this class and call one of those methods, it executes as expected:</p>\n<pre><code class=\"language-csharp\">VendingMachine machine = new VendingMachine();\nmachine.InsertCoin(5); // false\nmachine.Buy();         // \"Buy\"\n</code></pre>\n<p>Now suppose that we have an interface called <code>IVendingMachine</code> that has two methods:</p>\n<pre><code class=\"language-csharp\">public interface IVendingMachine\n{\n    bool InsertCoin(float amount);\n    string Buy();\n}\n</code></pre>\n<p>We want our class to implements this interface:</p>\n<pre><code class=\"language-csharp\">public class VendingMachine : IVendingMachine\n{\n    public bool InsertCoin(float amount)\n    {\n        if (amount &#x3C; 500)\n        {\n            return false;\n        }\n        return true;\n    }\n\n    public string Buy()\n    {\n        return \"Buy\";\n    }\n}\n</code></pre>\n<p>Our class satisfied the interface because it has the methods with the same names. So Visual Studio doesn't give you a compiler error. Now let's imagine that we\nalso want to add interface's methods to this class, So, in this case, we must explicitly prefix the methods with <code>IVendingMachine.</code>:</p>\n<pre><code class=\"language-csharp\">public class VendingMachine : IVendingMachine\n{\n    public bool InsertCoin(float amount)\n    {\n        if (amount &#x3C; 500)\n        {\n            return false;\n        }\n        return true;\n    }\n\n    bool IVendingMachine.InsertCoin(float amount)\n    {\n        if (amount &#x3C; 300)\n        {\n            return true;\n        }\n        return false;\n    }\n\n    public string Buy()\n    {\n        return \"Buy\";\n    }\n\n    string IVendingMachine.Buy()\n    {\n        return \"IVendingMachine Buy\";\n    }\n}\n</code></pre>\n<p>Note that Visual Studio can help you to implement interface explicitly by pressing <code>Ctrl + .</code> on the name of the interface and select <code>Implement interface explicitly</code>:</p>\n<img class=\"img-res\" src=\"/img/explicit_interface_implementation.jpg\" />\nNow, what happens when we call the `InsertCoin` and `Buy` methods? In this case, we should consider two different situations when we create the object:\n<ul>\n<li>Concrete Type</li>\n<li>Interface Variable</li>\n</ul>\n<p>If we want the methods of <code>VendingMachine</code> we should create the object with concrete type:</p>\n<pre><code class=\"language-csharp\">VendingMachine machine = new VendingMachine();\nmachine.InsertCoin(5); // false\nmachine.Buy();         // \"Buy\"\n</code></pre>\n<p>If we want the methods of <code>IVendingMachine</code> we should create the object with interface variable:</p>\n<pre><code class=\"language-csharp\">IVendingMachine machine = new VendingMachine();\nmachine.InsertCoin(5); // true\nmachine.Buy();         // \"IVendingMachine Buy\"\n</code></pre>","excerpt":"Let's imagine that you have a class with two methods: Now when we want to create an instance of this class and call one of those methods, itâ€¦"}},{"node":{"timeToRead":3,"frontmatter":{"title":"Delegates in C#","date":"July 2nd, 2016","slug":"Delegates/","tags":["C#","ASP.NET MVC"]},"html":"<p>Lately I have been studying some topics in C# in order to improve myself. I think <a href=\"https://msdn.microsoft.com/en-us/library/ms173171.aspx\">Delegate</a> is one of those topics which is kinda difficult for beginners to initiate with. So, in order to make it clear how it works, I'm going to make some explanations in this post.</p>\n<h3>What are Delegates?</h3>\n<p>Delegate was introduced in C# 1. Think of it as a simply being a placeholder for functions that'll be called at some point in time. Assume you want to declare a variable that is a reference to a specific method. In this case, the variable encapsulates some executable code and you can invoke the variable just like an actual method. In doing so, we need to create a delegate</p>\n<h3>Defining a Delegate</h3>\n<p>Delegates are created using <code>delegate</code> keyword along with the function signature:</p>\n<pre><code class=\"language-csharp\">delegate int Sum(int a, int b);\n</code></pre>\n<p>As you can see we are defining a delegate called <code>Sum</code> that is compatible with any method with an <code>int</code> return type with two parameters. Actually we defined a type that we can use to create variables and point those variables to methods that have the same signature and same return type.\nThe type defenition for a delegate describes the method that we want to call:</p>\n<pre><code class=\"language-csharp\">int Add(int a, int b) => a + b;\n</code></pre>\n<p>Now we can assign a method to the delegate variable. This assignment creates a delegate instance:</p>\n<pre><code class=\"language-csharp\">Sum s = Add;\n</code></pre>\n<p>Now we can invoke the delegate instance in the same way as a method:</p>\n<pre><code class=\"language-csharp\">int result = s(5, 6);\n</code></pre>\n<h3>Advantages of Delegate</h3>\n<ul>\n<li>Delegates are type safe, It means that the C# compiler checks the function signatures of a Delegate when you use them at runtime.</li>\n<li>Can be used to define callback functions.</li>\n<li>Can be dynamically switched at runtime.</li>\n</ul>\n<h3>Real World example</h3>\n<p>Suppose that you want to implement something like a <a href=\"https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater(v=vs.85).aspx\">Repeater</a> control in your ASP.NET MVC application, As you probably know a Repeater is(was) server side databound control in ASP.NET WebForm for displaying information, It had a lot of flexability becuase you had complete control over the your markup.</p>\n<pre><code class=\"language-csharp\">public static class Helpers\n{\n\tpublic delegate HelperResult ItemTemplate&#x3C;T>(T input);\n\n\tpublic static HelperResult Repeater&#x3C;T>(this HtmlHelper html,\n\t  IEnumerable&#x3C;T> items,\n\t  ItemTemplate&#x3C;T> itemTemplate,\n\t  ItemTemplate&#x3C;T> alternatingitemTemplate = null)\n\t{\n\t\treturn new HelperResult(writer =>\n\t\t{\n\t\t\tint i = 0;\n\t\t\tforeach (var item in items)\n\t\t\t{\n\t\t\t\tvar func = i % 2 == 0 ? itemTemplate : alternatingitemTemplate;\n\t\t\t\tfunc(item).WriteTo(writer);\n\t\t\t\ti++;\n\t\t\t}\n\t\t});\n\t}\n}\n</code></pre>\n<p>As you can see we emulated the <code>ItemTemplate</code> and <code>AlternatingItemTemplate</code> using a delegate. In this case user can pass the data and the data will be rendered inside the view. In this case the delegates act like callback.<br>\nThe <code>ItemTemplate</code> delegate in our example can be replaced with <code>Func</code> delegate:</p>\n<pre><code class=\"language-csharp\">Func&#x3C;T, HelperResult> itemTemplate,\nFunc&#x3C;T, HelperResult> alternatingitemTemplate = null\n</code></pre>\n<p>Now we can use our helper inside any view:</p>\n<pre><code class=\"language-html\">&#x3C;table>\n  &#x3C;tr>\n    &#x3C;td>Id&#x3C;/td>\n    &#x3C;td>Name&#x3C;/td>\n  &#x3C;/tr>\n  @Html.Repeater(Model, @\n  &#x3C;tr>\n    &#x3C;td>@item.Title&#x3C;/td>\n    &#x3C;td>@item.Price&#x3C;/td>\n  &#x3C;/tr>\n  , @\n  &#x3C;tr class=\"alert-info\">\n    &#x3C;td>@item.Title&#x3C;/td>\n    &#x3C;td>@item.Price&#x3C;/td>\n  &#x3C;/tr>\n  )\n&#x3C;/table>\n</code></pre>\n<p>If you run the application you can see the result:</p>\n<img class=\"img-res\" src=\"/img/repeater.jpg\" />\n<p>You can check out the <a href=\"https://github.com/SirwanAfifi/using_delegates\">GitHub repository</a> for this post.</p>","excerpt":"Lately I have been studying some topics in C# in order to improve myself. I think Delegate is one of those topics which is kinda difficultâ€¦"}},{"node":{"timeToRead":1,"frontmatter":{"title":"Thinking out of the box to become a better programmer","date":"June 11th, 2016","slug":"Thinking-out-of-the-box-to-become-a-better-programmer/","tags":["Programming","Life"]},"html":"<img class=\"img-res\" src=\"/img/Thinking_Man.jpg\" />\n*Image courtesy of [http://goo.gl/iu68gq](http://goo.gl/iu68gq)*\n<p>Today I was talking with a friend of mine about thinking, The topic is interesting and I wanted to share it with you because as a programmer we are always thinking and trying to find solutions. Actually it's a good habit when you want to learn something new, instead of taking action and delve into the details, you should think about that and break it down into several pieces then construct it as a big picture. Once you get familiar to it you can start trying to figure out each individual piece, By doing so you will become great in your field.</p>\n<img class=\"img-res\" src=\"/img/think-outside-the-box.jpg\" />\n*Image courtesy of [http://goo.gl/Xi2Cn4](http://goo.gl/Xi2Cn4)*\n<p>On the other hand, thinking isn't the only thing for being an expert in programming. Suppose that you are given a challenging feature to implement in a team you're working with, you might spend days and days trying to implement this feature and each time you fail and stuck in it then you try to find a solution on the net or asking questions on Stackoverflow. I'm not saying you shouldn't google about your problem, What I'm saying is that you should understand the problem, This is where a Thinking out of the box's metaphor comes into play.</p>\n<p>This is very helpful because when you ran into a problem you should first think about it in a new or a different prespective, For example you can put yourself in end user's place and try to figure it out. Once you understand it, you can start coding the feature. By doing so you can help yourself and believe me it works like a charm and you don't need to post off-topic questions every single day on Stackoverflow anymore, Instead when you run into a serious problem, you can post your question and get extra votes :)</p>\n<p>So thinking out of the box helps us to think like a programmer, It also helps you to approach problems in new ways.</p>","excerpt":"Today I was talking with a friend of mine about thinking, The topic is interesting and I wanted to share it with you because as a programmerâ€¦"}},{"node":{"timeToRead":3,"frontmatter":{"title":"Why AngularJS?","date":"April 17th, 2016","slug":"Why-Angular/","tags":["Angular.js","JavaScript"]},"html":"<p>I wanted to share a few thoughts about AngularJS</p>\n<h3>Introduction</h3>\n<p>AngularJS is a MV* framework for writing manageable, clean, full-featured applications in the browser with JavaScript , It's also incredibly easy to learn for those who already have HTML and JavaScript experience. Angular's goal was to create a way for designers to be able to do HTML design using components. One thing that I like about Angular is that, it's an opinionated MV* framework, It means that it tells you what are the certain ways of doing things, Some people might argue that it's somehow a limitation for a framework such as Angular because it solves fewer problems, but I think at least it assures to not having spaghetti code.</p>\n<h3>How I got into AngularJS</h3>\n<p>I have been sitting on the fence for far too long to chose a great JavaScript framework. Finally a couple of years ago I decided to use AngularJS, and it caught my attention. It actually made me curious to learn more about it. I started to use AngularJS for some parts of my application. At the time Angular team were working on the next version of the framework, So I stopped using it because I heard that the next version is a different framework. Now I have come to the conclusion that it's better to stick with Angular 1.x, then I can switch to Angular 2 in a right time.</p>\n<h3>AngularJS Benefites</h3>\n<p>Angular has lots of great features from testability and two-way binding, to more vague concepts. For me, the best thing about Angular is that it has a flat learning curve So you can get the most of it. All being said here are the some of my favourite features and benefits of Angular:</p>\n<ul>\n<li>Code Reduction: Angular reduces the amount of code that developers write.</li>\n<li>Two Way Binding</li>\n<li>Beautiful syntax and higher-level APIs</li>\n</ul>\n<p>For example, take a look this piece of code written in raw JavaScript:</p>\n<pre><code class=\"language-js\">document.getElementById(\"btn\").addEventListener(\"click\", function(el) {\n  alert(\"clicked!\")\n})\n</code></pre>\n<p>Whereas with Angular you can simple achieve same goal this way:</p>\n<pre><code class=\"language-js\">;&#x3C;button id=\"btn\" ng-click=\"handleClick()\">\n  Click Me\n&#x3C;/button>\n\n$scope.handleClick = function() {\n  console.log(\"clicked!\")\n}\n</code></pre>\n<p>As you can see the Angular code is less complex.</p>\n<ul>\n<li>Popularity</li>\n<li>Testability<br>\nAngular was designed with testing in mind. So you can test any components of your application easily through both <a href=\"https://docs.angularjs.org/guide/unit-testing\">unit testing</a> and <a href=\"https://docs.angularjs.org/guide/e2e-testing\">end to end</a> testing. For unit testing you can use a component called <a href=\"https://docs.angularjs.org/api/ngMock\">ngMock</a> and for e2e testing you can use <a href=\"https://github.com/angular/protractor\">Protractor</a>. It is worthwhile to mention that for both cases you can run your tests using a tool called Karma.</li>\n</ul>\n<h3>AngularJS gotchas</h3>\n<p>Although Angular is a great framework but it has some problems that you can run into trouble with it. Here are some of them:</p>\n<ul>\n<li>SEO<br>\nFor dealing with this issue we can use server side rendering or use a <a href=\"https://prerender.io/\">prerenderer</a>,</li>\n<li>Performance<br>\nOne thing that causes performance problem in Angular is having too many bindings. If performance is important you can consider using a different rendering engine.</li>\n<li>External Events and Digest Cycle</li>\n</ul>\n<h3>Conclusion</h3>\n<p>Even though Angular 2 is coming, But Angular 1 is still a thing and I think Angular 1 will be supported for a long time to come.</p>","excerpt":"I wanted to share a few thoughts about AngularJS Introduction AngularJS is a MV* framework for writing manageable, clean, full-featuredâ€¦"}},{"node":{"timeToRead":3,"frontmatter":{"title":"Asynchronous Execution in JavaScript","date":"February 12th, 2016","slug":"Asynchronous-Execution-in-JavaScript/","tags":["MVC","JavaScript"]},"html":"<p>As you know browsers are typically single threaded, It means that the browser can only be doing either update the UI or executing JavaScript at any given time. It actually incapable of doing theme simultaneously.</p>\n<p>As I mentioned when JavaScript is executing code, the UI is unable to respond to the user. So, our goal as a developer is to build a highly responsive UI. For doing that you could create smaller unit of work and use JavaScript timers to return execution to the next event in the queue:</p>\n<pre><code class=\"language-js\">function buffer(items, iterFn, callback) {\n  var i = 0,\n    len = items.length\n  setTimeout(function() {\n    var result\n\n    for (\n      var start = +new Date();\n      i &#x3C; len &#x26;&#x26; result !== false &#x26;&#x26; +new Date() - start &#x3C; 50;\n      i++\n    ) {\n      result = iterFn.call(items[i], items[i], i)\n    }\n\n    if (i &#x3C; len &#x26;&#x26; result !== false) {\n      setTimeout(arguments.callee, 20)\n    } else {\n      callback(items)\n    }\n  }, 20)\n}\n</code></pre>\n<p>Assume that we want to pull down some data from the server, Then the data is going to be processed through an array loop, And we are going to build some DOM elements:</p>\n<pre><code class=\"language-js\">@{\n    ViewBag.Title = \"Home Page\";\n}\n&#x3C;ul>&#x3C;/ul>\n@section scripts\n{\n    &#x3C;script>\n        $(document).ready(function () {\n            $.get('@Url.Action(\"Date\")', function (result) {\n                var html = '';\n\n                buffer(result, function (item) {\n                    html += '&#x3C;li>' + item + '&#x3C;/li>';\n                }, function () {\n                    $('ul').append(html);\n                });\n            });\n        });\n    &#x3C;/script>\n}\n</code></pre>\n<p>Also the action method is like this:</p>\n<pre><code class=\"language-csharp\">public JsonResult Date()\n{\n    var data = Enumerable.Range(0, 50000);\n\n    return Json(data, JsonRequestBehavior.AllowGet);\n}\n</code></pre>\n<p>The <code>buffer</code> method works like a charm but using <code>setTimeout</code> is considered to be a bad practice. So that's where the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers\">Web Workers</a> come into play.</p>\n<h3>Web Workers</h3>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers\">MDN</a>:</p>\n<blockquote>\n<p>Web Workers provide a simple means for web content to run scripts in background threads. The worker thread can perform tasks without interfering with the user interface. In addition, they can perform I/O using XMLHttpRequest (although the responseXML and channel attributes are always null). Once created, a worker can send messages to the JavaScript code that created it by posting messages to an event handler specified by that code (and vice versa.) This article provides a detailed introduction to using web workers.</p>\n</blockquote>\n<p>Well, Web Wrokers bring background threading to browsers. It is a best option if you have intense processing that needs to happen in your browser. Since Workers run in another global context so there's a few restrictions that you have to keep in mind, <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Functions_and_classes_available_to_workers\">Here</a> you can see the list of functions and classes available to Web Workers. So your favorite JavaScript library may not work with workers.</p>\n<p>So let's rewrite our example with Web Workers:</p>\n<pre><code class=\"language-js\">&#x3C;ul id=\"result\">Hello&#x3C;/ul>\n@section scripts\n{\n    &#x3C;script>\n        $(function () {\n            var _worker;\n\n            _worker = new Worker('@Url.Content(\"~/Scripts/getData.js\")');\n            _worker.addEventListener(\"message\", messageHander, false);\n            _worker.postMessage(\"fetch\");\n\n            function messageHander(e) {\n                $(\"#result\").html(e.data);\n            }\n\n        });\n    &#x3C;/script>\n}\n</code></pre>\n<p>As you can see I instantiated a worker, Then I setup an event listener for message, So when data comes in from the AJAX call, we will inject the result into html of a container called <code>result</code>.<br>\nHere you see the worker:</p>\n<pre><code class=\"language-js\">function messageHandler(e) {\n  if (e.data === \"fetch\") {\n    fetch()\n  }\n}\n\nfunction fetch() {\n  var xmlhttp = new XMLHttpRequest()\n  xmlhttp.onreadystatechange = function() {\n    if (xmlhttp.readyState == 4 &#x26;&#x26; xmlhttp.status == 200) {\n      var html = \"\"\n      var res = JSON.parse(xmlhttp.responseText)\n      for (var i = 0; i &#x3C; res.length; i++) {\n        html += \"&#x3C;li>\" + res[i] + \"&#x3C;/li>\"\n      }\n      postMessage(html)\n    }\n  }\n\n  xmlhttp.open(\"GET\", \"/Home/Date\", false)\n  xmlhttp.send()\n}\naddEventListener(\"message\", messageHandler, true)\n</code></pre>\n<p>Inside the fetch content we used typical AJAX call because in Web Workers you can not use a third-party library it means that there's no access to non-thread safe components, So you have to use a native <code>XMLHttpRequest</code> in your worker. Now if you run the code you will see that now that's pretty fast even quite a bit faster than before.</p>\n<p>You can see the sample code <a href=\"https://github.com/SirwanAfifi/asynchronous-execution-in-js\">in the GitHub repository</a></p>","excerpt":"As you know browsers are typically single threaded, It means that the browser can only be doing either update the UI or executing JavaScriptâ€¦"}},{"node":{"timeToRead":3,"frontmatter":{"title":"Object Oriented JavaScript Part 2","date":"December 11th, 2015","slug":"Object-Oriented-JavaScript-Part-2/","tags":["C#","JavaScript"]},"html":"<p>###Classes\nIn many programming languages a <a href=\"https://en.wikipedia.org/wiki/Class_(computer_programming)\">class</a> is a standard unit of work, which means that you normally create all of your code inside classes and these classes contain data, behaviour, events and those sort of things that you are going to use in developing your solutions. for example in C# we can create a class this way:</p>\n<pre><code class=\"language-csharp\">public class Person\n{\n    // Field\n    public string firstName;\n\t// Constructor that takes no arguments.\n    public Person(string firstName, string lastName)\n    {\n        this.firstName = firstName;\n        this.lastName = lastName;\n    }\n    // Method\n    public string Greet(string name)\n    {\n        return $\"Hello, { name }. My name is { this.firstName }\"\n    }\n}\n</code></pre>\n<p>In this case we have a class along with properties, constructor. So a class in C# contains data as well as operation as well as events. It will be useful to create same sort of structure in JavaScript. Prior to ES6 there was no such thing as a class in JavaScript, we could simply do everything with functions, we could create classes by using some of the language semantics to create things that look and feels like classes. But they were not classes in the classical sense. for example we used function to do this:</p>\n<pre><code class=\"language-js\">function Person(firstName, lastName) {\n  this.firstName = firstName\n  this.lastName = lastName\n}\nPerson.prototype.greet = function(name) {\n  return \"Hello, \" + name + \". My name is \" + this.firstName\n}\n</code></pre>\n<p>So what this function does is use the <code>this</code> keyword to define new property that represents a person object in this case. And what's interesting here this is what's called a constructor syntax. So this function when called will return an object. By doing this, we can create a new person:</p>\n<pre><code class=\"language-js\">var person = new Person(\"Sirwan\", \"Afifi\")\n</code></pre>\n<p>In this case, we can see that it is using the <code>new</code> keyword. this keyword is used to find a function with a name, after the <code>new</code>, return an object that contained the shape that is defined in the function. Once we have an instance of that, we can get any of the properties that are specified in the constructor syntax function:</p>\n<pre><code class=\"language-js\">var firstName = person.firstName\n</code></pre>\n<p>ES6 introduces language support for classes with <code>class</code> keyword. So the ES6 equivalent of the <code>Person</code> function would be the following:</p>\n<pre><code class=\"language-js\">class Person {\n  constructor(firstName, lastName) {\n    this.firstName = firstName\n    this.lastName = lastName\n  }\n\n  greet(name) {\n    return `Hello, ${name}. My name is ${this.firstName}`\n  }\n}\n</code></pre>\n<p>So we have essentially recreated the same Person data type but with much better syntax. behind the scene the runtime is doing the exactly what we used to do. But now the syntax is clean and expressive. As you can see there is <code>constructor</code> in the class definition. the constructor is one of the class members that we can list in the body of a class, just like the other members it is a function, it is a function that automatically invoked when we say <code>new</code> and use the class name as a function call:</p>\n<pre><code class=\"language-js\">var person = new Person(\"Sirwan\", \"Afifi\")\n</code></pre>\n<p>###Getters and Setters\nIn a class we can also use getter and setter, they are created using <code>get</code> and <code>set</code> keyword. get and set allows us to run code on the reading or writing of a property:</p>\n<pre><code class=\"language-js\">// ES6 get and set\nclass Person {\n  constructor(firstName, lastName) {\n    this._firstName = firstName\n    this._lastName = lastName\n  }\n\n  get fullName() {\n    var result = this._firstName + \", \" + this._lastName\n    return result.toUpperCase()\n  }\n\n  set firstName(newName) {\n    this._firstName = newName\n  }\n  set lastName(newName) {\n    this._lastName = newName\n  }\n  greet(name) {\n    return `Hello, ${name}. My name is ${this._firstName}`\n  }\n}\nlet sirwan = new Person(\"Sirwan\", \"Afifi\")\nconsole.log(sirwan.fullName) // Outputs 'SIRWAN, AFIFI'\nlet omid = new Person(\"Daryoush\", \"Zandi\")\nomid.firstName = \"Omid\"\nomid.lastName = \"Kamangar\"\nconsole.log(omid.fullName) // Outputs 'OMID, KAMANGAR'\n</code></pre>\n<p>###Inheritance\nES6 also gives us an easy syntax to specify and inheritance for relationship. Which is a way we say a class inherits from another class. Now assume that we need another class for modling an <code>Employee</code>, since every employee is a person, maybe we will have the <code>Employee</code> inherit from a <code>Person</code>. In ES6 inheritance is specified using <code>extends</code> keyword:</p>\n<pre><code class=\"language-js\">class Employee extends Person {\n  // more features\n  getWork() {\n    return `${this._firstName} is working.`\n  }\n}\n\nlet emp = new Employee(\"Sirwan\", \"Afifi\")\nconsole.log(emp.getWork()) // Outputs 'Sirwan is working.'\n</code></pre>\n<p>The only thing is that a lot of features in ES2015 are not supported in the browsers. For example classes are not supported by any browser, now there might be a nightly built of Firefox that supports classes. So instead we have to use a transpiler and there are many transpilers such as <a href=\"http://www.typescriptlang.org\">TypeScript</a>, <a href=\"https://babeljs.io\">Bable</a> and variety of others. I recommend you to use Bable because it has the best support for all of ES2015 features.</p>","excerpt":"###Classes\nIn many programming languages a class is a standard unit of work, which means that you normally create all of your code insideâ€¦"}},{"node":{"timeToRead":3,"frontmatter":{"title":"Object Oriented JavaScript Part 1","date":"December 10th, 2015","slug":"Object-Oriented-JavaScript-Part-1/","tags":["C#","JavaScript"]},"html":"<p>Recently I've started to improve my JavaScript skill, So I decided to keep notes about new things I learn from now on.\nSince I'm a C# developer, I'm trying to use my existing knowledge in C# to learn JavaScript.<br>\nAs you know in C# we have something called <a href=\"https://msdn.microsoft.com/en-us/library/bb384062.aspx\">Object and collection initializer</a>. For example we can use object initializer to create name and value pairs for different properties of the object, in this case <code>car</code> object:</p>\n<pre><code class=\"language-csharp\">var car = new Car()\n{\n    Name = \"Chevrolet Corvette\",\n    Color = \"Red\",\n    Manufacturer = new CarManufacturer()\n    {\n        Name = \"Chevrolet\",\n        Country = \"USA\"\n    }\n};\n</code></pre>\n<p>As you can see we used object initializer for those embedded objects too.\nAlthough object initializers can be used for anonymous types. So here's the same example which we build with anonymous object:</p>\n<pre><code class=\"language-csharp\">var car = new {\n    Name = \"Chevrolet Corvette\",\n    Color = \"Red\",\n    Manufacturer = new {\n        Name = \"Chevrolet\",\n        Country = \"USA\"\n    }\n};\n</code></pre>\n<p>This is very similar the way dynamic objects work in JavaScript. So in JavaScript object creation is going to follow this pattern:</p>\n<pre><code class=\"language-js\">var car = {\n  name: \"Chevrolet Corvette\",\n  color: \"Red\",\n  manufacturer: {\n    name: \"Chevrolet\",\n    country: \"USA\",\n  },\n  \"towing capacity\": \"5,952 lbs\",\n}\n</code></pre>\n<p>As you can see we use key/value pairs. Actually it's a little different from C# for instance we used colons (<code>:</code>) instead of equals (<code>=</code>) but generally the syntaxes are similar. In some case you may see the name is embedded in quotes, it's optional but if you're using any reserved characters like space, in this case, you need to surround the name with quotes (like <code>towing capacity</code>).</p>\n<p>These dynamic objects that you have defined with this name value pairs allows you to take these objects you are creating and access each the properties you have defined in that name value pair by the name using a simple dot syntax. For example here in JavaScript you can just access the name using dot name convention:</p>\n<pre><code class=\"language-js\">var name = car.name\n</code></pre>\n<p>You can also use a bracket syntax, that's why objects are sometimes called associative arrays:</p>\n<pre><code class=\"language-js\">var name = car[\"name\"]\n</code></pre>\n<p>This way we can retrieve or set the property values. There are other ways for accessing and retrieving property value that are as follows:</p>\n<pre><code class=\"language-js\">car.color = \"Dot syntax\"\ncar[\"towing capacity\"] = \"String with space\"\ncar[str] = \"String value\"\ncar[rand] = \"Random Number\"\ncar[obj] = \"Object\"\ncar[\"\"] = \"Even an empty string\"\n</code></pre>\n<p>We can also get embedded objects that are the properties of those dynamic objects as well and retrive properties from them:</p>\n<pre><code class=\"language-js\">var manufacturer = car.manufacturer\nvar name = manufacturer.name\nvar country = manufacturer.country\n</code></pre>\n<p>###Malleability\nAs you probably know, One of the key features of JavaScript is that the language is <a href=\"http://blog.jeremymartin.name/2008/03/understanding-loose-typing-in.html\">loosely typed</a> it means that variables are declared without a type. So the objects that you are creating in this way are very malleable. In C# <code>ExpandoObject</code> gives you this behavior.</p>\n<blockquote>\n<p>ExpandoObject Represents an object whose members can be dynamically added and removed at run time.</p>\n</blockquote>\n<p>For example in this code we are creating a new object and marking it as dynamic so that we can add members to this <code>ExpandoObject</code> as we want:</p>\n<pre><code class=\"language-csharp\">dynamic car  = new ExpandoObject();\ncar.Name = \"Chevrolet Corvette\";\ncar.Color = \"Red\";\n</code></pre>\n<p>These are being added on-the-fly. It means that these aren't defining the shape ahead of time. We are just saying we are going to add properties to the <code>car</code> object. In fact this is pretty much the same way in JavaScript:</p>\n<pre><code class=\"language-js\">var car = {\n  name: \"Chevrolet Corvette\",\n  color: \"Red\",\n}\n</code></pre>\n<p>We can still add another property or function on-the-fly:</p>\n<pre><code class=\"language-js\">car[\"towing capacity\"] = \"5,952 lbs\"\ncar.model = function() {\n  var s = this.name\n}\n</code></pre>\n<p>Resourses:</p>\n<ul>\n    <li><a href=\"https://pluralsight.com/courses/js4cs\n\">JavaScript for C# Developers by Shawn Wildermuth</a></li>\n    <li><a href=\"https://mauricebutler.wordpress.com/2011/11/07/getting-started-with-javascript-with-a-c-background/\">Getting started with JavaScript with a C# background</a></li>\n    <li><a href=\"https://dzone.com/articles/javascript-c-developers\">JavaScript for C# Developers: Functions are Objects</a></li>\n</ul>","excerpt":"Recently I've started to improve my JavaScript skill, So I decided to keep notes about new things I learn from now on.\nSince I'm a Câ€¦"}},{"node":{"timeToRead":1,"frontmatter":{"title":"My first blog post!","date":"November 28th, 2015","slug":"First-Blog-Post","tags":["Hello World!"]},"html":"<p>Here's my first blog post :) In this blog I'm going to share thing that I learn, hope you enjoy reading my blog :)</p>","excerpt":"Here's my first blog post :) In this blog I'm going to share thing that I learn, hope you enjoy reading my blog :)"}}]}},"pageContext":{}},"staticQueryHashes":[]}